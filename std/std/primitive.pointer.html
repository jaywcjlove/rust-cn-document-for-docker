<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="åŸå§‹çš„ã€ä¸å®‰å…¨çš„æŒ‡é’ˆ `*const T` å’Œ `*mut T`ã€‚"><title>pointer - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="std" data-themes="" data-resource-suffix="1.71.0" data-rustdoc-version="1.71.0-dev" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items1.71.0.js"></script><script defer src="../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc primitive"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../std/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../std/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">pointer</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.add">add</a></li><li><a href="#method.add-1">add</a></li><li><a href="#method.addr">addr</a></li><li><a href="#method.addr-1">addr</a></li><li><a href="#method.align_offset">align_offset</a></li><li><a href="#method.align_offset-1">align_offset</a></li><li><a href="#method.as_mut">as_mut</a></li><li><a href="#method.as_mut_ptr">as_mut_ptr</a></li><li><a href="#method.as_ptr">as_ptr</a></li><li><a href="#method.as_ref">as_ref</a></li><li><a href="#method.as_ref-1">as_ref</a></li><li><a href="#method.as_uninit_mut">as_uninit_mut</a></li><li><a href="#method.as_uninit_ref">as_uninit_ref</a></li><li><a href="#method.as_uninit_ref-1">as_uninit_ref</a></li><li><a href="#method.as_uninit_slice">as_uninit_slice</a></li><li><a href="#method.as_uninit_slice-1">as_uninit_slice</a></li><li><a href="#method.as_uninit_slice_mut">as_uninit_slice_mut</a></li><li><a href="#method.byte_add">byte_add</a></li><li><a href="#method.byte_add-1">byte_add</a></li><li><a href="#method.byte_offset">byte_offset</a></li><li><a href="#method.byte_offset-1">byte_offset</a></li><li><a href="#method.byte_offset_from">byte_offset_from</a></li><li><a href="#method.byte_offset_from-1">byte_offset_from</a></li><li><a href="#method.byte_sub">byte_sub</a></li><li><a href="#method.byte_sub-1">byte_sub</a></li><li><a href="#method.cast">cast</a></li><li><a href="#method.cast-1">cast</a></li><li><a href="#method.cast_const">cast_const</a></li><li><a href="#method.cast_mut">cast_mut</a></li><li><a href="#method.copy_from">copy_from</a></li><li><a href="#method.copy_from_nonoverlapping">copy_from_nonoverlapping</a></li><li><a href="#method.copy_to">copy_to</a></li><li><a href="#method.copy_to-1">copy_to</a></li><li><a href="#method.copy_to_nonoverlapping">copy_to_nonoverlapping</a></li><li><a href="#method.copy_to_nonoverlapping-1">copy_to_nonoverlapping</a></li><li><a href="#method.drop_in_place">drop_in_place</a></li><li><a href="#method.expose_addr">expose_addr</a></li><li><a href="#method.expose_addr-1">expose_addr</a></li><li><a href="#method.from_bits">from_bits</a></li><li><a href="#method.from_bits-1">from_bits</a></li><li><a href="#method.get_unchecked">get_unchecked</a></li><li><a href="#method.get_unchecked_mut">get_unchecked_mut</a></li><li><a href="#method.guaranteed_eq">guaranteed_eq</a></li><li><a href="#method.guaranteed_eq-1">guaranteed_eq</a></li><li><a href="#method.guaranteed_ne">guaranteed_ne</a></li><li><a href="#method.guaranteed_ne-1">guaranteed_ne</a></li><li><a href="#method.is_aligned">is_aligned</a></li><li><a href="#method.is_aligned-1">is_aligned</a></li><li><a href="#method.is_aligned_to">is_aligned_to</a></li><li><a href="#method.is_aligned_to-1">is_aligned_to</a></li><li><a href="#method.is_empty">is_empty</a></li><li><a href="#method.is_null">is_null</a></li><li><a href="#method.is_null-1">is_null</a></li><li><a href="#method.len">len</a></li><li><a href="#method.len-1">len</a></li><li><a href="#method.map_addr">map_addr</a></li><li><a href="#method.map_addr-1">map_addr</a></li><li><a href="#method.mask">mask</a></li><li><a href="#method.mask-1">mask</a></li><li><a href="#method.offset">offset</a></li><li><a href="#method.offset-1">offset</a></li><li><a href="#method.offset_from">offset_from</a></li><li><a href="#method.offset_from-1">offset_from</a></li><li><a href="#method.read">read</a></li><li><a href="#method.read-1">read</a></li><li><a href="#method.read_unaligned">read_unaligned</a></li><li><a href="#method.read_unaligned-1">read_unaligned</a></li><li><a href="#method.read_volatile">read_volatile</a></li><li><a href="#method.read_volatile-1">read_volatile</a></li><li><a href="#method.replace">replace</a></li><li><a href="#method.split_at_mut">split_at_mut</a></li><li><a href="#method.split_at_mut_unchecked">split_at_mut_unchecked</a></li><li><a href="#method.sub">sub</a></li><li><a href="#method.sub-1">sub</a></li><li><a href="#method.sub_ptr">sub_ptr</a></li><li><a href="#method.sub_ptr-1">sub_ptr</a></li><li><a href="#method.swap">swap</a></li><li><a href="#method.to_bits">to_bits</a></li><li><a href="#method.to_bits-1">to_bits</a></li><li><a href="#method.to_raw_parts">to_raw_parts</a></li><li><a href="#method.to_raw_parts-1">to_raw_parts</a></li><li><a href="#method.with_addr">with_addr</a></li><li><a href="#method.with_addr-1">with_addr</a></li><li><a href="#method.with_metadata_of">with_metadata_of</a></li><li><a href="#method.with_metadata_of-1">with_metadata_of</a></li><li><a href="#method.wrapping_add">wrapping_add</a></li><li><a href="#method.wrapping_add-1">wrapping_add</a></li><li><a href="#method.wrapping_byte_add">wrapping_byte_add</a></li><li><a href="#method.wrapping_byte_add-1">wrapping_byte_add</a></li><li><a href="#method.wrapping_byte_offset">wrapping_byte_offset</a></li><li><a href="#method.wrapping_byte_offset-1">wrapping_byte_offset</a></li><li><a href="#method.wrapping_byte_sub">wrapping_byte_sub</a></li><li><a href="#method.wrapping_byte_sub-1">wrapping_byte_sub</a></li><li><a href="#method.wrapping_offset">wrapping_offset</a></li><li><a href="#method.wrapping_offset-1">wrapping_offset</a></li><li><a href="#method.wrapping_sub">wrapping_sub</a></li><li><a href="#method.wrapping_sub-1">wrapping_sub</a></li><li><a href="#method.write">write</a></li><li><a href="#method.write_bytes">write_bytes</a></li><li><a href="#method.write_unaligned">write_unaligned</a></li><li><a href="#method.write_volatile">write_volatile</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Send-for-*const+T">!Send</a></li><li><a href="#impl-Send-for-*mut+T">!Send</a></li><li><a href="#impl-Sync-for-*const+T">!Sync</a></li><li><a href="#impl-Sync-for-*mut+T">!Sync</a></li><li><a href="#impl-Clone-for-*const+T">Clone</a></li><li><a href="#impl-Clone-for-*mut+T">Clone</a></li><li><a href="#impl-CoerceUnsized%3C*const+U%3E-for-%26'a+T">CoerceUnsized&lt;*const U&gt;</a></li><li><a href="#impl-CoerceUnsized%3C*const+U%3E-for-%26'a+mut+T">CoerceUnsized&lt;*const U&gt;</a></li><li><a href="#impl-CoerceUnsized%3C*const+U%3E-for-*const+T">CoerceUnsized&lt;*const U&gt;</a></li><li><a href="#impl-CoerceUnsized%3C*const+U%3E-for-*mut+T">CoerceUnsized&lt;*const U&gt;</a></li><li><a href="#impl-CoerceUnsized%3C*mut+U%3E-for-%26'a+mut+T">CoerceUnsized&lt;*mut U&gt;</a></li><li><a href="#impl-CoerceUnsized%3C*mut+U%3E-for-*mut+T">CoerceUnsized&lt;*mut U&gt;</a></li><li><a href="#impl-Copy-for-*const+T">Copy</a></li><li><a href="#impl-Copy-for-*mut+T">Copy</a></li><li><a href="#impl-Debug-for-*const+T">Debug</a></li><li><a href="#impl-Debug-for-*mut+T">Debug</a></li><li><a href="#impl-DispatchFromDyn%3C*const+U%3E-for-*const+T">DispatchFromDyn&lt;*const U&gt;</a></li><li><a href="#impl-DispatchFromDyn%3C*mut+U%3E-for-*mut+T">DispatchFromDyn&lt;*mut U&gt;</a></li><li><a href="#impl-Eq-for-*const+T">Eq</a></li><li><a href="#impl-Eq-for-*mut+T">Eq</a></li><li><a href="#impl-From%3C*mut+T%3E-for-AtomicPtr%3CT%3E">From&lt;*mut T&gt;</a></li><li><a href="#impl-Hash-for-*const+T">Hash</a></li><li><a href="#impl-Hash-for-*mut+T">Hash</a></li><li><a href="#impl-Ord-for-*const+T">Ord</a></li><li><a href="#impl-Ord-for-*mut+T">Ord</a></li><li><a href="#impl-PartialEq%3C*const+T%3E-for-*const+T">PartialEq&lt;*const T&gt;</a></li><li><a href="#impl-PartialEq%3C*mut+T%3E-for-*mut+T">PartialEq&lt;*mut T&gt;</a></li><li><a href="#impl-PartialOrd%3C*const+T%3E-for-*const+T">PartialOrd&lt;*const T&gt;</a></li><li><a href="#impl-PartialOrd%3C*mut+T%3E-for-*mut+T">PartialOrd&lt;*mut T&gt;</a></li><li><a href="#impl-Pointer-for-*const+T">Pointer</a></li><li><a href="#impl-Pointer-for-*mut+T">Pointer</a></li><li><a href="#impl-SimdCastPtr%3CT%3E-for-*const+U">SimdCastPtr&lt;T&gt;</a></li><li><a href="#impl-SimdCastPtr%3CT%3E-for-*mut+U">SimdCastPtr&lt;T&gt;</a></li><li><a href="#impl-SimdElement-for-*const+T">SimdElement</a></li><li><a href="#impl-SimdElement-for-*mut+T">SimdElement</a></li><li><a href="#impl-Unpin-for-*const+T">Unpin</a></li><li><a href="#impl-Unpin-for-*mut+T">Unpin</a></li><li><a href="#impl-UnwindSafe-for-*const+T">UnwindSafe</a></li><li><a href="#impl-UnwindSafe-for-*mut+T">UnwindSafe</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-*const+T">RefUnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-*const+T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-*const+T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-*const+T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-*const+T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-*const+T">Into&lt;U&gt;</a></li><li><a href="#impl-ToOwned-for-*const+T">ToOwned</a></li><li><a href="#impl-TryFrom%3CU%3E-for-*const+T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-*const+T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In std</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Primitive Type <a class="primitive" href="#">pointer</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>åŸå§‹çš„ã€ä¸å®‰å…¨çš„æŒ‡é’ˆ <code>*const T</code> å’Œ <code>*mut T</code>ã€‚</p>
<p><em><a href="ptr/index.html" title="mod std::ptr">See also the <code>std::ptr</code> module</a>.</em></p>
<p>åœ¨ Rust ä¸­ä½¿ç”¨è£¸æŒ‡é’ˆå¹¶ä¸å¸¸è§ï¼Œé€šå¸¸ä»…é™äºå‡ ç§æ¨¡å¼ã€‚
è£¸æŒ‡é’ˆå¯ä»¥æ˜¯æœªå¯¹é½çš„æˆ– <a href="ptr/fn.null.html" title="fn std::ptr::null"><code>null</code></a>ã€‚ä½†æ˜¯ï¼Œå½“è§£å¼•ç”¨è£¸æŒ‡é’ˆ (ä½¿ç”¨ <code>*</code> è¿ç®—ç¬¦) æ—¶ï¼Œå®ƒå¿…é¡»ä¸ºé null å¹¶å¯¹é½ã€‚</p>
<p>ä½¿ç”¨ <code>*ptr = data</code> é€šè¿‡è£¸æŒ‡é’ˆå­˜å‚¨ä¼šåœ¨æ—§å€¼ä¸Šè°ƒç”¨ <code>drop</code>ï¼Œå› æ­¤ï¼Œå¦‚æœè¯¥ç±»å‹å…·æœ‰ drop glue å¹¶ä¸”å°šæœªåˆå§‹åŒ–å†…å­˜ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <a href="ptr/fn.write.html" title="fn std::ptr::write"><code>write</code></a>; å¦åˆ™ï¼Œå°†åœ¨æœªåˆå§‹åŒ–çš„å†…å­˜ä¸Šè°ƒç”¨ <code>drop</code>ã€‚</p>
<p>ä½¿ç”¨ <a href="ptr/fn.null.html" title="fn std::ptr::null"><code>null</code></a> å’Œ <a href="ptr/fn.null_mut.html" title="fn std::ptr::null_mut"><code>null_mut</code></a> å‡½æ•°åˆ›å»ºç©ºæŒ‡é’ˆï¼Œå¹¶ä½¿ç”¨ <code>*const T</code> å’Œ <code>*mut T</code> ç±»å‹çš„ <a href="primitive.pointer.html#method.is_null" title="method pointer::is_null"><code>is_null</code></a> æ–¹æ³•æ£€æŸ¥ç©ºå€¼ã€‚
<code>*const T</code> å’Œ <code>*mut T</code> ç±»å‹è¿˜å®šä¹‰äº†ç”¨äºæŒ‡é’ˆæ•°å­¦çš„ <a href="primitive.pointer.html#method.offset" title="method pointer::offset"><code>offset</code></a> æ–¹æ³•ã€‚</p>
<h2 id="åˆ›å»ºè£¸æŒ‡é’ˆçš„å¸¸ç”¨æ–¹æ³•"><a href="#åˆ›å»ºè£¸æŒ‡é’ˆçš„å¸¸ç”¨æ–¹æ³•">åˆ›å»ºè£¸æŒ‡é’ˆçš„å¸¸ç”¨æ–¹æ³•</a></h2><h3 id="1-å¼ºåˆ¶å¼•ç”¨-t-æˆ–å¯å˜å¼•ç”¨-mut-t"><a href="#1-å¼ºåˆ¶å¼•ç”¨-t-æˆ–å¯å˜å¼•ç”¨-mut-t">1. å¼ºåˆ¶å¼•ç”¨ (<code>&amp;T</code>) æˆ–å¯å˜å¼•ç”¨ (<code>&amp;mut T</code>)ã€‚</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>my_num: i32 = <span class="number">10</span>;
<span class="kw">let </span>my_num_ptr: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>my_num;
<span class="kw">let </span><span class="kw-2">mut </span>my_speed: i32 = <span class="number">88</span>;
<span class="kw">let </span>my_speed_ptr: <span class="kw-2">*mut </span>i32 = <span class="kw-2">&amp;mut </span>my_speed;</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+my_num:+i32+=+10;%0Alet+my_num_ptr:+*const+i32+=+%26my_num;%0Alet+mut+my_speed:+i32+=+88;%0Alet+my_speed_ptr:+*mut+i32+=+%26mut+my_speed;%0A%7D&amp;edition=2021">Run</a></div>
<p>è¦è·å¾—æŒ‡å‘ boxed å€¼çš„æŒ‡é’ˆï¼Œè¯·è§£å¼•ç”¨ boxï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>my_num: Box&lt;i32&gt; = Box::new(<span class="number">10</span>);
<span class="kw">let </span>my_num_ptr: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;*</span>my_num;
<span class="kw">let </span><span class="kw-2">mut </span>my_speed: Box&lt;i32&gt; = Box::new(<span class="number">88</span>);
<span class="kw">let </span>my_speed_ptr: <span class="kw-2">*mut </span>i32 = <span class="kw-2">&amp;mut *</span>my_speed;</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+my_num:+Box%3Ci32%3E+=+Box::new(10);%0Alet+my_num_ptr:+*const+i32+=+%26*my_num;%0Alet+mut+my_speed:+Box%3Ci32%3E+=+Box::new(88);%0Alet+my_speed_ptr:+*mut+i32+=+%26mut+*my_speed;%0A%7D&amp;edition=2021">Run</a></div>
<p>è¿™ä¸ä¼šè·å¾—åŸå§‹åˆ†é…çš„æ‰€æœ‰æƒï¼Œå¹¶ä¸”ä»¥åä¸éœ€è¦ä»»ä½•èµ„æºç®¡ç†ï¼Œä½†æ˜¯æ‚¨ä¸€å®šä¸èƒ½åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¹‹åä½¿ç”¨è¯¥æŒ‡é’ˆã€‚</p>
<h3 id="2-æ¶ˆè´¹-box-boxt"><a href="#2-æ¶ˆè´¹-box-boxt">2. æ¶ˆè´¹ box (<code>Box&lt;T&gt;</code>)ã€‚</a></h3>
<p><a href="boxed/struct.Box.html#method.into_raw" title="associated function std::boxed::Box::into_raw"><code>into_raw</code></a> å‡½æ•°æ¶ˆè´¹ box å¹¶è¿”å›è£¸æŒ‡é’ˆã€‚å®ƒä¸ä¼šé”€æ¯ <code>T</code> æˆ–é‡Šæ”¾ä»»ä½•å†…å­˜ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>my_speed: Box&lt;i32&gt; = Box::new(<span class="number">88</span>);
<span class="kw">let </span>my_speed: <span class="kw-2">*mut </span>i32 = Box::into_raw(my_speed);

<span class="comment">// é€šè¿‡æ‹¥æœ‰åŸå§‹ `Box&lt;T&gt;` çš„æ‰€æœ‰æƒï¼Œæˆ‘ä»¬æœ‰ä¹‰åŠ¡ç¨åå°†å…¶æ”¾åœ¨ä¸€èµ·é”€æ¯ã€‚
</span><span class="kw">unsafe </span>{
    drop(Box::from_raw(my_speed));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+my_speed:+Box%3Ci32%3E+=+Box::new(88);%0Alet+my_speed:+*mut+i32+=+Box::into_raw(my_speed);%0A%0A//+%E9%80%9A%E8%BF%87%E6%8B%A5%E6%9C%89%E5%8E%9F%E5%A7%8B+%60Box%3CT%3E%60+%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%83%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9C%89%E4%B9%89%E5%8A%A1%E7%A8%8D%E5%90%8E%E5%B0%86%E5%85%B6%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%E9%94%80%E6%AF%81%E3%80%82%0Aunsafe+%7B%0A++++drop(Box::from_raw(my_speed));%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
<p>è¯·æ³¨æ„ï¼Œæ­¤å¤„å¯¹ <a href="mem/fn.drop.html" title="fn std::mem::drop"><code>drop</code></a> çš„è°ƒç”¨æ˜¯ä¸ºäº†æ¸…æ¥šèµ·è§ - è¡¨ç¤ºæˆ‘ä»¬å·²ç»å®Œæˆäº†ç»™å®šå€¼çš„æ“ä½œï¼Œåº”å°†å…¶é”€æ¯ã€‚</p>
<h3 id="3-ä½¿ç”¨-ptraddr_of-åˆ›å»ºå®ƒ"><a href="#3-ä½¿ç”¨-ptraddr_of-åˆ›å»ºå®ƒ">3. ä½¿ç”¨ <code>ptr::addr_of!</code> åˆ›å»ºå®ƒ</a></h3>
<p>æ‚¨å¯ä»¥ä½¿ç”¨å® <a href="ptr/macro.addr_of.html" title="macro std::ptr::addr_of"><code>ptr::addr_of!</code></a> (å¯¹äº <code>*const T</code>) å’Œ <a href="ptr/macro.addr_of_mut.html" title="macro std::ptr::addr_of_mut"><code>ptr::addr_of_mut!</code></a> (å¯¹äº <code>*mut T</code>)ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶å¼•ç”¨è£¸æŒ‡é’ˆã€‚
è¿™äº›å®å…è®¸æ‚¨åˆ›å»ºè£¸æŒ‡é’ˆæŒ‡å‘æ‚¨æ— æ³•åˆ›å»ºå¼•ç”¨çš„å­—æ®µ (ä¸ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸º)ï¼Œä¾‹å¦‚æœªå¯¹é½çš„å­—æ®µã€‚
å¦‚æœæ¶‰åŠåŒ…è£…çš„ç»“æ„æˆ–æœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œè¿™å¯èƒ½æ˜¯å¿…è¦çš„ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[derive(Debug, Default, Copy, Clone)]
#[repr(C, packed)]
</span><span class="kw">struct </span>S {
    aligned: u8,
    unaligned: u32,
}
<span class="kw">let </span>s = S::default();
<span class="kw">let </span>p = <span class="macro">std::ptr::addr_of!</span>(s.unaligned); <span class="comment">// ä¸å…è®¸å¼ºåˆ¶è½¬æ¢</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0A%23%5Bderive(Debug,+Default,+Copy,+Clone)%5D%0A%23%5Brepr(C,+packed)%5D%0Astruct+S+%7B%0A++++aligned:+u8,%0A++++unaligned:+u32,%0A%7D%0Alet+s+=+S::default();%0Alet+p+=+std::ptr::addr_of!(s.unaligned);+//+%E4%B8%8D%E5%85%81%E8%AE%B8%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2%0A%7D&amp;edition=2021">Run</a></div>
<h3 id="4-ä»-c-è·å–å®ƒ"><a href="#4-ä»-c-è·å–å®ƒ">4. ä» C è·å–å®ƒã€‚</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[allow(unused_extern_crates)]
</span><span class="kw">extern crate </span>libc;

<span class="kw">use </span>std::mem;

<span class="kw">unsafe </span>{
    <span class="kw">let </span>my_num: <span class="kw-2">*mut </span>i32 = libc::malloc(mem::size_of::&lt;i32&gt;()) <span class="kw">as </span><span class="kw-2">*mut </span>i32;
    <span class="kw">if </span>my_num.is_null() {
        <span class="macro">panic!</span>(<span class="string">&quot;failed to allocate memory&quot;</span>);
    }
    libc::free(my_num <span class="kw">as </span><span class="kw-2">*mut </span>libc::c_void);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(rustc_private)%5D%0Afn+main()+%7B%0A%23%5Ballow(unused_extern_crates)%5D%0Aextern+crate+libc;%0A%0Ause+std::mem;%0A%0Aunsafe+%7B%0A++++let+my_num:+*mut+i32+=+libc::malloc(mem::size_of::%3Ci32%3E())+as+*mut+i32;%0A++++if+my_num.is_null()+%7B%0A++++++++panic!(%22failed+to+allocate+memory%22);%0A++++%7D%0A++++libc::free(my_num+as+*mut+libc::c_void);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>é€šå¸¸ï¼Œæ‚¨å®é™…ä¸Šä¸ä¼šä½¿ç”¨ Rust ä¸­çš„ <code>malloc</code> å’Œ <code>free</code>ï¼Œä½†æ˜¯ C API é€šå¸¸ä¼šå‘å‡ºå¾ˆå¤šæŒ‡é’ˆï¼Œå› æ­¤ Rust ä¸­çš„è£¸æŒ‡é’ˆå¸¸è§æ¥æºã€‚</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">Â§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-*const+%5BT%5D" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1596">source</a><a href="#impl-*const+%5BT%5D" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="primitive" href="primitive.pointer.html">*const </a><a class="primitive" href="primitive.slice.html">[T]</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.len" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/71146" title="Tracking issue for const_slice_ptr_len">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1617">source</a></span><h4 class="code-header">pub fn <a href="#method.len" class="fn">len</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_len</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/71146">#71146</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›åŸå§‹åˆ‡ç‰‡çš„é•¿åº¦ã€‚</p>
<p>è¿”å›çš„å€¼æ˜¯ <strong>å…ƒç´ </strong> çš„æ•°é‡ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ã€‚</p>
<p>å³ä½¿åŸå§‹åˆ‡ç‰‡ç”±äºæŒ‡é’ˆä¸ºç©ºæˆ–æœªå¯¹é½è€Œæ— æ³•è½¬æ¢ä¸ºåˆ‡ç‰‡å¼•ç”¨ï¼Œæ­¤å‡½æ•°ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_len)]

</span><span class="kw">use </span>std::ptr;

<span class="kw">let </span>slice: <span class="kw-2">*const </span>[i8] = ptr::slice_from_raw_parts(ptr::null(), <span class="number">3</span>);
<span class="macro">assert_eq!</span>(slice.len(), <span class="number">3</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_len)%5D%0A%0Afn+main()+%7B%0Ause+std::ptr;%0A%0Alet+slice:+*const+%5Bi8%5D+=+ptr::slice_from_raw_parts(ptr::null(),+3);%0Aassert_eq!(slice.len(),+3);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_ptr" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/74265" title="Tracking issue for slice_ptr_get">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1637">source</a></span><h4 class="code-header">pub fn <a href="#method.as_ptr" class="fn">as_ptr</a>(self) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_get</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/74265">#74265</a>)</span></div></span></summary><div class="docblock"><p>å°†è£¸æŒ‡é’ˆè¿”å›åˆ°åˆ‡ç‰‡çš„ç¼“å†²åŒºã€‚</p>
<p>è¿™ç­‰æ•ˆäºå°† <code>self</code> å¼ºåˆ¶è½¬æ¢ä¸º <code>*const T</code>ï¼Œä½†ç±»å‹å®‰å…¨æ€§æ›´é«˜ã€‚</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_get)]
</span><span class="kw">use </span>std::ptr;

<span class="kw">let </span>slice: <span class="kw-2">*const </span>[i8] = ptr::slice_from_raw_parts(ptr::null(), <span class="number">3</span>);
<span class="macro">assert_eq!</span>(slice.as_ptr(), ptr::null());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_get)%5D%0Afn+main()+%7B%0Ause+std::ptr;%0A%0Alet+slice:+*const+%5Bi8%5D+=+ptr::slice_from_raw_parts(ptr::null(),+3);%0Aassert_eq!(slice.as_ptr(),+ptr::null());%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_unchecked" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1662-1664">source</a><h4 class="code-header">pub unsafe fn <a href="#method.get_unchecked" class="fn">get_unchecked</a>&lt;I&gt;(
    self,
    index: I
) -&gt; <a class="primitive" href="primitive.pointer.html">*const </a>&lt;I as <a class="trait" href="slice/trait.SliceIndex.html" title="trait std::slice::SliceIndex">SliceIndex</a>&lt;<a class="primitive" href="primitive.slice.html">[T]</a>&gt;&gt;::<a class="associatedtype" href="slice/trait.SliceIndex.html#associatedtype.Output" title="type std::slice::SliceIndex::Output">Output</a><span class="where fmt-newline">where
    I: <a class="trait" href="slice/trait.SliceIndex.html" title="trait std::slice::SliceIndex">SliceIndex</a>&lt;<a class="primitive" href="primitive.slice.html">[T]</a>&gt;,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_get</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/74265">#74265</a>)</span></div></span></summary><div class="docblock"><p>å°†è£¸æŒ‡é’ˆè¿”å›åˆ°å…ƒç´ æˆ–å­åˆ‡ç‰‡ï¼Œè€Œä¸è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚</p>
<p>ä½¿ç”¨è¶Šç•Œç´¢å¼•æˆ–å½“ <code>self</code> ä¸å¯è§£å¼•ç”¨æ—¶è°ƒç”¨æ­¤æ–¹æ³•æ˜¯ <em><a href="https://doc.rust-lang.org/reference/behavior-considered-undefined.html">æœªå®šä¹‰è¡Œä¸º</a></em>ï¼Œå³ä½¿æœªä½¿ç”¨ç»“æœæŒ‡é’ˆã€‚</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_get)]

</span><span class="kw">let </span>x = <span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>] <span class="kw">as </span><span class="kw-2">*const </span>[i32];

<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(x.get_unchecked(<span class="number">1</span>), x.as_ptr().add(<span class="number">1</span>));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_get)%5D%0A%0Afn+main()+%7B%0Alet+x+=+%26%5B1,+2,+4%5D+as+*const+%5Bi32%5D;%0A%0Aunsafe+%7B%0A++++assert_eq!(x.get_unchecked(1),+x.as_ptr().add(1));%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_slice" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1710">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_slice" class="fn">as_uninit_slice</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a [<a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å›å…±äº«åˆ‡ç‰‡åˆ° <code>Some</code> ä¸­åŒ…è£…çš„å€¼ã€‚
ä¸ <a href="#method.as_ref"><code>as_ref</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»ä¸º <a href="ptr/index.html#safety" title="mod std::ptr">æœ‰æ•ˆ</a> çš„ï¼Œæ‰èƒ½è¯»å–è®¸å¤šå­—èŠ‚çš„ <code>ptr.len() * mem::size_of::&lt;T&gt;()</code>ï¼Œå¹¶ä¸”å¿…é¡»æ­£ç¡®å¯¹é½ã€‚è¿™å°¤å…¶æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>æ•´ä¸ªå†…å­˜èŒƒå›´å¿…é¡»åŒ…å«åœ¨å•ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> å†…ï¼
åˆ‡ç‰‡æ°¸è¿œä¸èƒ½è·¨è¶Šå¤šä¸ªåˆ†é…çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å³ä½¿å¯¹äºé›¶é•¿åº¦çš„åˆ‡ç‰‡ï¼ŒæŒ‡é’ˆä¹Ÿå¿…é¡»å¯¹é½ã€‚
è¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œæšä¸¾å¸ƒå±€ä¼˜åŒ–å¯èƒ½ä¾èµ–äºå¯¹é½çš„å¼•ç”¨ (åŒ…æ‹¬ä»»ä½•é•¿åº¦çš„åˆ‡ç‰‡) å’Œéç©ºå€¼ï¼Œä»¥å°†å®ƒä»¬ä¸å…¶ä»–æ•°æ®åŒºåˆ†å¼€ã€‚</p>
</li>
</ul>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <a href="ptr/struct.NonNull.html#method.dangling" title="associated function std::ptr::NonNull::dangling"><code>NonNull::dangling()</code></a> è·å¾—å¯ç”¨ä½œé›¶é•¿åº¦åˆ‡ç‰‡çš„ <code>data</code> çš„æŒ‡é’ˆã€‚</p>
</li>
<li>
<p>åˆ‡ç‰‡çš„æ€»å¤§å° <code>ptr.len() * mem::size_of::&lt;T&gt;()</code> ä¸èƒ½å¤§äº <code>isize::MAX</code>ã€‚
è¯·å‚è§ <a href="primitive.pointer.html#method.offset" title="method pointer::offset"><code>pointer::offset</code></a> çš„å®‰å…¨æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
<p>å¦è¯·å‚è§ <a href="slice/fn.from_raw_parts.html" title="fn std::slice::from_raw_parts"><code>slice::from_raw_parts</code></a>ã€‚</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#7">source</a><a href="#impl-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.is_null" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/74939" title="Tracking issue for const_ptr_is_null">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#34">source</a></span><h4 class="code-header">pub fn <a href="#method.is_null" class="fn">is_null</a>(self) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæœªå®šä¹‰å¤§å°çš„ç±»å‹å…·æœ‰è®¸å¤šå¯èƒ½çš„ç©ºæŒ‡é’ˆï¼Œå› ä¸ºä»…è€ƒè™‘åŸå§‹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¸è€ƒè™‘å…¶é•¿åº¦ï¼Œvtable ç­‰ã€‚
å› æ­¤ï¼Œä¸¤ä¸ªä¸ºç©ºçš„æŒ‡é’ˆå¯èƒ½ä»ä¸èƒ½ç›¸äº’æ¯”è¾ƒç›¸ç­‰ã€‚</p>
<h6 id="å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º"><a href="#å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º">å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º</a></h6>
<p>åœ¨ const è¯„ä¼°æœŸé—´ä½¿ç”¨æ­¤å‡½æ•°æ—¶ï¼Œå¯¹äºåœ¨è¿è¡Œæ—¶ç»“æœä¸ºç©ºçš„æŒ‡é’ˆï¼Œå®ƒå¯èƒ½è¿”å› <code>false</code>ã€‚
å…·ä½“æ¥è¯´ï¼Œå½“æŒ‡å‘æŸä¸ªå†…å­˜çš„æŒ‡é’ˆè¶…å‡ºå…¶èŒƒå›´çš„åç§»é‡ (ä½¿ç»“æœæŒ‡é’ˆä¸ºç©º) æ—¶ï¼Œå‡½æ•°ä»å°†è¿”å› <code>false</code>ã€‚</p>
<p>CTFE æ— æ³•çŸ¥é“è¯¥å†…å­˜çš„ç»å¯¹ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ç¡®å®šæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºã€‚</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;Follow the rabbit&quot;</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = s.as_ptr();
<span class="macro">assert!</span>(!ptr.is_null());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22Follow+the+rabbit%22;%0Alet+ptr:+*const+u8+=+s.as_ptr();%0Aassert!(!ptr.is_null());%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cast" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.38.0, const since 1.38.0">1.38.0 (const: 1.38.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#58">source</a></span><h4 class="code-header">pub const fn <a href="#method.cast" class="fn">cast</a>&lt;U&gt;(self) -&gt; <a class="primitive" href="primitive.pointer.html">*const U</a></h4></section></summary><div class="docblock"><p>å¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹çš„æŒ‡é’ˆã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_metadata_of" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/75091" title="Tracking issue for set_ptr_value">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#94-96">source</a></span><h4 class="code-header">pub fn <a href="#method.with_metadata_of" class="fn">with_metadata_of</a>&lt;U&gt;(self, meta: <a class="primitive" href="primitive.pointer.html">*const U</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const U</a><span class="where fmt-newline">where
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>set_ptr_value</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75091">#75091</a>)</span></div></span></summary><div class="docblock"><p>åœ¨å¦ä¸€ç§ç±»å‹çš„æ–°æŒ‡é’ˆä¸­ä½¿ç”¨æŒ‡é’ˆå€¼ã€‚</p>
<p>å¦‚æœ <code>meta</code> æ˜¯æŒ‡å‘æœªå®šä¹‰å¤§å°ç±»å‹çš„ (fat) æŒ‡é’ˆï¼Œæ­¤æ“ä½œå°†å¿½ç•¥æŒ‡é’ˆéƒ¨åˆ†ï¼Œè€Œå¯¹äºæŒ‡å‘å¤§å°ç±»å‹çš„ (thin) æŒ‡é’ˆï¼Œè¿™ä¸ç®€å•å¼ºåˆ¶è½¬æ¢å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚</p>
<p>ç”Ÿæˆçš„æŒ‡é’ˆå°†å…·æœ‰ <code>self</code> çš„æ¥æºï¼Œå³ï¼Œå¯¹äºèƒ–æŒ‡é’ˆï¼Œæ­¤æ“ä½œåœ¨è¯­ä¹‰ä¸Šä¸åˆ›å»ºæ•°æ®æŒ‡é’ˆå€¼ä¸º <code>self</code> ä½†å…ƒæ•°æ®ä¸º <code>meta</code> çš„æ–°èƒ–æŒ‡é’ˆç›¸åŒã€‚</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<p>æ­¤å‡½æ•°ä¸»è¦ç”¨äºå…è®¸å¯¹æ½œåœ¨çš„èƒ–æŒ‡é’ˆè¿›è¡ŒæŒ‰å­—èŠ‚æŒ‡é’ˆç®—æœ¯è¿ç®—ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(set_ptr_value)]
</span><span class="kw">let </span>arr: [i32; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr = arr.as_ptr() <span class="kw">as </span><span class="kw-2">*const </span><span class="kw">dyn </span>Debug;
<span class="kw">let </span>thin = ptr <span class="kw">as </span><span class="kw-2">*const </span>u8;
<span class="kw">unsafe </span>{
    ptr = thin.add(<span class="number">8</span>).with_metadata_of(ptr);
    <span class="macro">println!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="kw-2">&amp;*</span>ptr); <span class="comment">// å°†æ‰“å° &quot;3&quot;
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(set_ptr_value)%5D%0Afn+main()+%7B%0Ause+core::fmt::Debug;%0Alet+arr:+%5Bi32;+3%5D+=+%5B1,+2,+3%5D;%0Alet+mut+ptr+=+arr.as_ptr()+as+*const+dyn+Debug;%0Alet+thin+=+ptr+as+*const+u8;%0Aunsafe+%7B%0A++++ptr+=+thin.add(8).with_metadata_of(ptr);%0Aassert_eq!(*(ptr+as+*const+i32),+3);%0A++++println!(%22%7B:?%7D%22,+%26*ptr);+//+%E5%B0%86%E6%89%93%E5%8D%B0+%223%22%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cast_mut" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.65.0, const since 1.65.0">1.65.0 (const: 1.65.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#108">source</a></span><h4 class="code-header">pub const fn <a href="#method.cast_mut" class="fn">cast_mut</a>(self) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>æ›´æ”¹å¸¸é‡è€Œä¸æ›´æ”¹ç±»å‹ã€‚</p>
<p>è¿™æ¯” <code>as</code> å®‰å…¨ä¸€ç‚¹ï¼Œå› ä¸ºå¦‚æœé‡æ„ä»£ç ï¼Œå®ƒä¸ä¼šé»˜é»˜åœ°æ”¹å˜ç±»å‹ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_bits" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#140-142">source</a><h4 class="code-header">pub fn <a href="#method.to_bits" class="fn">to_bits</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">ğŸ‘</span><span>Deprecated since 1.67.0: replaced by the <code>expose_addr</code> method, or update your code to follow the strict provenance rules using its APIs</span></div><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_to_from_bits</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/91126">#91126</a>)</span></div></span></summary><div class="docblock"><p>å°†æŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ä¸ºåŸå§‹ä½ã€‚</p>
<p>è¿™ç­‰æ•ˆäº <code>as usize</code>ï¼Œä½†æ›´å…·ä½“ä»¥å¢å¼ºå¯è¯»æ€§ã€‚
ç›¸åçš„æ–¹æ³•æ˜¯ <a href="#method.from_bits"><code>from_bits</code></a>ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œ<code>*p as usize</code> å’Œ <code>p as usize</code> éƒ½ä¼šç¼–è¯‘æŒ‡å‘æ•°å­—ç±»å‹çš„æŒ‡é’ˆï¼Œä½†åšçš„äº‹æƒ…å´æˆªç„¶ä¸åŒï¼Œå› æ­¤ä½¿ç”¨å®ƒæœ‰åŠ©äºå¼ºè°ƒè¯»å–ä½æ˜¯æœ‰æ„çš„ã€‚</p>
<h5 id="examples-5"><a href="#examples-5">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_to_from_bits)]
</span><span class="kw">let </span>array = [<span class="number">13</span>, <span class="number">42</span>];
<span class="kw">let </span>p0: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>array[<span class="number">0</span>];
<span class="macro">assert_eq!</span>(&lt;<span class="kw-2">*const </span><span class="kw">_</span>&gt;::from_bits(p0.to_bits()), p0);
<span class="kw">let </span>p1: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>array[<span class="number">1</span>];
<span class="macro">assert_eq!</span>(p1.to_bits() - p0.to_bits(), <span class="number">4</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_to_from_bits)%5D%0Afn+main()+%7B%0A%23%5Bcfg(not(miri))%5D+%7B+//+doctest+%E4%B8%8D%E9%80%82%E7%94%A8%E4%BA%8E%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%87%BA%E5%A4%84%0Alet+array+=+%5B13,+42%5D;%0Alet+p0:+*const+i32+=+%26array%5B0%5D;%0Aassert_eq!(%3C*const+_%3E::from_bits(p0.to_bits()),+p0);%0Alet+p1:+*const+i32+=+%26array%5B1%5D;%0Aassert_eq!(p1.to_bits()+-+p0.to_bits(),+4);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_bits" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#170-172">source</a><h4 class="code-header">pub fn <a href="#method.from_bits" class="fn">from_bits</a>(bits: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">ğŸ‘</span><span>Deprecated since 1.67.0: replaced by the <code>ptr::from_exposed_addr</code> function, or update your code to follow the strict provenance rules using its APIs</span></div><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_to_from_bits</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/91126">#91126</a>)</span></div></span></summary><div class="docblock"><p>ä»å…¶åŸå§‹ä½åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆã€‚</p>
<p>è¿™ç­‰æ•ˆäº <code>as *const T</code>ï¼Œä½†æ›´å…·ä½“åœ°è¯´æ˜¯ä¸ºäº†å¢å¼ºå¯è¯»æ€§ã€‚
ç›¸åçš„æ–¹æ³•æ˜¯ <a href="#method.to_bits"><code>to_bits</code></a>ã€‚</p>
<h5 id="examples-6"><a href="#examples-6">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_to_from_bits)]
</span><span class="kw">use </span>std::ptr::NonNull;
<span class="kw">let </span>dangling: <span class="kw-2">*const </span>u8 = NonNull::dangling().as_ptr();
<span class="macro">assert_eq!</span>(&lt;<span class="kw-2">*const </span>u8&gt;::from_bits(<span class="number">1</span>), dangling);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_to_from_bits)%5D%0Afn+main()+%7B%0A%23%5Bcfg(not(miri))%5D+%7B+//+doctest+%E4%B8%8D%E9%80%82%E7%94%A8%E4%BA%8E%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%87%BA%E5%A4%84%0Ause+std::ptr::NonNull;%0Alet+dangling:+*const+u8+=+NonNull::dangling().as_ptr();%0Aassert_eq!(%3C*const+u8%3E::from_bits(1),+dangling);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.addr" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#203">source</a><h4 class="code-header">pub fn <a href="#method.addr" class="fn">addr</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>è·å–æŒ‡é’ˆçš„ â€œaddressâ€ éƒ¨åˆ†ã€‚</p>
<p>è¿™ç±»ä¼¼äº <code>self as usize</code>ï¼Œå®ƒåœ¨è¯­ä¹‰ä¸Šä¸¢å¼ƒäº†<em>provenance</em> å’Œ<em>address-space</em> ä¿¡æ¯ã€‚
ä½†æ˜¯ï¼Œä¸ <code>self as usize</code> ä¸åŒï¼Œå°†è¿”å›çš„åœ°å€è½¬æ¢å›æŒ‡é’ˆä¼šäº§ç”Ÿ <a href="ptr/fn.invalid.html" title="fn std::ptr::invalid"><code>invalid</code></a>ï¼Œè¿™å¯¹äºè§£å¼•ç”¨æ¥è¯´æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚
è¦æ­£ç¡®æ¢å¤ä¸¢å¤±çš„ä¿¡æ¯å¹¶è·å¾—å¯è§£å¼•ç”¨çš„æŒ‡é’ˆï¼Œè¯·ä½¿ç”¨ <a href="primitive.pointer.html#method.with_addr" title="method pointer::with_addr"><code>with_addr</code></a> æˆ– <a href="primitive.pointer.html#method.map_addr" title="method pointer::map_addr"><code>map_addr</code></a>ã€‚</p>
<p>å¦‚æœç”±äºæ— æ³•ä¿ç•™å…·æœ‰æ‰€éœ€å‡ºå¤„çš„æŒ‡é’ˆè€Œæ— æ³•ä½¿ç”¨è¿™äº› APIï¼Œè¯·æ”¹ç”¨ <a href="primitive.pointer.html#method.expose_addr" title="method pointer::expose_addr"><code>expose_addr</code></a> å’Œ <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a>ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œè¿™ä¼šé™ä½æ‚¨çš„ä»£ç çš„å¯ç§»æ¤æ€§ï¼Œå¹¶ä¸”ä¸å¤ªé€‚åˆç”¨äºæ£€æŸ¥æ˜¯å¦ç¬¦åˆ Rust å†…å­˜æ¨¡å‹çš„å·¥å…·ã€‚</p>
<p>åœ¨å¤§å¤šæ•°å¹³å°ä¸Šï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒå­—èŠ‚çš„å€¼ï¼Œå› ä¸ºæ‰€æœ‰å­—èŠ‚éƒ½ä¸“ç”¨äºæè¿°åœ°å€ã€‚
éœ€è¦åœ¨æŒ‡é’ˆä¸­å­˜å‚¨é™„åŠ ä¿¡æ¯çš„å¹³å°å¯ä»¥æ‰§è¡Œè¡¨ç¤ºçš„æ”¹å˜ï¼Œä»¥äº§ç”Ÿä»…åŒ…å«æŒ‡é’ˆçš„åœ°å€éƒ¨åˆ†çš„å€¼ã€‚
è¿™æ„å‘³ç€ä»€ä¹ˆå–å†³äºå¹³å°æ¥å®šä¹‰ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯èƒ½ä¼šåœ¨ future ä¸­å‘ç”Ÿå˜åŒ– (åŒ…æ‹¬å¯èƒ½å‰Šå¼±è¿™ä¸€ç‚¹ï¼Œä½¿å…¶å®Œå…¨ç­‰åŒäº <code>self as usize</code>)ã€‚
æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ [<a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.expose_addr" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#237">source</a><h4 class="code-header">pub fn <a href="#method.expose_addr" class="fn">expose_addr</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>è·å–æŒ‡é’ˆçš„ â€œaddressâ€ éƒ¨åˆ†ï¼Œå¹¶æš´éœ² â€œprovenanceâ€ éƒ¨åˆ†ï¼Œä»¥ä¾¿å°†æ¥åœ¨ <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a> ä¸­ä½¿ç”¨ã€‚</p>
<p>è¿™ç›¸å½“äº <code>self as usize</code>ï¼Œå®ƒåœ¨è¯­ä¹‰ä¸Šä¸¢å¼ƒäº† <em>provenance</em> å’Œ <em>address-space</em> ä¿¡æ¯ã€‚
æ­¤å¤–ï¼Œè¿™ (å¦‚ <code>as</code> cast  ä¸€æ ·) å…·æœ‰å°†å‡ºå¤„æ ‡è®°ä¸º â€˜exposedâ€™ çš„éšå¼å‰¯ä½œç”¨ï¼Œå› æ­¤åœ¨æ”¯æŒå®ƒçš„å¹³å°ä¸Šï¼Œæ‚¨å¯ä»¥ç¨åè°ƒç”¨ <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a> æ¥é‡æ„åŸå§‹æŒ‡é’ˆï¼ŒåŒ…æ‹¬å…¶å‡ºå¤„ã€‚</p>
<p>(å¦‚æœéœ€è¦ï¼Œé‡å»ºåœ°å€ç©ºé—´ä¿¡æ¯æ˜¯æ‚¨çš„è´£ä»»ã€‚)</p>
<p>ä½¿ç”¨è¿™ç§æ–¹æ³•æ„å‘³ç€ä»£ç æ²¡æœ‰éµå¾ªä¸¥æ ¼çš„å‡ºå¤„è§„åˆ™ã€‚
æ”¯æŒ <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a> ä¼šä½¿è§„èŒƒå’Œæ¨ç†å¤æ‚åŒ–ï¼Œå¹¶ä¸”å¯èƒ½ä¸å—å¸®åŠ©æ‚¨ä¸ Rust å†…å­˜æ¨¡å‹ä¿æŒä¸€è‡´çš„å·¥å…·çš„æ”¯æŒï¼Œå› æ­¤å»ºè®®å°½å¯èƒ½ä½¿ç”¨ <a href="primitive.pointer.html#method.addr" title="method pointer::addr"><code>addr</code></a>ã€‚</p>
<p>åœ¨å¤§å¤šæ•°å¹³å°ä¸Šï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒå­—èŠ‚çš„å€¼ï¼Œå› ä¸ºæ‰€æœ‰å­—èŠ‚éƒ½ä¸“ç”¨äºæè¿°åœ°å€ã€‚
éœ€è¦åœ¨æŒ‡é’ˆä¸­å­˜å‚¨é™„åŠ ä¿¡æ¯çš„å¹³å°å¯èƒ½ä¸æ”¯æŒæ­¤æ“ä½œï¼Œå› ä¸º <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a> å·¥ä½œæ‰€éœ€çš„ â€˜exposeâ€™ å‰¯ä½œç”¨é€šå¸¸ä¸å¯ç”¨ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_addr" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#257">source</a><h4 class="code-header">pub fn <a href="#method.with_addr" class="fn">with_addr</a>(self, addr: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç»™å®šåœ°å€åˆ›å»ºä¸€ä¸ªæ–°æŒ‡é’ˆã€‚</p>
<p>è¿™æ‰§è¡Œä¸ <code>addr as ptr</code> å¼ºåˆ¶è½¬æ¢ç›¸åŒçš„æ“ä½œï¼Œä½†å°† <code>self</code> çš„ <em>address-space</em> å’Œ <em>provenance</em> å¤åˆ¶åˆ°æ–°æŒ‡é’ˆã€‚
è¿™ä½¿æˆ‘ä»¬èƒ½å¤ŸåŠ¨æ€åœ°ä¿å­˜å’Œä¼ æ’­è¿™äº›é‡è¦ä¿¡æ¯ï¼Œè€Œè¿™åœ¨å…¶ä»–æƒ…å†µä¸‹ä½¿ç”¨ä¸€å…ƒå¼ºåˆ¶è½¬æ¢æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>è¿™ç›¸å½“äºä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_offset" title="method pointer::wrapping_offset"><code>wrapping_offset</code></a> å°† <code>self</code> åç§»åˆ°ç»™å®šåœ°å€ï¼Œå› æ­¤å…·æœ‰æ‰€æœ‰ç›¸åŒçš„åŠŸèƒ½å’Œé™åˆ¶ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.map_addr" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#280">source</a><h4 class="code-header">pub fn <a href="#method.map_addr" class="fn">map_addr</a>(self, f: impl <a class="trait" href="ops/trait.FnOnce.html" title="trait std::ops::FnOnce">FnOnce</a>(<a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>é€šè¿‡å°† <code>self</code> çš„åœ°å€æ˜ å°„åˆ°æ–°åœ°å€æ¥åˆ›å»ºæ–°æŒ‡é’ˆã€‚</p>
<p>è¿™å¯¹ <a href="primitive.pointer.html#method.with_addr" title="method pointer::with_addr"><code>with_addr</code></a> æ¥è¯´æ˜¯ä¸€ç§æ–¹ä¾¿ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_raw_parts" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/81513" title="Tracking issue for ptr_metadata">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#290">source</a></span><h4 class="code-header">pub fn <a href="#method.to_raw_parts" class="fn">to_raw_parts</a>(self) -&gt; (<a class="primitive" href="primitive.pointer.html">*const </a><a class="primitive" href="primitive.unit.html">()</a>, &lt;T as <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&gt;::<a class="associatedtype" href="ptr/trait.Pointee.html#associatedtype.Metadata" title="type std::ptr::Pointee::Metadata">Metadata</a>)</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_metadata</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/81513">#81513</a>)</span></div></span></summary><div class="docblock"><p>å°†æŒ‡é’ˆ (å¯èƒ½æ˜¯å®½æŒ‡é’ˆ) åˆ†è§£ä¸ºå…¶åœ°å€å’Œå…ƒæ•°æ®ç»„ä»¶ã€‚</p>
<p>ä»¥åå¯ä»¥ä½¿ç”¨ <a href="ptr/fn.from_raw_parts.html" title="fn std::ptr::from_raw_parts"><code>from_raw_parts</code></a> é‡å»ºæŒ‡é’ˆã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_ref" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0, const unstable">1.9.0 (const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#351">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_ref" class="fn">as_ref</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.reference.html">&amp;'a T</a>&gt;</h4></section></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å…±äº«å¼•ç”¨ã€‚å¦‚æœè¯¥å€¼å¯èƒ½æœªåˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»æ”¹ç”¨ <a href="#method.as_uninit_ref"><code>as_uninit_ref</code></a>ã€‚</p>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æŒ‡é’ˆå¿…é¡»æŒ‡å‘ <code>T</code> çš„åˆå§‹åŒ–å®ä¾‹ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼
(å…³äºåˆå§‹åŒ–çš„éƒ¨åˆ†å°šæœªå®Œå…¨å†³å®šï¼Œä½†æ˜¯ç›´åˆ°ç¡®å®šä¹‹å‰ï¼Œå”¯ä¸€å®‰å…¨çš„æ–¹æ³•æ˜¯ç¡®ä¿å®ƒä»¬ç¡®å®è¢«åˆå§‹åŒ–ã€‚)</p>
<h5 id="examples-7"><a href="#examples-7">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = <span class="kw-2">&amp;</span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*const </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">if let </span><span class="prelude-val">Some</span>(val_back) = ptr.as_ref() {
        <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {val_back}!&quot;</span>);
    }
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr:+*const+u8+=+%2610u8+as+*const+u8;%0A%0Aunsafe+%7B%0A++++if+let+Some(val_back)+=+ptr.as_ref()+%7B%0A++++++++println!(%22We+got+back+the+value:+%7Bval_back%7D!%22);%0A++++%7D%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
<h5 id="ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬"><a href="#ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬">ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬</a></h5>
<p>å¦‚æœç¡®å®šæŒ‡é’ˆæ°¸è¿œä¸ä¼šä¸ºç©ºï¼Œå¹¶ä¸”æ­£åœ¨å¯»æ‰¾æŸç§è¿”å› <code>&amp;T</code> è€Œä¸æ˜¯ <code>Option&lt;&amp;T&gt;</code> çš„ <code>as_ref_unchecked</code>ï¼Œè¯·çŸ¥é“æ‚¨å¯ä»¥ç›´æ¥å¼•ç”¨è¯¥æŒ‡é’ˆã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = <span class="kw-2">&amp;</span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*const </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">let </span>val_back = <span class="kw-2">&amp;*</span>ptr;
    <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {val_back}!&quot;</span>);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr:+*const+u8+=+%2610u8+as+*const+u8;%0A%0Aunsafe+%7B%0A++++let+val_back+=+%26*ptr;%0A++++println!(%22We+got+back+the+value:+%7Bval_back%7D!%22);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_ref" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#397-399">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_ref" class="fn">as_uninit_ref</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a <a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å…±äº«å¼•ç”¨ã€‚
ä¸ <a href="#method.as_ref"><code>as_ref</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<h5 id="safety-2"><a href="#safety-2">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
<h5 id="examples-8"><a href="#examples-8">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_as_uninit)]

</span><span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = <span class="kw-2">&amp;</span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*const </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">if let </span><span class="prelude-val">Some</span>(val_back) = ptr.as_uninit_ref() {
        <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {}!&quot;</span>, val_back.assume_init());
    }
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_as_uninit)%5D%0A%0Afn+main()+%7B%0Alet+ptr:+*const+u8+=+%2610u8+as+*const+u8;%0A%0Aunsafe+%7B%0A++++if+let+Some(val_back)+=+ptr.as_uninit_ref()+%7B%0A++++++++println!(%22We+got+back+the+value:+%7B%7D!%22,+val_back.assume_init());%0A++++%7D%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.offset" class="method"><span class="rightside"><span class="since" title="const since 1.61.0">const: 1.61.0</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#460-462">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.offset" class="fn">offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-3"><a href="#safety-3">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šä½¿ <code>isize</code> æº¢å‡ºã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦æ€»å’Œ (ä»¥å­—èŠ‚ä¸ºå•ä½) å¿…é¡»é€‚åˆäº usizeã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_offset"><code>wrapping_offset</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-9"><a href="#examples-9">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;123&quot;</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = s.as_ptr();

<span class="kw">unsafe </span>{
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.offset(<span class="number">1</span>) <span class="kw">as </span>char);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.offset(<span class="number">2</span>) <span class="kw">as </span>char);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22123%22;%0Alet+ptr:+*const+u8+=+s.as_ptr();%0A%0Aunsafe+%7B%0A++++println!(%22%7B%7D%22,+*ptr.offset(1)+as+char);%0A++++println!(%22%7B%7D%22,+*ptr.offset(2)+as+char);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_offset" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#483">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_offset" class="fn">byte_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚</p>
<p><code>count</code> ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.offset" title="method pointer::offset">offset</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_offset" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.16.0, const since 1.61.0">1.16.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#540-542">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_offset" class="fn">wrapping_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-4"><a href="#safety-4">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_offset((y as isize) - (x as isize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.offset"><code>offset</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.offset"><code>offset</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_offset</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.offset"><code>offset</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_offset(o).wrapping_offset(o.wrapping_neg())</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-10"><a href="#examples-10">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´ ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*const </span>u8 = data.as_ptr();
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="kw">let </span>end_rounded_up = ptr.wrapping_offset(<span class="number">6</span>);

<span class="comment">// æ­¤å¾ªç¯æ‰“å° &quot;1, 3, 5, &quot;
</span><span class="kw">while </span>ptr != end_rounded_up {
    <span class="kw">unsafe </span>{
        <span class="macro">print!</span>(<span class="string">&quot;{}, &quot;</span>, <span class="kw-2">*</span>ptr);
    }
    ptr = ptr.wrapping_offset(step);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*const+u8+=+data.as_ptr();%0Alet+step+=+2;%0Alet+end_rounded_up+=+ptr.wrapping_offset(6);%0A%0A//+%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B0+%221,+3,+5,+%22%0Awhile+ptr+!=+end_rounded_up+%7B%0A++++unsafe+%7B%0A++++++++print!(%22%7B%7D,+%22,+*ptr);%0A++++%7D%0A++++ptr+=+ptr.wrapping_offset(step);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_offset" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#562">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_offset" class="fn">wrapping_byte_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚</p>
<p><code>count</code> ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_offset" title="method pointer::wrapping_offset">wrapping_offset</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.mask" class="method"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#600">source</a><h4 class="code-header">pub fn <a href="#method.mask" class="fn">mask</a>(self, mask: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_mask</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/98290">#98290</a>)</span></div></span></summary><div class="docblock"><p>æ ¹æ®æ©ç å±è”½æŒ‡é’ˆçš„ä½ã€‚</p>
<p>è¿™å¯¹ <code>ptr.map_addr(|a| a &amp; mask)</code> æ¥è¯´å¾ˆæ–¹ä¾¿ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
<h6 id="examples-11"><a href="#examples-11">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_mask, strict_provenance)]
</span><span class="kw">let </span>v = <span class="number">17_u32</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*const </span>u32 = <span class="kw-2">&amp;</span>v;

<span class="comment">// `u32` æ˜¯ 4 å­—èŠ‚å¯¹é½çš„ï¼Œè¿™æ„å‘³ç€ä½ 2 ä½æ€»æ˜¯ 0.
</span><span class="kw">let </span>tag_mask = <span class="number">0b11</span>;
<span class="kw">let </span>ptr_mask = !tag_mask;

<span class="comment">// æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›ä½ä½å­˜å‚¨ä¸€äº›ä¸œè¥¿
</span><span class="kw">let </span>tagged_ptr = ptr.map_addr(|a| a | <span class="number">0b10</span>);

<span class="comment">// å–å› &quot;tag&quot;
</span><span class="kw">let </span>tag = tagged_ptr.addr() &amp; tag_mask;
<span class="macro">assert_eq!</span>(tag, <span class="number">0b10</span>);

<span class="comment">// æ³¨æ„ `tagged_ptr` æ˜¯æœªå¯¹é½çš„ï¼Œå®ƒæ˜¯ UB è¯»å–å®ƒã€‚
// è¦è·å¾—åŸå§‹æŒ‡é’ˆ `mask` å¯ä»¥ä½¿ç”¨:
</span><span class="kw">let </span>masked_ptr = tagged_ptr.mask(ptr_mask);
<span class="macro">assert_eq!</span>(<span class="kw">unsafe </span>{ <span class="kw-2">*</span>masked_ptr }, <span class="number">17</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_mask,+strict_provenance)%5D%0Afn+main()+%7B%0Alet+v+=+17_u32;%0Alet+ptr:+*const+u32+=+%26v;%0A%0A//+%60u32%60+%E6%98%AF+4+%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90%E7%9A%84%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E4%BD%8E+2+%E4%BD%8D%E6%80%BB%E6%98%AF+0.%0Alet+tag_mask+=+0b11;%0Alet+ptr_mask+=+!tag_mask;%0A%0A//+%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E4%BA%9B%E4%BD%8E%E4%BD%8D%E5%AD%98%E5%82%A8%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF%0Alet+tagged_ptr+=+ptr.map_addr(%7Ca%7C+a+%7C+0b10);%0A%0A//+%E5%8F%96%E5%9B%9E+%22tag%22%0Alet+tag+=+tagged_ptr.addr()+%26+tag_mask;%0Aassert_eq!(tag,+0b10);%0A%0A//+%E6%B3%A8%E6%84%8F+%60tagged_ptr%60+%E6%98%AF%E6%9C%AA%E5%AF%B9%E9%BD%90%E7%9A%84%EF%BC%8C%E5%AE%83%E6%98%AF+UB+%E8%AF%BB%E5%8F%96%E5%AE%83%E3%80%82%0A//+%E8%A6%81%E8%8E%B7%E5%BE%97%E5%8E%9F%E5%A7%8B%E6%8C%87%E9%92%88+%60mask%60+%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8:%0Alet+masked_ptr+=+tagged_ptr.mask(ptr_mask);%0Aassert_eq!(unsafe+%7B+*masked_ptr+%7D,+17);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.offset_from" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.47.0, const since 1.65.0">1.47.0 (const: 1.65.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#689-691">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.offset_from" class="fn">offset_from</a>(self, origin: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.isize.html">isize</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ã€‚è¿”å›å€¼ä»¥ T ä¸ºå•ä½: ä»¥å­—èŠ‚ä¸ºå•ä½çš„è·ç¦»é™¤ä»¥ <code>mem::size_of::&lt;T&gt;()</code>ã€‚</p>
<p>è¯¥å‡½æ•°æ˜¯ <a href="#method.offset"><code>offset</code></a> çš„é€†å‡½æ•°ã€‚</p>
<h5 id="safety-5"><a href="#safety-5">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œå…¶ä»–æŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>ä¸¤ä¸ªæŒ‡é’ˆå¿…é¡»æ˜¯æŒ‡å‘åŒä¸€å¯¹è±¡çš„æŒ‡é’ˆçš„ *derivedã€‚
(è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚)</p>
</li>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦» (ä»¥å­—èŠ‚ä¸ºå•ä½) å¿…é¡»æ˜¯ <code>T</code> å¤§å°çš„ç²¾ç¡®å€æ•°ã€‚</p>
</li>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦» (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šæº¢å‡º <code>isize</code>ã€‚</p>
</li>
<li>
<p>è¯¥è·ç¦»ä¸èƒ½ä¾èµ–äº â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚</p>
</li>
</ul>
<p>Rust ç±»å‹ä»ä¸å¤§äº <code>isize::MAX</code>ï¼Œå¹¶ä¸” Rust åˆ†é…ä»ä¸ç¯ç»•åœ°å€ç©ºé—´ï¼Œå› æ­¤ï¼Œä»»ä½• Rust ç±»å‹ <code>T</code> çš„æŸä¸ªå€¼å†…çš„ä¸¤ä¸ªæŒ‡é’ˆå°†å§‹ç»ˆæ»¡è¶³æœ€åä¸¤ä¸ªæ¡ä»¶ã€‚</p>
<p>æ ‡å‡†åº“é€šå¸¸è¿˜ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸è¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>ptr_into_vec.offset_from(vec.as_ptr())</code> å§‹ç»ˆæ»¡è¶³æœ€åä¸¤ä¸ªæ¡ä»¶ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„å»ºå¦‚æ­¤å¤§çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚
å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚
(è¯·æ³¨æ„ï¼Œ<a href="#method.offset"><code>offset</code></a> å’Œ <a href="#method.add"><code>add</code></a> ä¹Ÿå…·æœ‰ç±»ä¼¼çš„é™åˆ¶ï¼Œå› æ­¤ä¹Ÿä¸èƒ½åœ¨å¦‚æ­¤å¤§çš„åˆ†é…ä¸Šä½¿ç”¨ã€‚)</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>å¦‚æœ <code>T</code> æ˜¯é›¶å¤§å°ç±»å‹ (â€œZSTâ€)ï¼Œåˆ™æ­¤å‡½æ•° panicsã€‚</p>
<h5 id="examples-12"><a href="#examples-12">Examples</a></h5>
<p>åŸºæœ¬ç”¨æ³•ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>a = [<span class="number">0</span>; <span class="number">5</span>];
<span class="kw">let </span>ptr1: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>a[<span class="number">1</span>];
<span class="kw">let </span>ptr2: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>a[<span class="number">3</span>];
<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(ptr2.offset_from(ptr1), <span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.offset_from(ptr2), -<span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.offset(<span class="number">2</span>), ptr2);
    <span class="macro">assert_eq!</span>(ptr2.offset(-<span class="number">2</span>), ptr1);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+a+=+%5B0;+5%5D;%0Alet+ptr1:+*const+i32+=+%26a%5B1%5D;%0Alet+ptr2:+*const+i32+=+%26a%5B3%5D;%0Aunsafe+%7B%0A++++assert_eq!(ptr2.offset_from(ptr1),+2);%0A++++assert_eq!(ptr1.offset_from(ptr2),+-2);%0A++++assert_eq!(ptr1.offset(2),+ptr2);%0A++++assert_eq!(ptr2.offset(-2),+ptr1);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
<p><em>ä¸æ­£ç¡®</em> ç”¨æ³•ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr1 = Box::into_raw(Box::new(<span class="number">0u8</span>)) <span class="kw">as </span><span class="kw-2">*const </span>u8;
<span class="kw">let </span>ptr2 = Box::into_raw(Box::new(<span class="number">1u8</span>)) <span class="kw">as </span><span class="kw-2">*const </span>u8;
<span class="kw">let </span>diff = (ptr2 <span class="kw">as </span>isize).wrapping_sub(ptr1 <span class="kw">as </span>isize);
<span class="comment">// å°† ptr2_other è®¾ç½®ä¸º ptr2 çš„ &quot;alias&quot;ï¼Œä½†ä» ptr1 æ´¾ç”Ÿã€‚
</span><span class="kw">let </span>ptr2_other = (ptr1 <span class="kw">as </span><span class="kw-2">*const </span>u8).wrapping_offset(diff);
<span class="macro">assert_eq!</span>(ptr2 <span class="kw">as </span>usize, ptr2_other <span class="kw">as </span>usize);
<span class="comment">// ç”±äº ptr2_other å’Œ ptr2 æ˜¯ä»æŒ‡å‘ä¸åŒå¯¹è±¡çš„æŒ‡é’ˆæ´¾ç”Ÿçš„ï¼Œå› æ­¤å³ä½¿å®ƒä»¬æŒ‡å‘ç›¸åŒçš„åœ°å€ï¼Œè®¡ç®—å…¶åç§»é‡ä¹Ÿæ˜¯æœªå®šä¹‰çš„è¡Œä¸ºï¼
</span><span class="kw">unsafe </span>{
    <span class="kw">let </span>zero = ptr2_other.offset_from(ptr2); <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr1+=+Box::into_raw(Box::new(0u8))+as+*const+u8;%0Alet+ptr2+=+Box::into_raw(Box::new(1u8))+as+*const+u8;%0Alet+diff+=+(ptr2+as+isize).wrapping_sub(ptr1+as+isize);%0A//+%E5%B0%86+ptr2_other+%E8%AE%BE%E7%BD%AE%E4%B8%BA+ptr2+%E7%9A%84+%22alias%22%EF%BC%8C%E4%BD%86%E4%BB%8E+ptr1+%E6%B4%BE%E7%94%9F%E3%80%82%0Alet+ptr2_other+=+(ptr1+as+*const+u8).wrapping_offset(diff);%0Aassert_eq!(ptr2+as+usize,+ptr2_other+as+usize);%0A//+%E7%94%B1%E4%BA%8E+ptr2_other+%E5%92%8C+ptr2+%E6%98%AF%E4%BB%8E%E6%8C%87%E5%90%91%E4%B8%8D%E5%90%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8C%87%E9%92%88%E6%B4%BE%E7%94%9F%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8D%B3%E4%BD%BF%E5%AE%83%E4%BB%AC%E6%8C%87%E5%90%91%E7%9B%B8%E5%90%8C%E7%9A%84%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%AE%A1%E7%AE%97%E5%85%B6%E5%81%8F%E7%A7%BB%E9%87%8F%E4%B9%9F%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%EF%BC%81%0Aunsafe+%7B%0A++++let+zero+=+ptr2_other.offset_from(ptr2);+//+%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_offset_from" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#712">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_offset_from" class="fn">byte_offset_from</a>&lt;U&gt;(self, origin: <a class="primitive" href="primitive.pointer.html">*const U</a>) -&gt; <a class="primitive" href="primitive.isize.html">isize</a><span class="where fmt-newline">where
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ã€‚è¿”å›å€¼ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.offset_from" title="method pointer::offset_from">offset_from</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…è€ƒè™‘æ•°æ®æŒ‡é’ˆï¼Œå¿½ç•¥å…ƒæ•°æ®ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.sub_ptr" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/95892" title="Tracking issue for const_ptr_sub_ptr">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#781-783">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.sub_ptr" class="fn">sub_ptr</a>(self, origin: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_sub_ptr</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95892">#95892</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ï¼Œ<em>where å·²çŸ¥ <code>self</code> ç­‰äºæˆ–å¤§äº <code>origin</code></em>ã€‚è¿”å›å€¼ä»¥ T ä¸ºå•ä½: ä»¥å­—èŠ‚ä¸ºå•ä½çš„è·ç¦»é™¤ä»¥ <code>mem::size_of::&lt;T&gt;()</code>ã€‚</p>
<p>è¿™å°†è®¡ç®— <a href="#method.offset_from"><code>offset_from</code></a> å°†è®¡ç®—çš„ç›¸åŒå€¼ï¼Œä½†é™„åŠ çš„å‰ææ¡ä»¶æ˜¯åç§»é‡ä¿è¯ä¸ºé negativeã€‚
æ­¤æ–¹æ³•ç­‰åŒäº <code>usize::try_from(self.offset_from(origin)).unwrap_unchecked()</code>ï¼Œä½†å®ƒä¸ºä¼˜åŒ–å™¨æä¾›äº†æ›´å¤šçš„ä¿¡æ¯ï¼Œè¿™æœ‰æ—¶å¯ä»¥ä½¿å…¶åœ¨æŸäº›åç«¯ä¼˜åŒ–å¾—æ›´å¥½ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥çœ‹ä½œæ˜¯æ¢å¤ä¼ é€’ç»™ <a href="#method.add"><code>add</code></a> çš„ <code>count</code> (æˆ–è€…ï¼Œä½¿ç”¨å…¶ä»–é¡ºåºçš„å‚æ•°ï¼Œåˆ° <a href="#method.sub"><code>sub</code></a>).
ä»¥ä¸‹éƒ½æ˜¯ç­‰ä»·çš„ï¼Œå‡è®¾å®ƒä»¬çš„å®‰å…¨å…ˆå†³æ¡ä»¶å¾—åˆ°æ»¡è¶³:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>ptr.sub_ptr(origin) == count
origin.add(count) == ptr
ptr.sub(count) == origin</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_sub_ptr)%5D%0Afn+main()+%7B%0Aunsafe+fn+blah(ptr:+*const+i32,+origin:+*const+i32,+count:+usize)+-%3E+bool+%7B%0Aptr.sub_ptr(origin)+==+count%0A%26%26%0Aorigin.add(count)+==+ptr%0A%26%26%0Aptr.sub(count)+==+origin%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="safety-6"><a href="#safety-6">Safety</a></h5>
<ul>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦»å¿…é¡»æ˜¯é negative (<code>self &gt;= origin</code>)</p>
</li>
<li>
<p><em>æ‰€æœ‰</em><a href="#method.offset_from"><code>offset_from</code></a> çš„å®‰å…¨æ¡ä»¶ä¹Ÿé€‚ç”¨äºæ­¤æ–¹æ³•; æŸ¥çœ‹å®Œæ•´çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
</ul>
<p>é‡è¦çš„æ˜¯ï¼Œå°½ç®¡æ­¤æ–¹æ³•çš„è¿”å›ç±»å‹èƒ½å¤Ÿè¡¨ç¤ºæ›´å¤§çš„åç§»é‡ï¼Œä½†ä»ç„¶<em>ä¸å…è®¸</em>ä¼ é€’ç›¸å·®è¶…è¿‡ <code>isize::MAX</code> <em>bytes</em> çš„æŒ‡é’ˆã€‚
å› æ­¤ï¼Œæ­¤æ–¹æ³•çš„ç»“æœå°†å§‹ç»ˆå°äºæˆ–ç­‰äº <code>isize::MAX as usize</code>ã€‚</p>
<h5 id="panics-1"><a href="#panics-1">Panics</a></h5>
<p>å¦‚æœ <code>T</code> æ˜¯é›¶å¤§å°ç±»å‹ (â€œZSTâ€)ï¼Œåˆ™æ­¤å‡½æ•° panicsã€‚</p>
<h5 id="examples-13"><a href="#examples-13">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_sub_ptr)]

</span><span class="kw">let </span>a = [<span class="number">0</span>; <span class="number">5</span>];
<span class="kw">let </span>ptr1: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>a[<span class="number">1</span>];
<span class="kw">let </span>ptr2: <span class="kw-2">*const </span>i32 = <span class="kw-2">&amp;</span>a[<span class="number">3</span>];
<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(ptr2.sub_ptr(ptr1), <span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.add(<span class="number">2</span>), ptr2);
    <span class="macro">assert_eq!</span>(ptr2.sub(<span class="number">2</span>), ptr1);
    <span class="macro">assert_eq!</span>(ptr2.sub_ptr(ptr2), <span class="number">0</span>);
}

<span class="comment">// è¿™æ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºæŒ‡é’ˆçš„é¡ºåºä¸æ­£ç¡®:
// ptr1.sub_ptr(ptr2)</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_sub_ptr)%5D%0A%0Afn+main()+%7B%0Alet+a+=+%5B0;+5%5D;%0Alet+ptr1:+*const+i32+=+%26a%5B1%5D;%0Alet+ptr2:+*const+i32+=+%26a%5B3%5D;%0Aunsafe+%7B%0A++++assert_eq!(ptr2.sub_ptr(ptr1),+2);%0A++++assert_eq!(ptr1.add(2),+ptr2);%0A++++assert_eq!(ptr2.sub(2),+ptr1);%0A++++assert_eq!(ptr2.sub_ptr(ptr2),+0);%0A%7D%0A%0A//+%E8%BF%99%E6%98%AF%E4%B8%8D%E6%AD%A3%E7%A1%AE%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%8C%87%E9%92%88%E7%9A%84%E9%A1%BA%E5%BA%8F%E4%B8%8D%E6%AD%A3%E7%A1%AE:%0A//+ptr1.sub_ptr(ptr2)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.guaranteed_eq" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/53020" title="Tracking issue for const_raw_ptr_comparison">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#821-823">source</a></span><h4 class="code-header">pub fn <a href="#method.guaranteed_eq" class="fn">guaranteed_eq</a>(self, other: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.bool.html">bool</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>const_raw_ptr_comparison</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/53020">#53020</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦ä¿è¯ç›¸ç­‰ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºç±»ä¼¼äº <code>Some(self == other)</code>ã€‚
ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œç¼–è¯‘æ—¶è¯„ä¼°)ï¼Œå¹¶ä¸æ€»æ˜¯å¯ä»¥ç¡®å®šä¸¤ä¸ªæŒ‡é’ˆçš„ç›¸ç­‰æ€§ï¼Œå› æ­¤è¯¥å‡½æ•°å¯èƒ½ä¼šè™šå‡åœ°è¿”å› <code>None</code> ä»¥è·å–ç¨åå®é™…ä¸Šè¯æ˜å…¶ç›¸ç­‰æ€§å·²çŸ¥çš„æŒ‡é’ˆã€‚</p>
<p>ä½†æ˜¯å½“å®ƒè¿”å› <code>Some</code> æ—¶ï¼Œå¯ä»¥ä¿è¯çŸ¥é“æŒ‡é’ˆçš„ç›¸ç­‰æ€§ã€‚</p>
<p>è¿”å›å€¼å¯èƒ½ä¼šä» <code>Some</code> æ›´æ”¹ä¸º <code>None</code>ï¼Œåä¹‹äº¦ç„¶ï¼Œå…·ä½“å–å†³äºç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸å®‰å…¨çš„ä»£ç ä¸èƒ½ä¾èµ–æ­¤å‡½æ•°çš„ç»“æœæ¥ä¿è¯å¯é æ€§ã€‚
å»ºè®®ä»…å°†æ­¤å‡½æ•°ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå…¶ä¸­æ­¤å‡½æ•°çš„è™šå‡ <code>None</code> è¿”å›å€¼ä¸ä¼šå½±å“ç»“æœï¼Œè€Œåªä¼šå½±å“æ€§èƒ½ã€‚
å°šæœªæ¢è®¨ä½¿ç”¨æ­¤æ–¹æ³•ä½¿è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ä»£ç è¡¨ç°ä¸åŒçš„åæœã€‚
ä¸åº”ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥å¼•å…¥è¿™ç§å·®å¼‚ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬å¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´å¥½çš„ç†è§£ä¹‹å‰ï¼Œä¹Ÿä¸åº”ä½¿å…¶ç¨³å®šã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.guaranteed_ne" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/53020" title="Tracking issue for const_raw_ptr_comparison">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#851-853">source</a></span><h4 class="code-header">pub fn <a href="#method.guaranteed_ne" class="fn">guaranteed_ne</a>(self, other: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.bool.html">bool</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>const_raw_ptr_comparison</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/53020">#53020</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æ˜¯å¦ä¿è¯ä¸¤ä¸ªæŒ‡é’ˆä¸ç›¸ç­‰ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºç±»ä¼¼äº <code>Some(self != other)</code>ã€‚
ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œç¼–è¯‘æ—¶æ±‚å€¼)ï¼Œå¹¶ä¸æ€»æ˜¯å¯ä»¥ç¡®å®šä¸¤ä¸ªæŒ‡é’ˆçš„ä¸ç­‰å¼ï¼Œå› æ­¤è¯¥å‡½æ•°å¯èƒ½ä¼šè™šå‡åœ°è¿”å› <code>None</code> ä»¥è·å–åæ¥å®é™…è¯æ˜å…¶ä¸ç­‰å¼çš„æŒ‡é’ˆã€‚</p>
<p>ä½†æ˜¯å½“å®ƒè¿”å› <code>Some</code> æ—¶ï¼ŒæŒ‡é’ˆçš„ä¸ç­‰å¼ä¿è¯æ˜¯å·²çŸ¥çš„ã€‚</p>
<p>è¿”å›å€¼å¯èƒ½ä¼šä» <code>Some</code> æ›´æ”¹ä¸º <code>None</code>ï¼Œåä¹‹äº¦ç„¶ï¼Œå…·ä½“å–å†³äºç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸å®‰å…¨çš„ä»£ç ä¸èƒ½ä¾èµ–æ­¤å‡½æ•°çš„ç»“æœæ¥ä¿è¯å¯é æ€§ã€‚
å»ºè®®ä»…å°†æ­¤å‡½æ•°ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå…¶ä¸­æ­¤å‡½æ•°çš„è™šå‡ <code>None</code> è¿”å›å€¼ä¸ä¼šå½±å“ç»“æœï¼Œè€Œåªä¼šå½±å“æ€§èƒ½ã€‚
å°šæœªæ¢è®¨ä½¿ç”¨æ­¤æ–¹æ³•ä½¿è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ä»£ç è¡¨ç°ä¸åŒçš„åæœã€‚
ä¸åº”ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥å¼•å…¥è¿™ç§å·®å¼‚ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬å¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´å¥½çš„ç†è§£ä¹‹å‰ï¼Œä¹Ÿä¸åº”ä½¿å…¶ç¨³å®šã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#915-917">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.add" class="fn">add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (<code>.offset(count as isize)</code> çš„ä¾¿åˆ©æ€§)ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-7"><a href="#safety-7">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šä½¿ <code>isize</code> æº¢å‡ºã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦çš„æ€»å’Œå¿…é¡»ç¬¦åˆ <code>usize</code>ã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_add"><code>wrapping_add</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-14"><a href="#examples-14">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;123&quot;</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = s.as_ptr();

<span class="kw">unsafe </span>{
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.add(<span class="number">1</span>) <span class="kw">as </span>char);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.add(<span class="number">2</span>) <span class="kw">as </span>char);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22123%22;%0Alet+ptr:+*const+u8+=+s.as_ptr();%0A%0Aunsafe+%7B%0A++++println!(%22%7B%7D%22,+*ptr.add(1)+as+char);%0A++++println!(%22%7B%7D%22,+*ptr.add(2)+as+char);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_add" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#946">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_add" class="fn">byte_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä»¥å­—èŠ‚ä¸ºå•ä½è®¡ç®—æŒ‡é’ˆçš„åç§»é‡ (æ–¹ä¾¿ <code>.byte_offset(count as isize)</code>)ã€‚</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.add" title="method pointer::add">add</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.sub" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1006-1008">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.sub" class="fn">sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (<code>.offset((count as isize).wrapping_neg())</code> çš„ä¾¿åˆ©æ€§)ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-8"><a href="#safety-8">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ä¸èƒ½è¶…è¿‡ <code>isize::MAX</code> ä¸ª <strong>å­—èŠ‚</strong>ã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦çš„æ€»å’Œå¿…é¡»ç¬¦åˆä½¿ç”¨å¤§å°ã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len()).sub(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_sub"><code>wrapping_sub</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-15"><a href="#examples-15">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;123&quot;</span>;

<span class="kw">unsafe </span>{
    <span class="kw">let </span>end: <span class="kw-2">*const </span>u8 = s.as_ptr().add(<span class="number">3</span>);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>end.sub(<span class="number">1</span>) <span class="kw">as </span>char);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>end.sub(<span class="number">2</span>) <span class="kw">as </span>char);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22123%22;%0A%0Aunsafe+%7B%0A++++let+end:+*const+u8+=+s.as_ptr().add(3);%0A++++println!(%22%7B%7D%22,+*end.sub(1)+as+char);%0A++++println!(%22%7B%7D%22,+*end.sub(2)+as+char);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_sub" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1030">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_sub" class="fn">byte_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä»¥å­—èŠ‚ä¸ºå•ä½è®¡ç®—æŒ‡é’ˆçš„åç§»é‡ (æ–¹ä¾¿ <code>.byte_offset((count as isize).wrapping_neg())</code>)ã€‚</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.sub" title="method pointer::sub">sub</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_add" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1088-1090">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_add" class="fn">wrapping_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚
(ä¸º <code>.wrapping_offset(count as isize)</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-9"><a href="#safety-9">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_add((y as usize) - (x as usize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.add"><code>add</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.add"><code>add</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_add</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.add"><code>add</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_add(o).wrapping_sub(o)</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-16"><a href="#examples-16">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´ ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*const </span>u8 = data.as_ptr();
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="kw">let </span>end_rounded_up = ptr.wrapping_add(<span class="number">6</span>);

<span class="comment">// æ­¤å¾ªç¯æ‰“å° &quot;1, 3, 5, &quot;
</span><span class="kw">while </span>ptr != end_rounded_up {
    <span class="kw">unsafe </span>{
        <span class="macro">print!</span>(<span class="string">&quot;{}, &quot;</span>, <span class="kw-2">*</span>ptr);
    }
    ptr = ptr.wrapping_add(step);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*const+u8+=+data.as_ptr();%0Alet+step+=+2;%0Alet+end_rounded_up+=+ptr.wrapping_add(6);%0A%0A//+%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B0+%221,+3,+5,+%22%0Awhile+ptr+!=+end_rounded_up+%7B%0A++++unsafe+%7B%0A++++++++print!(%22%7B%7D,+%22,+*ptr);%0A++++%7D%0A++++ptr+=+ptr.wrapping_add(step);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_add" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1109">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_add" class="fn">wrapping_byte_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚
(ä¾¿äº <code>.wrapping_byte_offset(è®¡ä¸º isize)</code>)</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_add" title="method pointer::wrapping_add">wrapping_add</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_sub" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1166-1168">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_sub" class="fn">wrapping_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚
(ä¸º <code>.wrapping_offset((count as isize).wrapping_neg())</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-10"><a href="#safety-10">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_sub((x as usize) - (y as usize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.sub"><code>sub</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.sub"><code>sub</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_sub</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.sub"><code>sub</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_add(o).wrapping_sub(o)</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-17"><a href="#examples-17">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´  (backwards) ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*const </span>u8 = data.as_ptr();
<span class="kw">let </span>start_rounded_down = ptr.wrapping_sub(<span class="number">2</span>);
ptr = ptr.wrapping_add(<span class="number">4</span>);
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="comment">// æ­¤å¾ªç¯æ‰“å° &quot;5, 3, 1, &quot;
</span><span class="kw">while </span>ptr != start_rounded_down {
    <span class="kw">unsafe </span>{
        <span class="macro">print!</span>(<span class="string">&quot;{}, &quot;</span>, <span class="kw-2">*</span>ptr);
    }
    ptr = ptr.wrapping_sub(step);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0+(backwards)+%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*const+u8+=+data.as_ptr();%0Alet+start_rounded_down+=+ptr.wrapping_sub(2);%0Aptr+=+ptr.wrapping_add(4);%0Alet+step+=+2;%0A//+%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B0+%225,+3,+1,+%22%0Awhile+ptr+!=+start_rounded_down+%7B%0A++++unsafe+%7B%0A++++++++print!(%22%7B%7D,+%22,+*ptr);%0A++++%7D%0A++++ptr+=+ptr.wrapping_sub(step);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_sub" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1187">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_sub" class="fn">wrapping_byte_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚
(ä¸º <code>.wrapping_offset((count as isize).wrapping_neg())</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_sub" title="method pointer::wrapping_sub">wrapping_sub</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.71.0">1.26.0 (const: 1.71.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1201-1203">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.read" class="fn">read</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>ä» <code>self</code> è¯»å–å€¼è€Œä¸ç§»åŠ¨å®ƒã€‚
è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read.html" title="fn std::ptr::read"><code>ptr::read</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_volatile" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0">1.26.0</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1222-1224">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.read_volatile" class="fn">read_volatile</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>å¯¹ <code>self</code> çš„å€¼è¿›è¡Œæ˜“å¤±æ€§è¯»å–ï¼Œè€Œæ— éœ€ç§»åŠ¨å®ƒã€‚è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>æ˜“å¤±æ€§æ“ä½œæ—¨åœ¨ä½œç”¨äº I/O å­˜å‚¨å™¨ï¼Œå¹¶ä¿è¯ç¼–è¯‘å™¨ä¸ä¼šåœ¨å…¶ä»–æ˜“å¤±æ€§æ“ä½œä¸­å¯¹æ˜“å¤±æ€§æ“ä½œè¿›è¡Œæ¸…é™¤æˆ–é‡æ–°æ’åºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read_volatile.html" title="fn std::ptr::read_volatile"><code>ptr::read_volatile</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_unaligned" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.71.0">1.26.0 (const: 1.71.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1242-1244">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.read_unaligned" class="fn">read_unaligned</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>ä» <code>self</code> è¯»å–å€¼è€Œä¸ç§»åŠ¨å®ƒã€‚
è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>ä¸ <code>read</code> ä¸åŒï¼ŒæŒ‡é’ˆå¯èƒ½æœªå¯¹é½ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read_unaligned.html" title="fn std::ptr::read_unaligned"><code>ptr::read_unaligned</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_to" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1262-1264">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_to" class="fn">copy_to</a>(self, dest: <a class="primitive" href="primitive.pointer.html">*mut T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>self</code> å¤åˆ¶åˆ° <code>dest</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ä¼šé‡å ã€‚</p>
<p>NOTE: è¿™ä¸ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a> å…·æœ‰ç›¸åŒçš„å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_to_nonoverlapping" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1282-1284">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_to_nonoverlapping" class="fn">copy_to_nonoverlapping</a>(self, dest: <a class="primitive" href="primitive.pointer.html">*mut T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>self</code> å¤åˆ¶åˆ° <code>dest</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ <em>ä¸</em> é‡å ã€‚</p>
<p>NOTE: è¿™ä¸ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a> å…·æœ‰ç›¸åŒçš„å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.align_offset" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.36.0, const unstable">1.36.0 (const: <a href="https://github.com/rust-lang/rust/issues/90962" title="Tracking issue for const_align_offset">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1334-1336">source</a></span><h4 class="code-header">pub fn <a href="#method.align_offset" class="fn">align_offset</a>(self, align: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸ºä½¿å…¶ä¸ <code>align</code> å¯¹é½è€Œéœ€è¦åº”ç”¨åˆ°æŒ‡é’ˆçš„åç§»é‡ã€‚</p>
<p>å¦‚æœæ— æ³•å¯¹é½æŒ‡é’ˆï¼Œåˆ™å®ç°å°†è¿”å› <code>usize::MAX</code>ã€‚
å…è®¸å®ç° <em>å§‹ç»ˆ</em> è¿”å› <code>usize::MAX</code>ã€‚
åªæœ‰ç®—æ³•çš„æ€§èƒ½å¯ä»¥å–å†³äºæ­¤å¤„æ˜¯å¦å¯è·å¾—å¯ç”¨çš„åç§»é‡ï¼Œè€Œä¸å–å†³äºå…¶æ­£ç¡®æ€§ã€‚</p>
<p>åç§»é‡ä»¥ <code>T</code> å…ƒç´ çš„æ•°é‡è¡¨ç¤ºï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚è¡¨ç¤ºã€‚è¿”å›çš„å€¼å¯ä»¥ä¸ <code>wrapping_add</code> æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>ä¸èƒ½ä¿è¯åç§»æŒ‡é’ˆä¸ä¼šæº¢å‡ºæˆ–è¶…å‡ºæŒ‡é’ˆæ‰€æŒ‡å‘çš„åˆ†é…èŒƒå›´ã€‚</p>
<p>è°ƒç”¨è€…åº”ç¡®ä¿è¿”å›çš„åç§»é‡åœ¨å¯¹é½æ–¹å¼ä»¥å¤–çš„æ‰€æœ‰æ–¹é¢éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<h5 id="panics-2"><a href="#panics-2">Panics</a></h5>
<p>å¦‚æœ <code>align</code> ä¸æ˜¯ 2 çš„å¹‚ï¼Œåˆ™å‡½æ•° panicsã€‚</p>
<h5 id="examples-18"><a href="#examples-18">Examples</a></h5>
<p>å°†ç›¸é‚»çš„ <code>u8</code> ä½œä¸º <code>u16</code> è¿›è¡Œè®¿é—®</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::mem::align_of;

<span class="kw">let </span>x = [<span class="number">5_u8</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];
<span class="kw">let </span>ptr = x.as_ptr();
<span class="kw">let </span>offset = ptr.align_offset(align_of::&lt;u16&gt;());

<span class="kw">if </span>offset &lt; x.len() - <span class="number">1 </span>{
    <span class="kw">let </span>u16_ptr = ptr.add(offset).cast::&lt;u16&gt;();
    <span class="macro">assert!</span>(<span class="kw-2">*</span>u16_ptr == u16::from_ne_bytes([<span class="number">5</span>, <span class="number">6</span>]) || <span class="kw-2">*</span>u16_ptr == u16::from_ne_bytes([<span class="number">6</span>, <span class="number">7</span>]));
} <span class="kw">else </span>{
    <span class="comment">// è™½ç„¶æŒ‡é’ˆå¯ä»¥é€šè¿‡ `offset` å¯¹é½ï¼Œä½†å®ƒä¼šæŒ‡å‘åˆ†é…ä¹‹å¤–
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::mem::align_of;%0A%0Aunsafe+%7B%0Alet+x+=+%5B5_u8,+6,+7,+8,+9%5D;%0Alet+ptr+=+x.as_ptr();%0Alet+offset+=+ptr.align_offset(align_of::%3Cu16%3E());%0A%0Aif+offset+%3C+x.len()+-+1+%7B%0A++++let+u16_ptr+=+ptr.add(offset).cast::%3Cu16%3E();%0A++++assert!(*u16_ptr+==+u16::from_ne_bytes(%5B5,+6%5D)+%7C%7C+*u16_ptr+==+u16::from_ne_bytes(%5B6,+7%5D));%0A%7D+else+%7B%0A++++//+%E8%99%BD%E7%84%B6%E6%8C%87%E9%92%88%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87+%60offset%60+%E5%AF%B9%E9%BD%90%EF%BC%8C%E4%BD%86%E5%AE%83%E4%BC%9A%E6%8C%87%E5%90%91%E5%88%86%E9%85%8D%E4%B9%8B%E5%A4%96%0A%7D%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_aligned" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/104203" title="Tracking issue for const_pointer_is_aligned">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1456-1458">source</a></span><h4 class="code-header">pub fn <a href="#method.is_aligned" class="fn">is_aligned</a>(self) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_is_aligned</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96284">#96284</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æŒ‡é’ˆæ˜¯å¦ä¸º <code>T</code> æ­£ç¡®å¯¹é½ã€‚</p>
<h5 id="examples-19"><a href="#examples-19">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(pointer_byte_offsets)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">let </span>data = AlignedI32(<span class="number">42</span>);
<span class="kw">let </span>ptr = <span class="kw-2">&amp;</span>data <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32;

<span class="macro">assert!</span>(ptr.is_aligned());
<span class="macro">assert!</span>(!ptr.wrapping_byte_add(<span class="number">1</span>).is_aligned());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(pointer_byte_offsets)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Alet+data+=+AlignedI32(42);%0Alet+ptr+=+%26data+as+*const+AlignedI32;%0A%0Aassert!(ptr.is_aligned());%0Aassert!(!ptr.wrapping_byte_add(1).is_aligned());%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="åœ¨ç¼–è¯‘æ—¶"><a href="#åœ¨ç¼–è¯‘æ—¶">åœ¨ç¼–è¯‘æ—¶</a></h5>
<p><strong>Note: ç¼–è¯‘æ—¶çš„å¯¹é½æ˜¯å®éªŒæ€§çš„ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/rust-lang/rust/issues/104203">tracking issue</a>ã€‚</strong></p>
<p>åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“å€¼å°†åœ¨å†…å­˜ä¸­çš„ä½•å¤„ç»“æŸã€‚
åœ¨ç¼–è¯‘æ—¶å¯¹ä»å¼•ç”¨åˆ›å»ºçš„æŒ‡é’ˆè°ƒç”¨æ­¤å‡½æ•°å°†ä»…åœ¨ä¿è¯æŒ‡é’ˆå¯¹é½çš„æƒ…å†µä¸‹è¿”å› <code>true</code>ã€‚
è¿™æ„å‘³ç€å¦‚æœå°†æŒ‡é’ˆè½¬æ¢ä¸ºæ¯”å¼•ç”¨çš„åº•å±‚åˆ†é…å…·æœ‰æ›´ä¸¥æ ¼å¯¹é½çš„ç±»å‹ï¼Œåˆ™æŒ‡é’ˆæ°¸è¿œä¸ä¼šå¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span>data = AlignedI32(<span class="number">42</span>);
    <span class="kw">let </span>ptr = <span class="kw-2">&amp;</span>data <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32;
    <span class="macro">assert!</span>(ptr.is_aligned());

    <span class="comment">// åœ¨è¿è¡Œæ—¶ `ptr1` æˆ– `ptr2` å°†å¯¹é½ï¼Œä½†åœ¨ç¼–è¯‘æ—¶ä¸¤è€…éƒ½ä¸å¯¹é½ã€‚
    </span><span class="kw">let </span>ptr1 = ptr.cast::&lt;AlignedI64&gt;();
    <span class="kw">let </span>ptr2 = ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;();
    <span class="macro">assert!</span>(!ptr1.is_aligned());
    <span class="macro">assert!</span>(!ptr2.is_aligned());
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0Aconst+_:+()+=+%7B%0A++++let+data+=+AlignedI32(42);%0A++++let+ptr+=+%26data+as+*const+AlignedI32;%0A++++assert!(ptr.is_aligned());%0A%0A++++//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6+%60ptr1%60+%E6%88%96+%60ptr2%60+%E5%B0%86%E5%AF%B9%E9%BD%90%EF%BC%8C%E4%BD%86%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%E4%B8%A4%E8%80%85%E9%83%BD%E4%B8%8D%E5%AF%B9%E9%BD%90%E3%80%82%0A++++let+ptr1+=+ptr.cast::%3CAlignedI64%3E();%0A++++let+ptr2+=+ptr.wrapping_add(1).cast::%3CAlignedI64%3E();%0A++++assert!(!ptr1.is_aligned());%0A++++assert!(!ptr2.is_aligned());%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>ç”±äºæ­¤è¡Œä¸ºï¼Œå³ä½¿ç¼–è¯‘æ—¶æŒ‡é’ˆæœªå¯¹é½ï¼Œæ´¾ç”Ÿè‡ªç¼–è¯‘æ—¶æŒ‡é’ˆçš„è¿è¡Œæ—¶æŒ‡é’ˆä¹Ÿå¯èƒ½å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œ`COMPTIME_PTR` å’Œ `COMPTIME_PTR + 1` éƒ½æ²¡æœ‰å¯¹é½ã€‚
</span><span class="kw">const </span>COMPTIME_PTR: <span class="kw-2">*const </span>AlignedI32 = <span class="kw-2">&amp;</span>AlignedI32(<span class="number">42</span>);
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.cast::&lt;AlignedI64&gt;().is_aligned());
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;().is_aligned());

<span class="comment">// åœ¨è¿è¡Œæ—¶ï¼Œ`runtime_ptr` æˆ– `runtime_ptr + 1` å¯¹é½ã€‚
</span><span class="kw">let </span>runtime_ptr = COMPTIME_PTR;
<span class="macro">assert_ne!</span>(
    runtime_ptr.cast::&lt;AlignedI64&gt;().is_aligned(),
    runtime_ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;().is_aligned(),
);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0A//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%60COMPTIME_PTR%60+%E5%92%8C+%60COMPTIME_PTR+%2B+1%60+%E9%83%BD%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E3%80%82%0Aconst+COMPTIME_PTR:+*const+AlignedI32+=+%26AlignedI32(42);%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.cast::%3CAlignedI64%3E().is_aligned());%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.wrapping_add(1).cast::%3CAlignedI64%3E().is_aligned());%0A%0A//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%8C%60runtime_ptr%60+%E6%88%96+%60runtime_ptr+%2B+1%60+%E5%AF%B9%E9%BD%90%E3%80%82%0Alet+runtime_ptr+=+COMPTIME_PTR;%0Aassert_ne!(%0A++++runtime_ptr.cast::%3CAlignedI64%3E().is_aligned(),%0A++++runtime_ptr.wrapping_add(1).cast::%3CAlignedI64%3E().is_aligned(),%0A);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>å¦‚æœæŒ‡é’ˆæ˜¯ä»å›ºå®šåœ°å€åˆ›å»ºçš„ï¼Œåˆ™æ­¤å‡½æ•°åœ¨è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span>ptr = <span class="number">40 </span><span class="kw">as </span><span class="kw-2">*const </span>AlignedI32;
    <span class="macro">assert!</span>(ptr.is_aligned());

    <span class="comment">// å¯¹äºå…·æœ‰å·²çŸ¥åœ°å€çš„æŒ‡é’ˆï¼Œè¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶è¡Œä¸ºæ˜¯ç›¸åŒçš„ã€‚
    </span><span class="kw">let </span>ptr1 = ptr.cast::&lt;AlignedI64&gt;();
    <span class="kw">let </span>ptr2 = ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;();
    <span class="macro">assert!</span>(ptr1.is_aligned());
    <span class="macro">assert!</span>(!ptr2.is_aligned());
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0Aconst+_:+()+=+%7B%0A++++let+ptr+=+40+as+*const+AlignedI32;%0A++++assert!(ptr.is_aligned());%0A%0A++++//+%E5%AF%B9%E4%BA%8E%E5%85%B7%E6%9C%89%E5%B7%B2%E7%9F%A5%E5%9C%B0%E5%9D%80%E7%9A%84%E6%8C%87%E9%92%88%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E5%92%8C%E7%BC%96%E8%AF%91%E6%97%B6%E8%A1%8C%E4%B8%BA%E6%98%AF%E7%9B%B8%E5%90%8C%E7%9A%84%E3%80%82%0A++++let+ptr1+=+ptr.cast::%3CAlignedI64%3E();%0A++++let+ptr2+=+ptr.wrapping_add(1).cast::%3CAlignedI64%3E();%0A++++assert!(ptr1.is_aligned());%0A++++assert!(!ptr2.is_aligned());%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_aligned_to" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/104203" title="Tracking issue for const_pointer_is_aligned">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/const_ptr.rs.html#1572">source</a></span><h4 class="code-header">pub fn <a href="#method.is_aligned_to" class="fn">is_aligned_to</a>(self, align: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_is_aligned</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96284">#96284</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æŒ‡é’ˆæ˜¯å¦ä¸ <code>align</code> å¯¹é½ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…è€ƒè™‘æ•°æ®æŒ‡é’ˆï¼Œè€Œå¿½ç•¥å…ƒæ•°æ®ã€‚</p>
<h5 id="panics-3"><a href="#panics-3">Panics</a></h5>
<p>å¦‚æœ <code>align</code> ä¸æ˜¯ 2 çš„å¹‚ (åŒ…æ‹¬ 0)ï¼Œå‡½æ•°ä¼šå‡ºç° panicã€‚</p>
<h5 id="examples-20"><a href="#examples-20">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(pointer_byte_offsets)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">let </span>data = AlignedI32(<span class="number">42</span>);
<span class="kw">let </span>ptr = <span class="kw-2">&amp;</span>data <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32;

<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));

<span class="macro">assert!</span>(ptr.wrapping_byte_add(<span class="number">2</span>).is_aligned_to(<span class="number">2</span>));
<span class="macro">assert!</span>(!ptr.wrapping_byte_add(<span class="number">2</span>).is_aligned_to(<span class="number">4</span>));

<span class="macro">assert_ne!</span>(ptr.is_aligned_to(<span class="number">8</span>), ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(pointer_byte_offsets)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Alet+data+=+AlignedI32(42);%0Alet+ptr+=+%26data+as+*const+AlignedI32;%0A%0Aassert!(ptr.is_aligned_to(1));%0Aassert!(ptr.is_aligned_to(2));%0Aassert!(ptr.is_aligned_to(4));%0A%0Aassert!(ptr.wrapping_byte_add(2).is_aligned_to(2));%0Aassert!(!ptr.wrapping_byte_add(2).is_aligned_to(4));%0A%0Aassert_ne!(ptr.is_aligned_to(8),+ptr.wrapping_add(1).is_aligned_to(8));%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="åœ¨ç¼–è¯‘æ—¶-1"><a href="#åœ¨ç¼–è¯‘æ—¶-1">åœ¨ç¼–è¯‘æ—¶</a></h5>
<p><strong>Note: ç¼–è¯‘æ—¶çš„å¯¹é½æ˜¯å®éªŒæ€§çš„ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/rust-lang/rust/issues/104203">tracking issue</a>ã€‚</strong></p>
<p>åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“å€¼å°†åœ¨å†…å­˜ä¸­çš„ä½•å¤„ç»“æŸã€‚
åœ¨ç¼–è¯‘æ—¶å¯¹ä»å¼•ç”¨åˆ›å»ºçš„æŒ‡é’ˆè°ƒç”¨æ­¤å‡½æ•°å°†ä»…åœ¨ä¿è¯æŒ‡é’ˆå¯¹é½çš„æƒ…å†µä¸‹è¿”å› <code>true</code>ã€‚
è¿™æ„å‘³ç€æŒ‡é’ˆä¸èƒ½æ¯”å¼•ç”¨çš„åº•å±‚åˆ†é…æ›´ä¸¥æ ¼åœ°å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span>data = AlignedI32(<span class="number">42</span>);
    <span class="kw">let </span>ptr = <span class="kw-2">&amp;</span>data <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32;

    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));

    <span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œæˆ‘ä»¬ç¡®å®šæŒ‡é’ˆæ²¡æœ‰å¯¹é½åˆ° 8.
    </span><span class="macro">assert!</span>(!ptr.is_aligned_to(<span class="number">8</span>));
    <span class="macro">assert!</span>(!ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Aconst+_:+()+=+%7B%0A++++let+data+=+AlignedI32(42);%0A++++let+ptr+=+%26data+as+*const+AlignedI32;%0A%0A++++assert!(ptr.is_aligned_to(1));%0A++++assert!(ptr.is_aligned_to(2));%0A++++assert!(ptr.is_aligned_to(4));%0A%0A++++//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E7%A1%AE%E5%AE%9A%E6%8C%87%E9%92%88%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E5%88%B0+8.%0A++++assert!(!ptr.is_aligned_to(8));%0A++++assert!(!ptr.wrapping_add(1).is_aligned_to(8));%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>ç”±äºæ­¤è¡Œä¸ºï¼Œå³ä½¿ç¼–è¯‘æ—¶æŒ‡é’ˆæœªå¯¹é½ï¼Œæ´¾ç”Ÿè‡ªç¼–è¯‘æ—¶æŒ‡é’ˆçš„è¿è¡Œæ—¶æŒ‡é’ˆä¹Ÿå¯èƒ½å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œ`COMPTIME_PTR` å’Œ `COMPTIME_PTR + 1` éƒ½æ²¡æœ‰å¯¹é½ã€‚
</span><span class="kw">const </span>COMPTIME_PTR: <span class="kw-2">*const </span>AlignedI32 = <span class="kw-2">&amp;</span>AlignedI32(<span class="number">42</span>);
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.is_aligned_to(<span class="number">8</span>));
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));

<span class="comment">// åœ¨è¿è¡Œæ—¶ï¼Œ`runtime_ptr` æˆ– `runtime_ptr + 1` å¯¹é½ã€‚
</span><span class="kw">let </span>runtime_ptr = COMPTIME_PTR;
<span class="macro">assert_ne!</span>(
    runtime_ptr.is_aligned_to(<span class="number">8</span>),
    runtime_ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>),
);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0A//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%60COMPTIME_PTR%60+%E5%92%8C+%60COMPTIME_PTR+%2B+1%60+%E9%83%BD%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E3%80%82%0Aconst+COMPTIME_PTR:+*const+AlignedI32+=+%26AlignedI32(42);%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.is_aligned_to(8));%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.wrapping_add(1).is_aligned_to(8));%0A%0A//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%8C%60runtime_ptr%60+%E6%88%96+%60runtime_ptr+%2B+1%60+%E5%AF%B9%E9%BD%90%E3%80%82%0Alet+runtime_ptr+=+COMPTIME_PTR;%0Aassert_ne!(%0A++++runtime_ptr.is_aligned_to(8),%0A++++runtime_ptr.wrapping_add(1).is_aligned_to(8),%0A);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>å¦‚æœæŒ‡é’ˆæ˜¯ä»å›ºå®šåœ°å€åˆ›å»ºçš„ï¼Œåˆ™æ­¤å‡½æ•°åœ¨è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="kw">const _</span>: () = {
    <span class="kw">let </span>ptr = <span class="number">40 </span><span class="kw">as </span><span class="kw-2">*const </span>u8;
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">8</span>));
    <span class="macro">assert!</span>(!ptr.is_aligned_to(<span class="number">16</span>));
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0Afn+main()+%7B%0Aconst+_:+()+=+%7B%0A++++let+ptr+=+40+as+*const+u8;%0A++++assert!(ptr.is_aligned_to(1));%0A++++assert!(ptr.is_aligned_to(2));%0A++++assert!(ptr.is_aligned_to(4));%0A++++assert!(ptr.is_aligned_to(8));%0A++++assert!(!ptr.is_aligned_to(16));%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#6">source</a><a href="#impl-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.is_null-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/74939" title="Tracking issue for const_ptr_is_null">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#33">source</a></span><h4 class="code-header">pub fn <a href="#method.is_null-1" class="fn">is_null</a>(self) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>true</code>ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæœªå®šä¹‰å¤§å°çš„ç±»å‹å…·æœ‰è®¸å¤šå¯èƒ½çš„ç©ºæŒ‡é’ˆï¼Œå› ä¸ºä»…è€ƒè™‘åŸå§‹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¸è€ƒè™‘å…¶é•¿åº¦ï¼Œvtable ç­‰ã€‚
å› æ­¤ï¼Œä¸¤ä¸ªä¸ºç©ºçš„æŒ‡é’ˆå¯èƒ½ä»ä¸èƒ½ç›¸äº’æ¯”è¾ƒç›¸ç­‰ã€‚</p>
<h6 id="å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º-1"><a href="#å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º-1">å¸¸é‡è¯„ä¼°æœŸé—´çš„è¡Œä¸º</a></h6>
<p>åœ¨ const è¯„ä¼°æœŸé—´ä½¿ç”¨æ­¤å‡½æ•°æ—¶ï¼Œå¯¹äºåœ¨è¿è¡Œæ—¶ç»“æœä¸ºç©ºçš„æŒ‡é’ˆï¼Œå®ƒå¯èƒ½è¿”å› <code>false</code>ã€‚
å…·ä½“æ¥è¯´ï¼Œå½“æŒ‡å‘æŸä¸ªå†…å­˜çš„æŒ‡é’ˆè¶…å‡ºå…¶èŒƒå›´çš„åç§»é‡ (ä½¿ç»“æœæŒ‡é’ˆä¸ºç©º) æ—¶ï¼Œå‡½æ•°ä»å°†è¿”å› <code>false</code>ã€‚</p>
<p>CTFE æ— æ³•çŸ¥é“è¯¥å†…å­˜çš„ç»å¯¹ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ç¡®å®šæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºã€‚</p>
<h5 id="examples-21"><a href="#examples-21">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u32 = s.as_mut_ptr();
<span class="macro">assert!</span>(!ptr.is_null());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+mut+s+=+%5B1,+2,+3%5D;%0Alet+ptr:+*mut+u32+=+s.as_mut_ptr();%0Aassert!(!ptr.is_null());%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cast-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.38.0, const since 1.38.0">1.38.0 (const: 1.38.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#57">source</a></span><h4 class="code-header">pub const fn <a href="#method.cast-1" class="fn">cast</a>&lt;U&gt;(self) -&gt; <a class="primitive" href="primitive.pointer.html">*mut U</a></h4></section></summary><div class="docblock"><p>å¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹çš„æŒ‡é’ˆã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_metadata_of-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/75091" title="Tracking issue for set_ptr_value">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#93-95">source</a></span><h4 class="code-header">pub fn <a href="#method.with_metadata_of-1" class="fn">with_metadata_of</a>&lt;U&gt;(self, meta: <a class="primitive" href="primitive.pointer.html">*const U</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut U</a><span class="where fmt-newline">where
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>set_ptr_value</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75091">#75091</a>)</span></div></span></summary><div class="docblock"><p>åœ¨å¦ä¸€ç§ç±»å‹çš„æ–°æŒ‡é’ˆä¸­ä½¿ç”¨æŒ‡é’ˆå€¼ã€‚</p>
<p>å¦‚æœ <code>meta</code> æ˜¯æŒ‡å‘æœªå®šä¹‰å¤§å°ç±»å‹çš„ (fat) æŒ‡é’ˆï¼Œæ­¤æ“ä½œå°†å¿½ç•¥æŒ‡é’ˆéƒ¨åˆ†ï¼Œè€Œå¯¹äºæŒ‡å‘å¤§å°ç±»å‹çš„ (thin) æŒ‡é’ˆï¼Œè¿™ä¸ç®€å•å¼ºåˆ¶è½¬æ¢å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚</p>
<p>ç”Ÿæˆçš„æŒ‡é’ˆå°†å…·æœ‰ <code>self</code> çš„æ¥æºï¼Œå³ï¼Œå¯¹äºèƒ–æŒ‡é’ˆï¼Œæ­¤æ“ä½œåœ¨è¯­ä¹‰ä¸Šä¸åˆ›å»ºæ•°æ®æŒ‡é’ˆå€¼ä¸º <code>self</code> ä½†å…ƒæ•°æ®ä¸º <code>meta</code> çš„æ–°èƒ–æŒ‡é’ˆç›¸åŒã€‚</p>
<h5 id="examples-22"><a href="#examples-22">Examples</a></h5>
<p>æ­¤å‡½æ•°ä¸»è¦ç”¨äºå…è®¸å¯¹æ½œåœ¨çš„èƒ–æŒ‡é’ˆè¿›è¡ŒæŒ‰å­—èŠ‚æŒ‡é’ˆç®—æœ¯è¿ç®—ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(set_ptr_value)]
</span><span class="kw">let </span><span class="kw-2">mut </span>arr: [i32; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr = arr.as_mut_ptr() <span class="kw">as </span><span class="kw-2">*mut </span><span class="kw">dyn </span>Debug;
<span class="kw">let </span>thin = ptr <span class="kw">as </span><span class="kw-2">*mut </span>u8;
<span class="kw">unsafe </span>{
    ptr = thin.add(<span class="number">8</span>).with_metadata_of(ptr);
    <span class="macro">println!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="kw-2">&amp;*</span>ptr); <span class="comment">// å°†æ‰“å° &quot;3&quot;
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(set_ptr_value)%5D%0Afn+main()+%7B%0Ause+core::fmt::Debug;%0Alet+mut+arr:+%5Bi32;+3%5D+=+%5B1,+2,+3%5D;%0Alet+mut+ptr+=+arr.as_mut_ptr()+as+*mut+dyn+Debug;%0Alet+thin+=+ptr+as+*mut+u8;%0Aunsafe+%7B%0A++++ptr+=+thin.add(8).with_metadata_of(ptr);%0Aassert_eq!(*(ptr+as+*mut+i32),+3);%0A++++println!(%22%7B:?%7D%22,+%26*ptr);+//+%E5%B0%86%E6%89%93%E5%8D%B0+%223%22%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cast_const" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.65.0, const since 1.65.0">1.65.0 (const: 1.65.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#113">source</a></span><h4 class="code-header">pub const fn <a href="#method.cast_const" class="fn">cast_const</a>(self) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>æ›´æ”¹å¸¸é‡è€Œä¸æ›´æ”¹ç±»å‹ã€‚</p>
<p>è¿™æ¯” <code>as</code> å®‰å…¨ä¸€ç‚¹ï¼Œå› ä¸ºå¦‚æœé‡æ„ä»£ç ï¼Œå®ƒä¸ä¼šé»˜é»˜åœ°æ”¹å˜ç±»å‹ã€‚</p>
<p>è™½ç„¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚ (<code>*mut T</code> å¼ºåˆ¶è½¬æ¢ä¸º <code>*const T</code>)ï¼Œä½†è¿™æ˜¯ä¸ºäº†ä¸ <code>*const T</code> ä¸Šçš„ <a href="#method.cast_mut"><code>cast_mut</code></a> å¯¹ç§°è€Œæä¾›çš„ï¼Œå¦‚æœä½¿ç”¨å®ƒæ¥ä»£æ›¿éšå¼å¼ºåˆ¶ï¼Œåˆ™å¯èƒ½å…·æœ‰æ–‡æ¡£å€¼ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_bits-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#146-148">source</a><h4 class="code-header">pub fn <a href="#method.to_bits-1" class="fn">to_bits</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">ğŸ‘</span><span>Deprecated since 1.67.0: replaced by the <code>expose_addr</code> method, or update your code to follow the strict provenance rules using its APIs</span></div><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_to_from_bits</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/91126">#91126</a>)</span></div></span></summary><div class="docblock"><p>å°†æŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ä¸ºåŸå§‹ä½ã€‚</p>
<p>è¿™ç­‰æ•ˆäº <code>as usize</code>ï¼Œä½†æ›´å…·ä½“ä»¥å¢å¼ºå¯è¯»æ€§ã€‚
ç›¸åçš„æ–¹æ³•æ˜¯ <a href="#method.from_bits-1"><code>from_bits</code></a>ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œ<code>*p as usize</code> å’Œ <code>p as usize</code> éƒ½ä¼šç¼–è¯‘æŒ‡å‘æ•°å­—ç±»å‹çš„æŒ‡é’ˆï¼Œä½†åšçš„äº‹æƒ…å´æˆªç„¶ä¸åŒï¼Œå› æ­¤ä½¿ç”¨å®ƒæœ‰åŠ©äºå¼ºè°ƒè¯»å–ä½æ˜¯æœ‰æ„çš„ã€‚</p>
<h5 id="examples-23"><a href="#examples-23">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_to_from_bits)]
</span><span class="kw">let </span><span class="kw-2">mut </span>array = [<span class="number">13</span>, <span class="number">42</span>];
<span class="kw">let </span><span class="kw-2">mut </span>it = array.iter_mut();
<span class="kw">let </span>p0: <span class="kw-2">*mut </span>i32 = it.next().unwrap();
<span class="macro">assert_eq!</span>(&lt;<span class="kw-2">*mut </span><span class="kw">_</span>&gt;::from_bits(p0.to_bits()), p0);
<span class="kw">let </span>p1: <span class="kw-2">*mut </span>i32 = it.next().unwrap();
<span class="macro">assert_eq!</span>(p1.to_bits() - p0.to_bits(), <span class="number">4</span>);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_to_from_bits)%5D%0Afn+main()+%7B%0A%23%5Bcfg(not(miri))%5D+%7B+//+doctest+%E4%B8%8D%E9%80%82%E7%94%A8%E4%BA%8E%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%87%BA%E5%A4%84%0Alet+mut+array+=+%5B13,+42%5D;%0Alet+mut+it+=+array.iter_mut();%0Alet+p0:+*mut+i32+=+it.next().unwrap();%0Aassert_eq!(%3C*mut+_%3E::from_bits(p0.to_bits()),+p0);%0Alet+p1:+*mut+i32+=+it.next().unwrap();%0Aassert_eq!(p1.to_bits()+-+p0.to_bits(),+4);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_bits-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#176-178">source</a><h4 class="code-header">pub fn <a href="#method.from_bits-1" class="fn">from_bits</a>(bits: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">ğŸ‘</span><span>Deprecated since 1.67.0: replaced by the <code>ptr::from_exposed_addr_mut</code> function, or update your code to follow the strict provenance rules using its APIs</span></div><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_to_from_bits</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/91126">#91126</a>)</span></div></span></summary><div class="docblock"><p>ä»å…¶åŸå§‹ä½åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆã€‚</p>
<p>è¿™ç­‰æ•ˆäº <code>as *mut T</code>ï¼Œä½†æ›´å…·ä½“ä»¥å¢å¼ºå¯è¯»æ€§ã€‚
ç›¸åçš„æ–¹æ³•æ˜¯ <a href="#method.to_bits-1"><code>to_bits</code></a>ã€‚</p>
<h5 id="examples-24"><a href="#examples-24">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_to_from_bits)]
</span><span class="kw">use </span>std::ptr::NonNull;
<span class="kw">let </span>dangling: <span class="kw-2">*mut </span>u8 = NonNull::dangling().as_ptr();
<span class="macro">assert_eq!</span>(&lt;<span class="kw-2">*mut </span>u8&gt;::from_bits(<span class="number">1</span>), dangling);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_to_from_bits)%5D%0Afn+main()+%7B%0A%23%5Bcfg(not(miri))%5D+%7B+//+doctest+%E4%B8%8D%E9%80%82%E7%94%A8%E4%BA%8E%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%87%BA%E5%A4%84%0Ause+std::ptr::NonNull;%0Alet+dangling:+*mut+u8+=+NonNull::dangling().as_ptr();%0Aassert_eq!(%3C*mut+u8%3E::from_bits(1),+dangling);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.addr-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#209">source</a><h4 class="code-header">pub fn <a href="#method.addr-1" class="fn">addr</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>è·å–æŒ‡é’ˆçš„ â€œaddressâ€ éƒ¨åˆ†ã€‚</p>
<p>è¿™ç±»ä¼¼äº <code>self as usize</code>ï¼Œå®ƒåœ¨è¯­ä¹‰ä¸Šä¸¢å¼ƒäº†<em>provenance</em> å’Œ<em>address-space</em> ä¿¡æ¯ã€‚
ä½†æ˜¯ï¼Œä¸ <code>self as usize</code> ä¸åŒï¼Œå°†è¿”å›çš„åœ°å€è½¬æ¢å›æŒ‡é’ˆä¼šäº§ç”Ÿ <a href="ptr/fn.invalid.html" title="fn std::ptr::invalid"><code>invalid</code></a>ï¼Œè¿™å¯¹äºè§£å¼•ç”¨æ¥è¯´æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚
è¦æ­£ç¡®æ¢å¤ä¸¢å¤±çš„ä¿¡æ¯å¹¶è·å¾—å¯è§£å¼•ç”¨çš„æŒ‡é’ˆï¼Œè¯·ä½¿ç”¨ <a href="primitive.pointer.html#method.with_addr" title="method pointer::with_addr"><code>with_addr</code></a> æˆ– <a href="primitive.pointer.html#method.map_addr" title="method pointer::map_addr"><code>map_addr</code></a>ã€‚</p>
<p>å¦‚æœç”±äºæ— æ³•ä¿ç•™å…·æœ‰æ‰€éœ€å‡ºå¤„çš„æŒ‡é’ˆè€Œæ— æ³•ä½¿ç”¨è¿™äº› APIï¼Œè¯·æ”¹ç”¨ <a href="primitive.pointer.html#method.expose_addr" title="method pointer::expose_addr"><code>expose_addr</code></a> å’Œ <a href="ptr/fn.from_exposed_addr_mut.html" title="fn std::ptr::from_exposed_addr_mut"><code>from_exposed_addr_mut</code></a>ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œè¿™ä¼šé™ä½æ‚¨çš„ä»£ç çš„å¯ç§»æ¤æ€§ï¼Œå¹¶ä¸”ä¸å¤ªé€‚åˆç”¨äºæ£€æŸ¥æ˜¯å¦ç¬¦åˆ Rust å†…å­˜æ¨¡å‹çš„å·¥å…·ã€‚</p>
<p>åœ¨å¤§å¤šæ•°å¹³å°ä¸Šï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒå­—èŠ‚çš„å€¼ï¼Œå› ä¸ºæ‰€æœ‰å­—èŠ‚éƒ½ä¸“ç”¨äºæè¿°åœ°å€ã€‚
éœ€è¦åœ¨æŒ‡é’ˆä¸­å­˜å‚¨é™„åŠ ä¿¡æ¯çš„å¹³å°å¯ä»¥æ‰§è¡Œè¡¨ç¤ºçš„æ”¹å˜ï¼Œä»¥äº§ç”Ÿä»…åŒ…å«æŒ‡é’ˆçš„åœ°å€éƒ¨åˆ†çš„å€¼ã€‚
è¿™æ„å‘³ç€ä»€ä¹ˆå–å†³äºå¹³å°æ¥å®šä¹‰ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯èƒ½ä¼šåœ¨ future ä¸­å‘ç”Ÿå˜åŒ– (åŒ…æ‹¬å¯èƒ½å‰Šå¼±è¿™ä¸€ç‚¹ï¼Œä½¿å…¶å®Œå…¨ç­‰åŒäº <code>self as usize</code>)ã€‚
æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ [<a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.expose_addr-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#243">source</a><h4 class="code-header">pub fn <a href="#method.expose_addr-1" class="fn">expose_addr</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>è·å–æŒ‡é’ˆçš„ â€œaddressâ€ éƒ¨åˆ†ï¼Œå¹¶æš´éœ² â€œprovenanceâ€ éƒ¨åˆ†ï¼Œä»¥ä¾¿å°†æ¥åœ¨ <a href="ptr/fn.from_exposed_addr.html" title="fn std::ptr::from_exposed_addr"><code>from_exposed_addr</code></a> ä¸­ä½¿ç”¨ã€‚</p>
<p>è¿™ç›¸å½“äº <code>self as usize</code>ï¼Œå®ƒåœ¨è¯­ä¹‰ä¸Šä¸¢å¼ƒäº† <em>provenance</em> å’Œ <em>address-space</em> ä¿¡æ¯ã€‚
æ­¤å¤–ï¼Œè¿™ (å¦‚ <code>as</code> æ¼”å‘˜è¡¨) å…·æœ‰å°†å‡ºå¤„æ ‡è®°ä¸º â€˜exposedâ€™ çš„éšå¼å‰¯ä½œç”¨ï¼Œå› æ­¤åœ¨æ”¯æŒå®ƒçš„å¹³å°ä¸Šï¼Œæ‚¨å¯ä»¥ç¨åè°ƒç”¨ <a href="ptr/fn.from_exposed_addr_mut.html" title="fn std::ptr::from_exposed_addr_mut"><code>from_exposed_addr_mut</code></a> æ¥é‡æ„åŸå§‹æŒ‡é’ˆï¼ŒåŒ…æ‹¬å…¶å‡ºå¤„ã€‚</p>
<p>(å¦‚æœéœ€è¦ï¼Œé‡å»ºåœ°å€ç©ºé—´ä¿¡æ¯æ˜¯æ‚¨çš„è´£ä»»ã€‚)</p>
<p>ä½¿ç”¨è¿™ç§æ–¹æ³•æ„å‘³ç€ä»£ç æ²¡æœ‰éµå¾ªä¸¥æ ¼çš„å‡ºå¤„è§„åˆ™ã€‚
æ”¯æŒ <a href="ptr/fn.from_exposed_addr_mut.html" title="fn std::ptr::from_exposed_addr_mut"><code>from_exposed_addr_mut</code></a> ä¼šä½¿è§„èŒƒå’Œæ¨ç†å¤æ‚åŒ–ï¼Œå¹¶ä¸”å¯èƒ½ä¸å—å¸®åŠ©æ‚¨ä¸ Rust å†…å­˜æ¨¡å‹ä¿æŒä¸€è‡´çš„å·¥å…·çš„æ”¯æŒï¼Œå› æ­¤å»ºè®®å°½å¯èƒ½ä½¿ç”¨ <a href="primitive.pointer.html#method.addr" title="method pointer::addr"><code>addr</code></a>ã€‚</p>
<p>åœ¨å¤§å¤šæ•°å¹³å°ä¸Šï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªä¸åŸå§‹æŒ‡é’ˆå…·æœ‰ç›¸åŒå­—èŠ‚çš„å€¼ï¼Œå› ä¸ºæ‰€æœ‰å­—èŠ‚éƒ½ä¸“ç”¨äºæè¿°åœ°å€ã€‚
éœ€è¦åœ¨æŒ‡é’ˆä¸­å­˜å‚¨é™„åŠ ä¿¡æ¯çš„å¹³å°å¯èƒ½ä¸æ”¯æŒæ­¤æ“ä½œï¼Œå› ä¸º <a href="ptr/fn.from_exposed_addr_mut.html" title="fn std::ptr::from_exposed_addr_mut"><code>from_exposed_addr_mut</code></a> å·¥ä½œæ‰€éœ€çš„ â€˜exposeâ€™ å‰¯ä½œç”¨é€šå¸¸ä¸å¯ç”¨ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_addr-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#263">source</a><h4 class="code-header">pub fn <a href="#method.with_addr-1" class="fn">with_addr</a>(self, addr: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç»™å®šåœ°å€åˆ›å»ºä¸€ä¸ªæ–°æŒ‡é’ˆã€‚</p>
<p>è¿™æ‰§è¡Œä¸ <code>addr as ptr</code> å¼ºåˆ¶è½¬æ¢ç›¸åŒçš„æ“ä½œï¼Œä½†å°† <code>self</code> çš„ <em>address-space</em> å’Œ <em>provenance</em> å¤åˆ¶åˆ°æ–°æŒ‡é’ˆã€‚
è¿™ä½¿æˆ‘ä»¬èƒ½å¤ŸåŠ¨æ€åœ°ä¿å­˜å’Œä¼ æ’­è¿™äº›é‡è¦ä¿¡æ¯ï¼Œè€Œè¿™åœ¨å…¶ä»–æƒ…å†µä¸‹ä½¿ç”¨ä¸€å…ƒå¼ºåˆ¶è½¬æ¢æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>è¿™ç›¸å½“äºä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_offset" title="method pointer::wrapping_offset"><code>wrapping_offset</code></a> å°† <code>self</code> åç§»åˆ°ç»™å®šåœ°å€ï¼Œå› æ­¤å…·æœ‰æ‰€æœ‰ç›¸åŒçš„åŠŸèƒ½å’Œé™åˆ¶ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.map_addr-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#286">source</a><h4 class="code-header">pub fn <a href="#method.map_addr-1" class="fn">map_addr</a>(self, f: impl <a class="trait" href="ops/trait.FnOnce.html" title="trait std::ops::FnOnce">FnOnce</a>(<a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>strict_provenance</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95228">#95228</a>)</span></div></span></summary><div class="docblock"><p>é€šè¿‡å°† <code>self</code> çš„åœ°å€æ˜ å°„åˆ°æ–°åœ°å€æ¥åˆ›å»ºæ–°æŒ‡é’ˆã€‚</p>
<p>è¿™å¯¹ <a href="primitive.pointer.html#method.with_addr" title="method pointer::with_addr"><code>with_addr</code></a> æ¥è¯´æ˜¯ä¸€ç§æ–¹ä¾¿ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>æ­¤ API åŠå…¶å£°æ˜çš„è¯­ä¹‰æ˜¯ Strict Provenance å®éªŒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="ptr/index.html" title="mod std::ptr">æ¨¡å—æ–‡æ¡£</a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.to_raw_parts-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/81513" title="Tracking issue for ptr_metadata">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#296">source</a></span><h4 class="code-header">pub fn <a href="#method.to_raw_parts-1" class="fn">to_raw_parts</a>(self) -&gt; (<a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.unit.html">()</a>, &lt;T as <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&gt;::<a class="associatedtype" href="ptr/trait.Pointee.html#associatedtype.Metadata" title="type std::ptr::Pointee::Metadata">Metadata</a>)</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_metadata</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/81513">#81513</a>)</span></div></span></summary><div class="docblock"><p>å°†æŒ‡é’ˆ (å¯èƒ½æ˜¯å®½æŒ‡é’ˆ) åˆ†è§£ä¸ºå…¶åœ°å€å’Œå…ƒæ•°æ®ç»„ä»¶ã€‚</p>
<p>ä»¥åå¯ä»¥ä½¿ç”¨ <a href="ptr/fn.from_raw_parts_mut.html" title="fn std::ptr::from_raw_parts_mut"><code>from_raw_parts_mut</code></a> é‡å»ºæŒ‡é’ˆã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_ref-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0, const unstable">1.9.0 (const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#360">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_ref-1" class="fn">as_ref</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.reference.html">&amp;'a T</a>&gt;</h4></section></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å…±äº«å¼•ç”¨ã€‚å¦‚æœè¯¥å€¼å¯èƒ½æœªåˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»æ”¹ç”¨ <a href="#method.as_uninit_ref-1"><code>as_uninit_ref</code></a>ã€‚</p>
<p>å¯¹äºå¯å˜çš„å¯¹åº”ç‰©ï¼Œè¯·å‚è§ <a href="#method.as_mut"><code>as_mut</code></a>ã€‚</p>
<h5 id="safety-11"><a href="#safety-11">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æŒ‡é’ˆå¿…é¡»æŒ‡å‘ <code>T</code> çš„åˆå§‹åŒ–å®ä¾‹ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼
(å…³äºåˆå§‹åŒ–çš„éƒ¨åˆ†å°šæœªå®Œå…¨å†³å®šï¼Œä½†æ˜¯ç›´åˆ°ç¡®å®šä¹‹å‰ï¼Œå”¯ä¸€å®‰å…¨çš„æ–¹æ³•æ˜¯ç¡®ä¿å®ƒä»¬ç¡®å®è¢«åˆå§‹åŒ–ã€‚)</p>
<h5 id="examples-25"><a href="#examples-25">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u8 = <span class="kw-2">&amp;mut </span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*mut </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">if let </span><span class="prelude-val">Some</span>(val_back) = ptr.as_ref() {
        <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {val_back}!&quot;</span>);
    }
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr:+*mut+u8+=+%26mut+10u8+as+*mut+u8;%0A%0Aunsafe+%7B%0A++++if+let+Some(val_back)+=+ptr.as_ref()+%7B%0A++++++++println!(%22We+got+back+the+value:+%7Bval_back%7D!%22);%0A++++%7D%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
<h5 id="ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬-1"><a href="#ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬-1">ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬</a></h5>
<p>å¦‚æœç¡®å®šæŒ‡é’ˆæ°¸è¿œä¸ä¼šä¸ºç©ºï¼Œå¹¶ä¸”æ­£åœ¨å¯»æ‰¾æŸç§è¿”å› <code>&amp;T</code> è€Œä¸æ˜¯ <code>Option&lt;&amp;T&gt;</code> çš„ <code>as_ref_unchecked</code>ï¼Œè¯·çŸ¥é“æ‚¨å¯ä»¥ç›´æ¥å¼•ç”¨è¯¥æŒ‡é’ˆã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u8 = <span class="kw-2">&amp;mut </span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*mut </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">let </span>val_back = <span class="kw-2">&amp;*</span>ptr;
    <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {val_back}!&quot;</span>);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr:+*mut+u8+=+%26mut+10u8+as+*mut+u8;%0A%0Aunsafe+%7B%0A++++let+val_back+=+%26*ptr;%0A++++println!(%22We+got+back+the+value:+%7Bval_back%7D!%22);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_ref-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#409-411">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_ref-1" class="fn">as_uninit_ref</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a <a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å…±äº«å¼•ç”¨ã€‚
ä¸ <a href="#method.as_ref-1"><code>as_ref</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºå¯å˜çš„å¯¹åº”ç‰©ï¼Œè¯·å‚è§ <a href="#method.as_uninit_mut"><code>as_uninit_mut</code></a>ã€‚</p>
<h5 id="safety-12"><a href="#safety-12">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
<h5 id="examples-26"><a href="#examples-26">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_as_uninit)]

</span><span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u8 = <span class="kw-2">&amp;mut </span><span class="number">10u8 </span><span class="kw">as </span><span class="kw-2">*mut </span>u8;

<span class="kw">unsafe </span>{
    <span class="kw">if let </span><span class="prelude-val">Some</span>(val_back) = ptr.as_uninit_ref() {
        <span class="macro">println!</span>(<span class="string">&quot;We got back the value: {}!&quot;</span>, val_back.assume_init());
    }
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_as_uninit)%5D%0A%0Afn+main()+%7B%0Alet+ptr:+*mut+u8+=+%26mut+10u8+as+*mut+u8;%0A%0Aunsafe+%7B%0A++++if+let+Some(val_back)+=+ptr.as_uninit_ref()+%7B%0A++++++++println!(%22We+got+back+the+value:+%7B%7D!%22,+val_back.assume_init());%0A++++%7D%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.offset-1" class="method"><span class="rightside"><span class="since" title="const since 1.61.0">const: 1.61.0</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#472-474">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.offset-1" class="fn">offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-13"><a href="#safety-13">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šä½¿ <code>isize</code> æº¢å‡ºã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦æ€»å’Œ (ä»¥å­—èŠ‚ä¸ºå•ä½) å¿…é¡»é€‚åˆäº usizeã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_offset"><code>wrapping_offset</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-27"><a href="#examples-27">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u32 = s.as_mut_ptr();

<span class="kw">unsafe </span>{
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.offset(<span class="number">1</span>));
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.offset(<span class="number">2</span>));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+mut+s+=+%5B1,+2,+3%5D;%0Alet+ptr:+*mut+u32+=+s.as_mut_ptr();%0A%0Aunsafe+%7B%0A++++println!(%22%7B%7D%22,+*ptr.offset(1));%0A++++println!(%22%7B%7D%22,+*ptr.offset(2));%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_offset-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#507">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_offset-1" class="fn">byte_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚</p>
<p><code>count</code> ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.offset" title="method pointer::offset">offset</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_offset-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.16.0, const since 1.61.0">1.16.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#563-565">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_offset-1" class="fn">wrapping_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚
<code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-14"><a href="#safety-14">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_offset((y as isize) - (x as isize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.offset"><code>offset</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.offset"><code>offset</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_offset</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.offset"><code>offset</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_offset(o).wrapping_offset(o.wrapping_neg())</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-28"><a href="#examples-28">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´ ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span><span class="kw-2">mut </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*mut </span>u8 = data.as_mut_ptr();
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="kw">let </span>end_rounded_up = ptr.wrapping_offset(<span class="number">6</span>);

<span class="kw">while </span>ptr != end_rounded_up {
    <span class="kw">unsafe </span>{
        <span class="kw-2">*</span>ptr = <span class="number">0</span>;
    }
    ptr = ptr.wrapping_offset(step);
}
<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span>data, <span class="kw-2">&amp;</span>[<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+mut+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*mut+u8+=+data.as_mut_ptr();%0Alet+step+=+2;%0Alet+end_rounded_up+=+ptr.wrapping_offset(6);%0A%0Awhile+ptr+!=+end_rounded_up+%7B%0A++++unsafe+%7B%0A++++++++*ptr+=+0;%0A++++%7D%0A++++ptr+=+ptr.wrapping_offset(step);%0A%7D%0Aassert_eq!(%26data,+%26%5B0,+2,+0,+4,+0%5D);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_offset-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#585">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_offset-1" class="fn">wrapping_byte_offset</a>(self, count: <a class="primitive" href="primitive.isize.html">isize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚</p>
<p><code>count</code> ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_offset" title="method pointer::wrapping_offset">wrapping_offset</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.mask-1" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#626">source</a><h4 class="code-header">pub fn <a href="#method.mask-1" class="fn">mask</a>(self, mask: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_mask</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/98290">#98290</a>)</span></div></span></summary><div class="docblock"><p>æ ¹æ®æ©ç å±è”½æŒ‡é’ˆçš„ä½ã€‚</p>
<p>è¿™å¯¹ <code>ptr.map_addr(|a| a &amp; mask)</code> æ¥è¯´å¾ˆæ–¹ä¾¿ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
<h6 id="examples-29"><a href="#examples-29">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_mask, strict_provenance)]
</span><span class="kw">let </span><span class="kw-2">mut </span>v = <span class="number">17_u32</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u32 = <span class="kw-2">&amp;mut </span>v;

<span class="comment">// `u32` æ˜¯ 4 å­—èŠ‚å¯¹é½çš„ï¼Œè¿™æ„å‘³ç€ä½ 2 ä½æ€»æ˜¯ 0.
</span><span class="kw">let </span>tag_mask = <span class="number">0b11</span>;
<span class="kw">let </span>ptr_mask = !tag_mask;

<span class="comment">// æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›ä½ä½å­˜å‚¨ä¸€äº›ä¸œè¥¿
</span><span class="kw">let </span>tagged_ptr = ptr.map_addr(|a| a | <span class="number">0b10</span>);

<span class="comment">// å–å› &quot;tag&quot;
</span><span class="kw">let </span>tag = tagged_ptr.addr() &amp; tag_mask;
<span class="macro">assert_eq!</span>(tag, <span class="number">0b10</span>);

<span class="comment">// æ³¨æ„ `tagged_ptr` æ˜¯æœªå¯¹é½çš„ï¼Œå®ƒæ˜¯ UB è¯»å– from/write åˆ°å®ƒã€‚
// è¦è·å¾—åŸå§‹æŒ‡é’ˆ `mask` å¯ä»¥ä½¿ç”¨:
</span><span class="kw">let </span>masked_ptr = tagged_ptr.mask(ptr_mask);
<span class="macro">assert_eq!</span>(<span class="kw">unsafe </span>{ <span class="kw-2">*</span>masked_ptr }, <span class="number">17</span>);

<span class="kw">unsafe </span>{ <span class="kw-2">*</span>masked_ptr = <span class="number">0 </span>};
<span class="macro">assert_eq!</span>(v, <span class="number">0</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_mask,+strict_provenance)%5D%0Afn+main()+%7B%0Alet+mut+v+=+17_u32;%0Alet+ptr:+*mut+u32+=+%26mut+v;%0A%0A//+%60u32%60+%E6%98%AF+4+%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90%E7%9A%84%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E4%BD%8E+2+%E4%BD%8D%E6%80%BB%E6%98%AF+0.%0Alet+tag_mask+=+0b11;%0Alet+ptr_mask+=+!tag_mask;%0A%0A//+%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E4%BA%9B%E4%BD%8E%E4%BD%8D%E5%AD%98%E5%82%A8%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF%0Alet+tagged_ptr+=+ptr.map_addr(%7Ca%7C+a+%7C+0b10);%0A%0A//+%E5%8F%96%E5%9B%9E+%22tag%22%0Alet+tag+=+tagged_ptr.addr()+%26+tag_mask;%0Aassert_eq!(tag,+0b10);%0A%0A//+%E6%B3%A8%E6%84%8F+%60tagged_ptr%60+%E6%98%AF%E6%9C%AA%E5%AF%B9%E9%BD%90%E7%9A%84%EF%BC%8C%E5%AE%83%E6%98%AF+UB+%E8%AF%BB%E5%8F%96+from/write+%E5%88%B0%E5%AE%83%E3%80%82%0A//+%E8%A6%81%E8%8E%B7%E5%BE%97%E5%8E%9F%E5%A7%8B%E6%8C%87%E9%92%88+%60mask%60+%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8:%0Alet+masked_ptr+=+tagged_ptr.mask(ptr_mask);%0Aassert_eq!(unsafe+%7B+*masked_ptr+%7D,+17);%0A%0Aunsafe+%7B+*masked_ptr+=+0+%7D;%0Aassert_eq!(v,+0);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_mut" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0, const unstable">1.9.0 (const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#689">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_mut" class="fn">as_mut</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.reference.html">&amp;'a mut T</a>&gt;</h4></section></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸º nullï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å”¯ä¸€å¼•ç”¨ã€‚å¦‚æœè¯¥å€¼å¯èƒ½æœªåˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»æ”¹ç”¨ <a href="#method.as_uninit_mut"><code>as_uninit_mut</code></a>ã€‚</p>
<p>æœ‰å…³å…±äº«å‰¯æœ¬ï¼Œè¯·å‚è§ <a href="#method.as_ref-1"><code>as_ref</code></a>ã€‚</p>
<h5 id="safety-15"><a href="#safety-15">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æŒ‡é’ˆå¿…é¡»æŒ‡å‘ <code>T</code> çš„åˆå§‹åŒ–å®ä¾‹ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½é€šè¿‡ä»»ä½•å…¶ä»–æŒ‡é’ˆè®¿é—® (è¯»å–æˆ–å†™å…¥)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼
(å…³äºåˆå§‹åŒ–çš„éƒ¨åˆ†å°šæœªå®Œå…¨å†³å®šï¼Œä½†æ˜¯ç›´åˆ°ç¡®å®šä¹‹å‰ï¼Œå”¯ä¸€å®‰å…¨çš„æ–¹æ³•æ˜¯ç¡®ä¿å®ƒä»¬ç¡®å®è¢«åˆå§‹åŒ–ã€‚)</p>
<h5 id="examples-30"><a href="#examples-30">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u32 = s.as_mut_ptr();
<span class="kw">let </span>first_value = <span class="kw">unsafe </span>{ ptr.as_mut().unwrap() };
<span class="kw-2">*</span>first_value = <span class="number">4</span>;
<span class="macro">println!</span>(<span class="string">&quot;{s:?}&quot;</span>); <span class="comment">// å®ƒä¼šæ‰“å°: &quot;[4, 2, 3]&quot;ã€‚</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+mut+s+=+%5B1,+2,+3%5D;%0Alet+ptr:+*mut+u32+=+s.as_mut_ptr();%0Alet+first_value+=+unsafe+%7B+ptr.as_mut().unwrap()+%7D;%0A*first_value+=+4;%0Aassert_eq!(s,+%5B4,+2,+3%5D);%0Aprintln!(%22%7Bs:?%7D%22);+//+%E5%AE%83%E4%BC%9A%E6%89%93%E5%8D%B0:+%22%5B4,+2,+3%5D%22%E3%80%82%0A%7D&amp;edition=2021">Run</a></div>
<h5 id="ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬-2"><a href="#ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬-2">ç©ºæœªç»æ£€æŸ¥çš„ç‰ˆæœ¬</a></h5>
<p>å¦‚æœç¡®å®šæŒ‡é’ˆæ°¸è¿œä¸ä¼šä¸ºç©ºï¼Œå¹¶ä¸”æ­£åœ¨å¯»æ‰¾æŸç§è¿”å› <code>&amp;mut T</code> è€Œä¸æ˜¯ <code>Option&lt;&amp;mut T&gt;</code> çš„ <code>as_mut_unchecked</code>ï¼Œè¯·çŸ¥é“æ‚¨å¯ä»¥ç›´æ¥å¼•ç”¨è¯¥æŒ‡é’ˆã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>ptr: <span class="kw-2">*mut </span>u32 = s.as_mut_ptr();
<span class="kw">let </span>first_value = <span class="kw">unsafe </span>{ <span class="kw-2">&amp;mut *</span>ptr };
<span class="kw-2">*</span>first_value = <span class="number">4</span>;
<span class="macro">println!</span>(<span class="string">&quot;{s:?}&quot;</span>); <span class="comment">// å®ƒä¼šæ‰“å°: &quot;[4, 2, 3]&quot;ã€‚</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+mut+s+=+%5B1,+2,+3%5D;%0Alet+ptr:+*mut+u32+=+s.as_mut_ptr();%0Alet+first_value+=+unsafe+%7B+%26mut+*ptr+%7D;%0A*first_value+=+4;%0Aassert_eq!(s,+%5B4,+2,+3%5D);%0Aprintln!(%22%7Bs:?%7D%22);+//+%E5%AE%83%E4%BC%9A%E6%89%93%E5%8D%B0:+%22%5B4,+2,+3%5D%22%E3%80%82%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_mut" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#724-726">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_mut" class="fn">as_uninit_mut</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a mut <a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸º nullï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å› <code>Some</code> ä¸­åŒ…è£…çš„å€¼çš„å”¯ä¸€å¼•ç”¨ã€‚
ä¸ <a href="#method.as_mut"><code>as_mut</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<p>æœ‰å…³å…±äº«å‰¯æœ¬ï¼Œè¯·å‚è§ <a href="#method.as_uninit_ref-1"><code>as_uninit_ref</code></a>ã€‚</p>
<h5 id="safety-16"><a href="#safety-16">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ­£ç¡®å¯¹é½ã€‚</p>
</li>
<li>
<p>åœ¨ <a href="ptr/index.html#safety" title="mod std::ptr">æ¨¡å—çš„æ–‡æ¡£</a> ä¸­å®šä¹‰çš„å«ä¹‰ä¸Šï¼Œå®ƒå¿…é¡»æ˜¯ â€œdereferenceableâ€ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½é€šè¿‡ä»»ä½•å…¶ä»–æŒ‡é’ˆè®¿é—® (è¯»å–æˆ–å†™å…¥)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.guaranteed_eq-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/53020" title="Tracking issue for const_raw_ptr_comparison">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#753-755">source</a></span><h4 class="code-header">pub fn <a href="#method.guaranteed_eq-1" class="fn">guaranteed_eq</a>(self, other: <a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.bool.html">bool</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>const_raw_ptr_comparison</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/53020">#53020</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦ä¿è¯ç›¸ç­‰ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºç±»ä¼¼äº <code>Some(self == other)</code>ã€‚
ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œç¼–è¯‘æ—¶è¯„ä¼°)ï¼Œå¹¶ä¸æ€»æ˜¯å¯ä»¥ç¡®å®šä¸¤ä¸ªæŒ‡é’ˆçš„ç›¸ç­‰æ€§ï¼Œå› æ­¤è¯¥å‡½æ•°å¯èƒ½ä¼šè™šå‡åœ°è¿”å› <code>None</code> ä»¥è·å–ç¨åå®é™…ä¸Šè¯æ˜å…¶ç›¸ç­‰æ€§å·²çŸ¥çš„æŒ‡é’ˆã€‚</p>
<p>ä½†æ˜¯å½“å®ƒè¿”å› <code>Some</code> æ—¶ï¼Œå¯ä»¥ä¿è¯çŸ¥é“æŒ‡é’ˆçš„ç›¸ç­‰æ€§ã€‚</p>
<p>è¿”å›å€¼å¯èƒ½ä¼šä» <code>Some</code> æ›´æ”¹ä¸º <code>None</code>ï¼Œåä¹‹äº¦ç„¶ï¼Œå…·ä½“å–å†³äºç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸å®‰å…¨çš„ä»£ç ä¸èƒ½ä¾èµ–æ­¤å‡½æ•°çš„ç»“æœæ¥ä¿è¯å¯é æ€§ã€‚
å»ºè®®ä»…å°†æ­¤å‡½æ•°ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå…¶ä¸­æ­¤å‡½æ•°çš„è™šå‡ <code>None</code> è¿”å›å€¼ä¸ä¼šå½±å“ç»“æœï¼Œè€Œåªä¼šå½±å“æ€§èƒ½ã€‚
å°šæœªæ¢è®¨ä½¿ç”¨æ­¤æ–¹æ³•ä½¿è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ä»£ç è¡¨ç°ä¸åŒçš„åæœã€‚
ä¸åº”ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥å¼•å…¥è¿™ç§å·®å¼‚ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬å¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´å¥½çš„ç†è§£ä¹‹å‰ï¼Œä¹Ÿä¸åº”ä½¿å…¶ç¨³å®šã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.guaranteed_ne-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/53020" title="Tracking issue for const_raw_ptr_comparison">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#780-782">source</a></span><h4 class="code-header">pub fn <a href="#method.guaranteed_ne-1" class="fn">guaranteed_ne</a>(self, other: <a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="primitive" href="primitive.bool.html">bool</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>const_raw_ptr_comparison</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/53020">#53020</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æ˜¯å¦ä¿è¯ä¸¤ä¸ªæŒ‡é’ˆä¸ç›¸ç­‰ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºç±»ä¼¼äº <code>Some(self != other)</code>ã€‚
ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œç¼–è¯‘æ—¶æ±‚å€¼)ï¼Œå¹¶ä¸æ€»æ˜¯å¯ä»¥ç¡®å®šä¸¤ä¸ªæŒ‡é’ˆçš„ä¸ç­‰å¼ï¼Œå› æ­¤è¯¥å‡½æ•°å¯èƒ½ä¼šè™šå‡åœ°è¿”å› <code>None</code> ä»¥è·å–åæ¥å®é™…è¯æ˜å…¶ä¸ç­‰å¼çš„æŒ‡é’ˆã€‚</p>
<p>ä½†æ˜¯å½“å®ƒè¿”å› <code>Some</code> æ—¶ï¼ŒæŒ‡é’ˆçš„ä¸ç­‰å¼ä¿è¯æ˜¯å·²çŸ¥çš„ã€‚</p>
<p>è¿”å›å€¼å¯èƒ½ä¼šä» <code>Some</code> æ›´æ”¹ä¸º <code>None</code>ï¼Œåä¹‹äº¦ç„¶ï¼Œå…·ä½“å–å†³äºç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸å®‰å…¨çš„ä»£ç ä¸èƒ½ä¾èµ–æ­¤å‡½æ•°çš„ç»“æœæ¥ä¿è¯å¯é æ€§ã€‚
å»ºè®®ä»…å°†æ­¤å‡½æ•°ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå…¶ä¸­æ­¤å‡½æ•°çš„è™šå‡ <code>None</code> è¿”å›å€¼ä¸ä¼šå½±å“ç»“æœï¼Œè€Œåªä¼šå½±å“æ€§èƒ½ã€‚
å°šæœªæ¢è®¨ä½¿ç”¨æ­¤æ–¹æ³•ä½¿è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ä»£ç è¡¨ç°ä¸åŒçš„åæœã€‚
ä¸åº”ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥å¼•å…¥è¿™ç§å·®å¼‚ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬å¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´å¥½çš„ç†è§£ä¹‹å‰ï¼Œä¹Ÿä¸åº”ä½¿å…¶ç¨³å®šã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.offset_from-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.47.0, const since 1.65.0">1.47.0 (const: 1.65.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#872-874">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.offset_from-1" class="fn">offset_from</a>(self, origin: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.isize.html">isize</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ã€‚è¿”å›å€¼ä»¥ T ä¸ºå•ä½: ä»¥å­—èŠ‚ä¸ºå•ä½çš„è·ç¦»é™¤ä»¥ <code>mem::size_of::&lt;T&gt;()</code>ã€‚</p>
<p>è¯¥å‡½æ•°æ˜¯ <a href="#method.offset-1"><code>offset</code></a> çš„é€†å‡½æ•°ã€‚</p>
<h5 id="safety-17"><a href="#safety-17">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œå…¶ä»–æŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>ä¸¤ä¸ªæŒ‡é’ˆå¿…é¡»æ˜¯æŒ‡å‘åŒä¸€å¯¹è±¡çš„æŒ‡é’ˆçš„ *derivedã€‚
(è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚)</p>
</li>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦» (ä»¥å­—èŠ‚ä¸ºå•ä½) å¿…é¡»æ˜¯ <code>T</code> å¤§å°çš„ç²¾ç¡®å€æ•°ã€‚</p>
</li>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦» (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šæº¢å‡º <code>isize</code>ã€‚</p>
</li>
<li>
<p>è¯¥è·ç¦»ä¸èƒ½ä¾èµ–äº â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚</p>
</li>
</ul>
<p>Rust ç±»å‹ä»ä¸å¤§äº <code>isize::MAX</code>ï¼Œå¹¶ä¸” Rust åˆ†é…ä»ä¸ç¯ç»•åœ°å€ç©ºé—´ï¼Œå› æ­¤ï¼Œä»»ä½• Rust ç±»å‹ <code>T</code> çš„æŸä¸ªå€¼å†…çš„ä¸¤ä¸ªæŒ‡é’ˆå°†å§‹ç»ˆæ»¡è¶³æœ€åä¸¤ä¸ªæ¡ä»¶ã€‚</p>
<p>æ ‡å‡†åº“é€šå¸¸è¿˜ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸è¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>ptr_into_vec.offset_from(vec.as_ptr())</code> å§‹ç»ˆæ»¡è¶³æœ€åä¸¤ä¸ªæ¡ä»¶ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„å»ºå¦‚æ­¤å¤§çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚
å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚
(è¯·æ³¨æ„ï¼Œ<a href="#method.offset-1"><code>offset</code></a> å’Œ <a href="#method.add"><code>add</code></a> ä¹Ÿå…·æœ‰ç±»ä¼¼çš„é™åˆ¶ï¼Œå› æ­¤ä¹Ÿä¸èƒ½åœ¨å¦‚æ­¤å¤§çš„åˆ†é…ä¸Šä½¿ç”¨ã€‚)</p>
<h5 id="panics-4"><a href="#panics-4">Panics</a></h5>
<p>å¦‚æœ <code>T</code> æ˜¯é›¶å¤§å°ç±»å‹ (â€œZSTâ€)ï¼Œåˆ™æ­¤å‡½æ•° panicsã€‚</p>
<h5 id="examples-31"><a href="#examples-31">Examples</a></h5>
<p>åŸºæœ¬ç”¨æ³•ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>a = [<span class="number">0</span>; <span class="number">5</span>];
<span class="kw">let </span>ptr1: <span class="kw-2">*mut </span>i32 = <span class="kw-2">&amp;mut </span>a[<span class="number">1</span>];
<span class="kw">let </span>ptr2: <span class="kw-2">*mut </span>i32 = <span class="kw-2">&amp;mut </span>a[<span class="number">3</span>];
<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(ptr2.offset_from(ptr1), <span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.offset_from(ptr2), -<span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.offset(<span class="number">2</span>), ptr2);
    <span class="macro">assert_eq!</span>(ptr2.offset(-<span class="number">2</span>), ptr1);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+mut+a+=+%5B0;+5%5D;%0Alet+ptr1:+*mut+i32+=+%26mut+a%5B1%5D;%0Alet+ptr2:+*mut+i32+=+%26mut+a%5B3%5D;%0Aunsafe+%7B%0A++++assert_eq!(ptr2.offset_from(ptr1),+2);%0A++++assert_eq!(ptr1.offset_from(ptr2),+-2);%0A++++assert_eq!(ptr1.offset(2),+ptr2);%0A++++assert_eq!(ptr2.offset(-2),+ptr1);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
<p><em>ä¸æ­£ç¡®</em> ç”¨æ³•ï¼š</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ptr1 = Box::into_raw(Box::new(<span class="number">0u8</span>));
<span class="kw">let </span>ptr2 = Box::into_raw(Box::new(<span class="number">1u8</span>));
<span class="kw">let </span>diff = (ptr2 <span class="kw">as </span>isize).wrapping_sub(ptr1 <span class="kw">as </span>isize);
<span class="comment">// å°† ptr2_other è®¾ç½®ä¸º ptr2 çš„ &quot;alias&quot;ï¼Œä½†ä» ptr1 æ´¾ç”Ÿã€‚
</span><span class="kw">let </span>ptr2_other = (ptr1 <span class="kw">as </span><span class="kw-2">*mut </span>u8).wrapping_offset(diff);
<span class="macro">assert_eq!</span>(ptr2 <span class="kw">as </span>usize, ptr2_other <span class="kw">as </span>usize);
<span class="comment">// ç”±äº ptr2_other å’Œ ptr2 æ˜¯ä»æŒ‡å‘ä¸åŒå¯¹è±¡çš„æŒ‡é’ˆæ´¾ç”Ÿçš„ï¼Œå› æ­¤å³ä½¿å®ƒä»¬æŒ‡å‘ç›¸åŒçš„åœ°å€ï¼Œè®¡ç®—å…¶åç§»é‡ä¹Ÿæ˜¯æœªå®šä¹‰çš„è¡Œä¸ºï¼
</span><span class="kw">unsafe </span>{
    <span class="kw">let </span>zero = ptr2_other.offset_from(ptr2); <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+ptr1+=+Box::into_raw(Box::new(0u8));%0Alet+ptr2+=+Box::into_raw(Box::new(1u8));%0Alet+diff+=+(ptr2+as+isize).wrapping_sub(ptr1+as+isize);%0A//+%E5%B0%86+ptr2_other+%E8%AE%BE%E7%BD%AE%E4%B8%BA+ptr2+%E7%9A%84+%22alias%22%EF%BC%8C%E4%BD%86%E4%BB%8E+ptr1+%E6%B4%BE%E7%94%9F%E3%80%82%0Alet+ptr2_other+=+(ptr1+as+*mut+u8).wrapping_offset(diff);%0Aassert_eq!(ptr2+as+usize,+ptr2_other+as+usize);%0A//+%E7%94%B1%E4%BA%8E+ptr2_other+%E5%92%8C+ptr2+%E6%98%AF%E4%BB%8E%E6%8C%87%E5%90%91%E4%B8%8D%E5%90%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8C%87%E9%92%88%E6%B4%BE%E7%94%9F%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8D%B3%E4%BD%BF%E5%AE%83%E4%BB%AC%E6%8C%87%E5%90%91%E7%9B%B8%E5%90%8C%E7%9A%84%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%AE%A1%E7%AE%97%E5%85%B6%E5%81%8F%E7%A7%BB%E9%87%8F%E4%B9%9F%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%EF%BC%81%0Aunsafe+%7B%0A++++let+zero+=+ptr2_other.offset_from(ptr2);+//+%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_offset_from-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#893">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_offset_from-1" class="fn">byte_offset_from</a>&lt;U&gt;(self, origin: <a class="primitive" href="primitive.pointer.html">*const U</a>) -&gt; <a class="primitive" href="primitive.isize.html">isize</a><span class="where fmt-newline">where
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ã€‚è¿”å›å€¼ä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.offset_from" title="method pointer::offset_from">offset_from</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…è€ƒè™‘æ•°æ®æŒ‡é’ˆï¼Œå¿½ç•¥å…ƒæ•°æ®ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.sub_ptr-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/95892" title="Tracking issue for const_ptr_sub_ptr">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#963-965">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.sub_ptr-1" class="fn">sub_ptr</a>(self, origin: <a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_sub_ptr</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95892">#95892</a>)</span></div></span></summary><div class="docblock"><p>è®¡ç®—ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„è·ç¦»ï¼Œ<em>where å·²çŸ¥ <code>self</code> ç­‰äºæˆ–å¤§äº <code>origin</code></em>ã€‚è¿”å›å€¼ä»¥ T ä¸ºå•ä½: ä»¥å­—èŠ‚ä¸ºå•ä½çš„è·ç¦»é™¤ä»¥ <code>mem::size_of::&lt;T&gt;()</code>ã€‚</p>
<p>è¿™å°†è®¡ç®— <a href="#method.offset_from"><code>offset_from</code></a> å°†è®¡ç®—çš„ç›¸åŒå€¼ï¼Œä½†é™„åŠ çš„å‰ææ¡ä»¶æ˜¯åç§»é‡ä¿è¯ä¸ºé negativeã€‚
æ­¤æ–¹æ³•ç­‰åŒäº <code>usize::try_from(self.offset_from(origin)).unwrap_unchecked()</code>ï¼Œä½†å®ƒä¸ºä¼˜åŒ–å™¨æä¾›äº†æ›´å¤šçš„ä¿¡æ¯ï¼Œè¿™æœ‰æ—¶å¯ä»¥ä½¿å…¶åœ¨æŸäº›åç«¯ä¼˜åŒ–å¾—æ›´å¥½ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥çœ‹ä½œæ˜¯æ¢å¤ä¼ é€’ç»™ <a href="#method.add"><code>add</code></a> çš„ <code>count</code> (æˆ–è€…ï¼Œä½¿ç”¨å…¶ä»–é¡ºåºçš„å‚æ•°ï¼Œåˆ° <a href="#method.sub"><code>sub</code></a>).
ä»¥ä¸‹éƒ½æ˜¯ç­‰ä»·çš„ï¼Œå‡è®¾å®ƒä»¬çš„å®‰å…¨å…ˆå†³æ¡ä»¶å¾—åˆ°æ»¡è¶³:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>ptr.sub_ptr(origin) == count
origin.add(count) == ptr
ptr.sub(count) == origin</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_sub_ptr)%5D%0Afn+main()+%7B%0Aunsafe+fn+blah(ptr:+*mut+i32,+origin:+*mut+i32,+count:+usize)+-%3E+bool+%7B%0Aptr.sub_ptr(origin)+==+count%0A%26%26%0Aorigin.add(count)+==+ptr%0A%26%26%0Aptr.sub(count)+==+origin%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="safety-18"><a href="#safety-18">Safety</a></h5>
<ul>
<li>
<p>æŒ‡é’ˆä¹‹é—´çš„è·ç¦»å¿…é¡»æ˜¯é negative (<code>self &gt;= origin</code>)</p>
</li>
<li>
<p><em>æ‰€æœ‰</em><a href="#method.offset_from"><code>offset_from</code></a> çš„å®‰å…¨æ¡ä»¶ä¹Ÿé€‚ç”¨äºæ­¤æ–¹æ³•; æŸ¥çœ‹å®Œæ•´çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
</ul>
<p>é‡è¦çš„æ˜¯ï¼Œå°½ç®¡æ­¤æ–¹æ³•çš„è¿”å›ç±»å‹èƒ½å¤Ÿè¡¨ç¤ºæ›´å¤§çš„åç§»é‡ï¼Œä½†ä»ç„¶<em>ä¸å…è®¸</em>ä¼ é€’ç›¸å·®è¶…è¿‡ <code>isize::MAX</code> <em>bytes</em> çš„æŒ‡é’ˆã€‚
å› æ­¤ï¼Œæ­¤æ–¹æ³•çš„ç»“æœå°†å§‹ç»ˆå°äºæˆ–ç­‰äº <code>isize::MAX as usize</code>ã€‚</p>
<h5 id="panics-5"><a href="#panics-5">Panics</a></h5>
<p>å¦‚æœ <code>T</code> æ˜¯é›¶å¤§å°ç±»å‹ (â€œZSTâ€)ï¼Œåˆ™æ­¤å‡½æ•° panicsã€‚</p>
<h5 id="examples-32"><a href="#examples-32">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(ptr_sub_ptr)]

</span><span class="kw">let </span><span class="kw-2">mut </span>a = [<span class="number">0</span>; <span class="number">5</span>];
<span class="kw">let </span>p: <span class="kw-2">*mut </span>i32 = a.as_mut_ptr();
<span class="kw">unsafe </span>{ <span class="kw">let </span>ptr1: <span class="kw-2">*mut </span>i32 = p.add(<span class="number">1</span>);
    <span class="kw">let </span>ptr2: <span class="kw-2">*mut </span>i32 = p.add(<span class="number">3</span>);

    <span class="macro">assert_eq!</span>(ptr2.sub_ptr(ptr1), <span class="number">2</span>);
    <span class="macro">assert_eq!</span>(ptr1.add(<span class="number">2</span>), ptr2);
    <span class="macro">assert_eq!</span>(ptr2.sub(<span class="number">2</span>), ptr1);
    <span class="macro">assert_eq!</span>(ptr2.sub_ptr(ptr2), <span class="number">0</span>);
}

<span class="comment">// è¿™æ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºæŒ‡é’ˆçš„é¡ºåºä¸æ­£ç¡®:
// ptr1.offset_from(ptr2)








</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(ptr_sub_ptr)%5D%0A%0Afn+main()+%7B%0Alet+mut+a+=+%5B0;+5%5D;%0Alet+p:+*mut+i32+=+a.as_mut_ptr();%0Aunsafe+%7B+let+ptr1:+*mut+i32+=+p.add(1);%0A++++let+ptr2:+*mut+i32+=+p.add(3);%0A%0A++++assert_eq!(ptr2.sub_ptr(ptr1),+2);%0A++++assert_eq!(ptr1.add(2),+ptr2);%0A++++assert_eq!(ptr2.sub(2),+ptr1);%0A++++assert_eq!(ptr2.sub_ptr(ptr2),+0);%0A%7D%0A%0A//+%E8%BF%99%E6%98%AF%E4%B8%8D%E6%AD%A3%E7%A1%AE%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%8C%87%E9%92%88%E7%9A%84%E9%A1%BA%E5%BA%8F%E4%B8%8D%E6%AD%A3%E7%A1%AE:%0A//+ptr1.offset_from(ptr2)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1025-1027">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.add-1" class="fn">add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (<code>.offset(count as isize)</code> çš„ä¾¿åˆ©æ€§)ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-19"><a href="#safety-19">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½) ä¸ä¼šä½¿ <code>isize</code> æº¢å‡ºã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦çš„æ€»å’Œå¿…é¡»ç¬¦åˆ <code>usize</code>ã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_add"><code>wrapping_add</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-33"><a href="#examples-33">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;123&quot;</span>;
<span class="kw">let </span>ptr: <span class="kw-2">*const </span>u8 = s.as_ptr();

<span class="kw">unsafe </span>{
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.add(<span class="number">1</span>) <span class="kw">as </span>char);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>ptr.add(<span class="number">2</span>) <span class="kw">as </span>char);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22123%22;%0Alet+ptr:+*const+u8+=+s.as_ptr();%0A%0Aunsafe+%7B%0A++++println!(%22%7B%7D%22,+*ptr.add(1)+as+char);%0A++++println!(%22%7B%7D%22,+*ptr.add(2)+as+char);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_add-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1056">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_add-1" class="fn">byte_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä»¥å­—èŠ‚ä¸ºå•ä½è®¡ç®—æŒ‡é’ˆçš„åç§»é‡ (æ–¹ä¾¿ <code>.byte_offset(count as isize)</code>)ã€‚</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.add" title="method pointer::add">add</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.sub-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1116-1118">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.sub-1" class="fn">sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (<code>.offset((count as isize).wrapping_neg())</code> çš„ä¾¿åˆ©æ€§)ã€‚</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-20"><a href="#safety-20">Safety</a></h5>
<p>å¦‚æœè¿åä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç»“æœä¸ºæœªå®šä¹‰è¡Œä¸ºï¼š</p>
<ul>
<li>
<p>èµ·å§‹æŒ‡é’ˆå’Œç»“æœæŒ‡é’ˆéƒ½å¿…é¡»åœ¨è¾¹ç•Œå†…æˆ–åœ¨åŒä¸€ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> çš„æœ«å°¾ä¹‹åä¸€ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>è®¡ç®—çš„åç§»é‡ä¸èƒ½è¶…è¿‡ <code>isize::MAX</code> ä¸ª <strong>å­—èŠ‚</strong>ã€‚</p>
</li>
<li>
<p>åç§»é‡ä¸èƒ½ä¾èµ– â€œwrapping aroundâ€ åœ°å€ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— é™ç²¾åº¦çš„æ€»å’Œå¿…é¡»ç¬¦åˆä½¿ç”¨å¤§å°ã€‚</p>
</li>
</ul>
<p>ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“é€šå¸¸ä¼šå°è¯•ç¡®ä¿åˆ†é…æ°¸è¿œä¸ä¼šè¾¾åˆ°éœ€è¦è€ƒè™‘åç§»é‡çš„å¤§å°ã€‚
ä¾‹å¦‚ï¼Œ<code>Vec</code> å’Œ <code>Box</code> ç¡®ä¿å®ƒä»¬åˆ†é…çš„å­—èŠ‚æ•°æ°¸è¿œä¸ä¼šè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚ï¼Œå› æ­¤ <code>vec.as_ptr().add(vec.len()).sub(vec.len())</code> å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¤§å¤šæ•°å¹³å°ç”šè‡³éƒ½æ— æ³•æ„é€ è¿™æ ·çš„åˆ†é…ã€‚
ä¾‹å¦‚ï¼Œç”±äºé¡µè¡¨çš„é™åˆ¶æˆ–åœ°å€ç©ºé—´çš„åˆ†å‰²ï¼Œæ²¡æœ‰å·²çŸ¥çš„ 64 ä½å¹³å°å¯ä»¥æ»¡è¶³ 2 <sup>63</sup> å­—èŠ‚çš„è¯·æ±‚ã€‚
ä½†æ˜¯ï¼ŒæŸäº› 32 ä½å’Œ 16 ä½å¹³å°å¯èƒ½é€šè¿‡ç‰©ç†åœ°å€æ‰©å±•ä¹‹ç±»çš„ä¸œè¥¿æˆåŠŸåœ°ä¸ºè¶…è¿‡ <code>isize::MAX</code> å­—èŠ‚çš„è¯·æ±‚æä¾›æœåŠ¡ã€‚</p>
<p>å› æ­¤ï¼Œç›´æ¥ä»åˆ†é…å™¨è·å–çš„å†…å­˜æˆ–å†…å­˜æ˜ å°„æ–‡ä»¶ <em>å¯èƒ½</em> å¤ªå¤§è€Œæ— æ³•ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœè¿™äº›çº¦æŸéš¾ä»¥æ»¡è¶³ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <a href="#method.wrapping_sub"><code>wrapping_sub</code></a>ã€‚
æ­¤æ–¹æ³•çš„å”¯ä¸€ä¼˜ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å®ç°æ›´ç§¯æçš„ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<h5 id="examples-34"><a href="#examples-34">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>s: <span class="kw-2">&amp;</span>str = <span class="string">&quot;123&quot;</span>;

<span class="kw">unsafe </span>{
    <span class="kw">let </span>end: <span class="kw-2">*const </span>u8 = s.as_ptr().add(<span class="number">3</span>);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>end.sub(<span class="number">1</span>) <span class="kw">as </span>char);
    <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>end.sub(<span class="number">2</span>) <span class="kw">as </span>char);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Alet+s:+%26str+=+%22123%22;%0A%0Aunsafe+%7B%0A++++let+end:+*const+u8+=+s.as_ptr().add(3);%0A++++println!(%22%7B%7D%22,+*end.sub(1)+as+char);%0A++++println!(%22%7B%7D%22,+*end.sub(2)+as+char);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.byte_sub-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1140">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.byte_sub-1" class="fn">byte_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä»¥å­—èŠ‚ä¸ºå•ä½è®¡ç®—æŒ‡é’ˆçš„åç§»é‡ (æ–¹ä¾¿ <code>.byte_offset((count as isize).wrapping_neg())</code>)ã€‚</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.sub" title="method pointer::sub">sub</a>ã€‚
æœ‰å…³æ–‡æ¡£å’Œå®‰å…¨è¦æ±‚ï¼Œè¯·å‚è§è¯¥æ–¹æ³•ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_add-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1198-1200">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_add-1" class="fn">wrapping_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚
(ä¸º <code>.wrapping_offset(count as isize)</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-21"><a href="#safety-21">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_add((y as usize) - (x as usize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.add"><code>add</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.add"><code>add</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_add</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.add"><code>add</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_add(o).wrapping_sub(o)</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-35"><a href="#examples-35">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´ ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*const </span>u8 = data.as_ptr();
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="kw">let </span>end_rounded_up = ptr.wrapping_add(<span class="number">6</span>);

<span class="comment">// æ­¤å¾ªç¯æ‰“å° &quot;1, 3, 5, &quot;
</span><span class="kw">while </span>ptr != end_rounded_up {
    <span class="kw">unsafe </span>{
        <span class="macro">print!</span>(<span class="string">&quot;{}, &quot;</span>, <span class="kw-2">*</span>ptr);
    }
    ptr = ptr.wrapping_add(step);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*const+u8+=+data.as_ptr();%0Alet+step+=+2;%0Alet+end_rounded_up+=+ptr.wrapping_add(6);%0A%0A//+%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B0+%221,+3,+5,+%22%0Awhile+ptr+!=+end_rounded_up+%7B%0A++++unsafe+%7B%0A++++++++print!(%22%7B%7D,+%22,+*ptr);%0A++++%7D%0A++++ptr+=+ptr.wrapping_add(step);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_add-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1219">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_add-1" class="fn">wrapping_byte_add</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚
(ä¾¿äº <code>.wrapping_byte_offset(è®¡ä¸º isize)</code>)</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_add" title="method pointer::wrapping_add">wrapping_add</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_sub-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.61.0">1.26.0 (const: 1.61.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1276-1278">source</a></span><h4 class="code-header">pub const fn <a href="#method.wrapping_sub-1" class="fn">wrapping_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class="docblock"><p>ä½¿ç”¨æ¢è¡Œç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ã€‚
(ä¸º <code>.wrapping_offset((count as isize).wrapping_neg())</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥ T ä¸ºå•ä½ï¼› ä¾‹å¦‚ï¼Œ<code>count</code> ä¸º 3 è¡¨ç¤º <code>3 * size_of::&lt;T&gt;()</code> å­—èŠ‚çš„æŒ‡é’ˆåç§»é‡ã€‚</p>
<h5 id="safety-22"><a href="#safety-22">Safety</a></h5>
<p>æ­¤æ“ä½œæœ¬èº«å§‹ç»ˆæ˜¯å®‰å…¨çš„ï¼Œä½†ä½¿ç”¨ç»“æœæŒ‡é’ˆåˆ™ä¸å®‰å…¨ã€‚</p>
<p>ç»“æœæŒ‡é’ˆ â€œremembersâ€ æ˜¯ <code>self</code> æŒ‡å‘çš„ <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a>ï¼› å®ƒä¸å¾—ç”¨äºè¯»å–æˆ–å†™å…¥å…¶ä»–åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå³ä½¿æˆ‘ä»¬å‡è®¾ <code>T</code> çš„å¤§å°ä¸º <code>1</code> å¹¶ä¸”æ²¡æœ‰æº¢å‡ºï¼Œ<code>let z = x.wrapping_sub((x as usize) - (y as usize))</code> ä¸ä¼šä½¿ <code>z</code> ä¸ <code>y</code> ç›¸åŒ: <code>z</code> ä»é™„åŠ åˆ°å¯¹è±¡ <code>x</code> æ‰€é™„åŠ çš„å¯¹è±¡ï¼Œå¹¶ä¸”è§£å¼•ç”¨å®ƒæ˜¯ Undefined Behaviorï¼Œé™¤é <code>x</code> å’Œ <code>y</code> æŒ‡å‘åŒä¸€åˆ†é…çš„å¯¹è±¡ã€‚</p>
<p>ä¸ <a href="#method.sub"><code>sub</code></a> ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•ä»æ ¹æœ¬ä¸Šå»¶è¿Ÿäº†ç•™åœ¨åŒä¸€åˆ†é…å¯¹è±¡å†…çš„éœ€æ±‚: <a href="#method.sub"><code>sub</code></a> æ˜¯è·¨è¶Šå¯¹è±¡è¾¹ç•Œæ—¶çš„ç«‹å³æœªå®šä¹‰è¡Œä¸ºï¼› <code>wrapping_sub</code> äº§ç”Ÿä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å¦‚æœæŒ‡é’ˆè¶…å‡ºå…¶é™„åŠ å¯¹è±¡çš„èŒƒå›´è€Œè¢«è§£å¼•ç”¨ï¼Œåˆ™ä»ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
<a href="#method.sub"><code>sub</code></a> å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå› æ­¤åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­æ›´å¯å–ã€‚</p>
<p>å»¶è¿Ÿæ£€æŸ¥ä»…è€ƒè™‘è§£å¼•ç”¨çš„æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸è€ƒè™‘æœ€ç»ˆç»“æœè®¡ç®—æœŸé—´ä½¿ç”¨çš„ä¸­é—´å€¼ã€‚
ä¾‹å¦‚ï¼Œ<code>x.wrapping_add(o).wrapping_sub(o)</code> å§‹ç»ˆä¸ <code>x</code> ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå…è®¸ç¦»å¼€å·²åˆ†é…çš„å¯¹è±¡ï¼Œç„¶ååœ¨ä»¥åé‡æ–°è¾“å…¥å®ƒã€‚</p>
<h5 id="examples-36"><a href="#examples-36">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// ä½¿ç”¨è£¸æŒ‡é’ˆä»¥ä¸¤ä¸ªå…ƒç´  (backwards) ä¸ºå¢é‡è¿›è¡Œè¿­ä»£
</span><span class="kw">let </span>data = [<span class="number">1u8</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
<span class="kw">let </span><span class="kw-2">mut </span>ptr: <span class="kw-2">*const </span>u8 = data.as_ptr();
<span class="kw">let </span>start_rounded_down = ptr.wrapping_sub(<span class="number">2</span>);
ptr = ptr.wrapping_add(<span class="number">4</span>);
<span class="kw">let </span>step = <span class="number">2</span>;
<span class="comment">// æ­¤å¾ªç¯æ‰“å° &quot;5, 3, 1, &quot;
</span><span class="kw">while </span>ptr != start_rounded_down {
    <span class="kw">unsafe </span>{
        <span class="macro">print!</span>(<span class="string">&quot;{}, &quot;</span>, <span class="kw-2">*</span>ptr);
    }
    ptr = ptr.wrapping_sub(step);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A//+%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E4%BB%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0+(backwards)+%E4%B8%BA%E5%A2%9E%E9%87%8F%E8%BF%9B%E8%A1%8C%E8%BF%AD%E4%BB%A3%0Afn+main()+%7B%0Alet+data+=+%5B1u8,+2,+3,+4,+5%5D;%0Alet+mut+ptr:+*const+u8+=+data.as_ptr();%0Alet+start_rounded_down+=+ptr.wrapping_sub(2);%0Aptr+=+ptr.wrapping_add(4);%0Alet+step+=+2;%0A//+%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%89%93%E5%8D%B0+%225,+3,+1,+%22%0Awhile+ptr+!=+start_rounded_down+%7B%0A++++unsafe+%7B%0A++++++++print!(%22%7B%7D,+%22,+*ptr);%0A++++%7D%0A++++ptr+=+ptr.wrapping_sub(step);%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wrapping_byte_sub-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/96283" title="Tracking issue for const_pointer_byte_offsets">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1297">source</a></span><h4 class="code-header">pub fn <a href="#method.wrapping_byte_sub-1" class="fn">wrapping_byte_sub</a>(self, count: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_byte_offsets</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96283">#96283</a>)</span></div></span></summary><div class="docblock"><p>ä½¿ç”¨ç¯ç»•ç®—æ³•è®¡ç®—ä¸æŒ‡é’ˆçš„åç§»é‡ (ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚
(ä¸º <code>.wrapping_offset((count as isize).wrapping_neg())</code> å¸¦æ¥çš„ä¾¿åˆ©)</p>
<p><code>count</code> ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p>
<p>è¿™çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬æ¢ä¸º <code>u8</code> æŒ‡é’ˆå¹¶åœ¨å…¶ä¸Šä½¿ç”¨ <a href="primitive.pointer.html#method.wrapping_sub" title="method pointer::wrapping_sub">wrapping_sub</a>ã€‚
è¯·å‚è§è¯¥æ–¹æ³•ä»¥è·å–æ–‡æ¡£ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…æ›´æ”¹æ•°æ®æŒ‡é’ˆï¼Œè€Œä¿ç•™å…ƒæ•°æ®ä¸å˜ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.71.0">1.26.0 (const: 1.71.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1311-1313">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.read-1" class="fn">read</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>ä» <code>self</code> è¯»å–å€¼è€Œä¸ç§»åŠ¨å®ƒã€‚
è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read.html" title="fn std::ptr::read"><code>ptr::read</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_volatile-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0">1.26.0</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1332-1334">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.read_volatile-1" class="fn">read_volatile</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>å¯¹ <code>self</code> çš„å€¼è¿›è¡Œæ˜“å¤±æ€§è¯»å–ï¼Œè€Œæ— éœ€ç§»åŠ¨å®ƒã€‚è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>æ˜“å¤±æ€§æ“ä½œæ—¨åœ¨ä½œç”¨äº I/O å­˜å‚¨å™¨ï¼Œå¹¶ä¿è¯ç¼–è¯‘å™¨ä¸ä¼šåœ¨å…¶ä»–æ˜“å¤±æ€§æ“ä½œä¸­å¯¹æ˜“å¤±æ€§æ“ä½œè¿›è¡Œæ¸…é™¤æˆ–é‡æ–°æ’åºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read_volatile.html" title="fn std::ptr::read_volatile"><code>ptr::read_volatile</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_unaligned-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.71.0">1.26.0 (const: 1.71.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1352-1354">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.read_unaligned-1" class="fn">read_unaligned</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>ä» <code>self</code> è¯»å–å€¼è€Œä¸ç§»åŠ¨å®ƒã€‚
è¿™å°†ä½¿ <code>self</code> ä¸­çš„å†…å­˜ä¿æŒä¸å˜ã€‚</p>
<p>ä¸ <code>read</code> ä¸åŒï¼ŒæŒ‡é’ˆå¯èƒ½æœªå¯¹é½ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.read_unaligned.html" title="fn std::ptr::read_unaligned"><code>ptr::read_unaligned</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_to-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1372-1374">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_to-1" class="fn">copy_to</a>(self, dest: <a class="primitive" href="primitive.pointer.html">*mut T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>self</code> å¤åˆ¶åˆ° <code>dest</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ä¼šé‡å ã€‚</p>
<p>NOTE: è¿™ä¸ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a> å…·æœ‰ç›¸åŒçš„å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_to_nonoverlapping-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1392-1394">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_to_nonoverlapping-1" class="fn">copy_to_nonoverlapping</a>(self, dest: <a class="primitive" href="primitive.pointer.html">*mut T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>self</code> å¤åˆ¶åˆ° <code>dest</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ <em>ä¸</em> é‡å ã€‚</p>
<p>NOTE: è¿™ä¸ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a> å…·æœ‰ç›¸åŒçš„å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_from" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1412-1414">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_from" class="fn">copy_from</a>(self, src: <a class="primitive" href="primitive.pointer.html">*const T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>src</code> å¤åˆ¶åˆ° <code>self</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ä¼šé‡å ã€‚</p>
<p>NOTE: è¿™å…·æœ‰ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a> çš„ <em>ç›¸å</em> å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy.html" title="fn std::ptr::copy"><code>ptr::copy</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.copy_from_nonoverlapping" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const since 1.63.0">1.26.0 (const: 1.63.0)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1432-1434">source</a></span><h4 class="code-header">pub const unsafe fn <a href="#method.copy_from_nonoverlapping" class="fn">copy_from_nonoverlapping</a>(self, src: <a class="primitive" href="primitive.pointer.html">*const T</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>å°† <code>count * size_of&lt;T&gt;</code> å­—èŠ‚ä» <code>src</code> å¤åˆ¶åˆ° <code>self</code>ã€‚
æºå’Œç›®æ ‡å¯èƒ½ <em>ä¸</em> é‡å ã€‚</p>
<p>NOTE: è¿™å…·æœ‰ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a> çš„ <em>ç›¸å</em> å‚æ•°é¡ºåºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.copy_nonoverlapping.html" title="fn std::ptr::copy_nonoverlapping"><code>ptr::copy_nonoverlapping</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.drop_in_place" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0">1.26.0</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1447">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.drop_in_place" class="fn">drop_in_place</a>(self)</h4></section></summary><div class="docblock"><p>æ‰§è¡ŒæŒ‡å‘å€¼çš„ææ„å‡½æ•° (å¦‚æœæœ‰)ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.drop_in_place.html" title="fn std::ptr::drop_in_place"><code>ptr::drop_in_place</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.write" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const unstable">1.26.0 (const: <a href="https://github.com/rust-lang/rust/issues/86302" title="Tracking issue for const_ptr_write">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1462-1464">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.write" class="fn">write</a>(self, val: T)</h4></section></summary><div class="docblock"><p>ç”¨ç»™å®šå€¼è¦†ç›–å­˜å‚¨ä½ç½®ï¼Œè€Œæ— éœ€è¯»å–æˆ–ä¸¢å¼ƒæ—§å€¼ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.write.html" title="fn std::ptr::write"><code>ptr::write</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.write_bytes" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const unstable">1.26.0 (const: <a href="https://github.com/rust-lang/rust/issues/86302" title="Tracking issue for const_ptr_write">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1481-1483">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.write_bytes" class="fn">write_bytes</a>(self, val: <a class="primitive" href="primitive.u8.html">u8</a>, count: <a class="primitive" href="primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>åœ¨æŒ‡å®šçš„æŒ‡é’ˆä¸Šè°ƒç”¨ memsetï¼Œå°† <code>self</code> å¼€å§‹çš„ <code>count * size_of::&lt;T&gt;()</code> å†…å­˜å­—èŠ‚è®¾ç½®ä¸º <code>val</code>ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.write_bytes.html" title="fn std::ptr::write_bytes"><code>ptr::write_bytes</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.write_volatile" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0">1.26.0</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1502-1504">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.write_volatile" class="fn">write_volatile</a>(self, val: T)</h4></section></summary><div class="docblock"><p>ä½¿ç”¨ç»™å®šå€¼å¯¹å­˜å‚¨å•å…ƒæ‰§è¡Œæ˜“å¤±æ€§å†™æ“ä½œï¼Œè€Œæ— éœ€è¯»å–æˆ–ä¸¢å¼ƒæ—§å€¼ã€‚</p>
<p>æ˜“å¤±æ€§æ“ä½œæ—¨åœ¨ä½œç”¨äº I/O å­˜å‚¨å™¨ï¼Œå¹¶ä¿è¯ç¼–è¯‘å™¨ä¸ä¼šåœ¨å…¶ä»–æ˜“å¤±æ€§æ“ä½œä¸­å¯¹æ˜“å¤±æ€§æ“ä½œè¿›è¡Œæ¸…é™¤æˆ–é‡æ–°æ’åºã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.write_volatile.html" title="fn std::ptr::write_volatile"><code>ptr::write_volatile</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.write_unaligned" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const unstable">1.26.0 (const: <a href="https://github.com/rust-lang/rust/issues/86302" title="Tracking issue for const_ptr_write">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1522-1524">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.write_unaligned" class="fn">write_unaligned</a>(self, val: T)</h4></section></summary><div class="docblock"><p>ç”¨ç»™å®šå€¼è¦†ç›–å­˜å‚¨ä½ç½®ï¼Œè€Œæ— éœ€è¯»å–æˆ–ä¸¢å¼ƒæ—§å€¼ã€‚</p>
<p>ä¸ <code>write</code> ä¸åŒï¼ŒæŒ‡é’ˆå¯èƒ½æœªå¯¹é½ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.write_unaligned.html" title="fn std::ptr::write_unaligned"><code>ptr::write_unaligned</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.replace" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0">1.26.0</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1538-1540">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.replace" class="fn">replace</a>(self, src: T) -&gt; T</h4></section></summary><div class="docblock"><p>ç”¨ <code>src</code> æ›¿æ¢ <code>self</code> å¤„çš„å€¼ï¼Œè¿”å›æ—§å€¼ï¼Œä½†ä¸ä¸¢å¼ƒä»»ä½•ä¸€ä¸ªã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.replace.html" title="fn std::ptr::replace"><code>ptr::replace</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.swap" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.26.0, const unstable">1.26.0 (const: <a href="https://github.com/rust-lang/rust/issues/83163" title="Tracking issue for const_swap">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1556-1558">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.swap" class="fn">swap</a>(self, with: <a class="primitive" href="primitive.pointer.html">*mut T</a>)</h4></section></summary><div class="docblock"><p>åœ¨ç›¸åŒç±»å‹çš„ä¸¤ä¸ªå¯å˜ä½ç½®äº¤æ¢å€¼ï¼Œè€Œæ— éœ€å–æ¶ˆåˆå§‹åŒ–ä»»ä½•ä¸€ä¸ªã€‚
å®ƒä»¬å¯èƒ½é‡å ï¼Œè¿™ä¸ <code>mem::swap</code> ä¸åŒï¼Œåè€…åœ¨å…¶ä»–æ–¹é¢æ˜¯ç­‰æ•ˆçš„ã€‚</p>
<p>æœ‰å…³å®‰å…¨æ€§é—®é¢˜å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="ptr/fn.swap.html" title="fn std::ptr::swap"><code>ptr::swap</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.align_offset-1" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.36.0, const unstable">1.36.0 (const: <a href="https://github.com/rust-lang/rust/issues/90962" title="Tracking issue for const_align_offset">unstable</a>)</span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1610-1612">source</a></span><h4 class="code-header">pub fn <a href="#method.align_offset-1" class="fn">align_offset</a>(self, align: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>è®¡ç®—ä¸ºä½¿å…¶ä¸ <code>align</code> å¯¹é½è€Œéœ€è¦åº”ç”¨åˆ°æŒ‡é’ˆçš„åç§»é‡ã€‚</p>
<p>å¦‚æœæ— æ³•å¯¹é½æŒ‡é’ˆï¼Œåˆ™å®ç°å°†è¿”å› <code>usize::MAX</code>ã€‚
å…è®¸å®ç° <em>å§‹ç»ˆ</em> è¿”å› <code>usize::MAX</code>ã€‚
åªæœ‰ç®—æ³•çš„æ€§èƒ½å¯ä»¥å–å†³äºæ­¤å¤„æ˜¯å¦å¯è·å¾—å¯ç”¨çš„åç§»é‡ï¼Œè€Œä¸å–å†³äºå…¶æ­£ç¡®æ€§ã€‚</p>
<p>åç§»é‡ä»¥ <code>T</code> å…ƒç´ çš„æ•°é‡è¡¨ç¤ºï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚è¡¨ç¤ºã€‚è¿”å›çš„å€¼å¯ä»¥ä¸ <code>wrapping_add</code> æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>ä¸èƒ½ä¿è¯åç§»æŒ‡é’ˆä¸ä¼šæº¢å‡ºæˆ–è¶…å‡ºæŒ‡é’ˆæ‰€æŒ‡å‘çš„åˆ†é…èŒƒå›´ã€‚</p>
<p>è°ƒç”¨è€…åº”ç¡®ä¿è¿”å›çš„åç§»é‡åœ¨å¯¹é½æ–¹å¼ä»¥å¤–çš„æ‰€æœ‰æ–¹é¢éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<h5 id="panics-6"><a href="#panics-6">Panics</a></h5>
<p>å¦‚æœ <code>align</code> ä¸æ˜¯ 2 çš„å¹‚ï¼Œåˆ™å‡½æ•° panicsã€‚</p>
<h5 id="examples-37"><a href="#examples-37">Examples</a></h5>
<p>å°†ç›¸é‚»çš„ <code>u8</code> ä½œä¸º <code>u16</code> è¿›è¡Œè®¿é—®</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::mem::align_of;

<span class="kw">let </span><span class="kw-2">mut </span>x = [<span class="number">5_u8</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];
<span class="kw">let </span>ptr = x.as_mut_ptr();
<span class="kw">let </span>offset = ptr.align_offset(align_of::&lt;u16&gt;());

<span class="kw">if </span>offset &lt; x.len() - <span class="number">1 </span>{
    <span class="kw">let </span>u16_ptr = ptr.add(offset).cast::&lt;u16&gt;();
    <span class="kw-2">*</span>u16_ptr = <span class="number">0</span>;

    <span class="macro">assert!</span>(x == [<span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>] || x == [<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">9</span>]);
} <span class="kw">else </span>{
    <span class="comment">// è™½ç„¶æŒ‡é’ˆå¯ä»¥é€šè¿‡ `offset` å¯¹é½ï¼Œä½†å®ƒä¼šæŒ‡å‘åˆ†é…ä¹‹å¤–
</span>}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::mem::align_of;%0A%0Aunsafe+%7B%0Alet+mut+x+=+%5B5_u8,+6,+7,+8,+9%5D;%0Alet+ptr+=+x.as_mut_ptr();%0Alet+offset+=+ptr.align_offset(align_of::%3Cu16%3E());%0A%0Aif+offset+%3C+x.len()+-+1+%7B%0A++++let+u16_ptr+=+ptr.add(offset).cast::%3Cu16%3E();%0A++++*u16_ptr+=+0;%0A%0A++++assert!(x+==+%5B0,+0,+7,+8,+9%5D+%7C%7C+x+==+%5B5,+0,+0,+8,+9%5D);%0A%7D+else+%7B%0A++++//+%E8%99%BD%E7%84%B6%E6%8C%87%E9%92%88%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87+%60offset%60+%E5%AF%B9%E9%BD%90%EF%BC%8C%E4%BD%86%E5%AE%83%E4%BC%9A%E6%8C%87%E5%90%91%E5%88%86%E9%85%8D%E4%B9%8B%E5%A4%96%0A%7D%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_aligned-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/104203" title="Tracking issue for const_pointer_is_aligned">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1734-1736">source</a></span><h4 class="code-header">pub fn <a href="#method.is_aligned-1" class="fn">is_aligned</a>(self) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_is_aligned</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96284">#96284</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æŒ‡é’ˆæ˜¯å¦ä¸º <code>T</code> æ­£ç¡®å¯¹é½ã€‚</p>
<h5 id="examples-38"><a href="#examples-38">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(pointer_byte_offsets)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">let </span><span class="kw-2">mut </span>data = AlignedI32(<span class="number">42</span>);
<span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>data <span class="kw">as </span><span class="kw-2">*mut </span>AlignedI32;

<span class="macro">assert!</span>(ptr.is_aligned());
<span class="macro">assert!</span>(!ptr.wrapping_byte_add(<span class="number">1</span>).is_aligned());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(pointer_byte_offsets)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Alet+mut+data+=+AlignedI32(42);%0Alet+ptr+=+%26mut+data+as+*mut+AlignedI32;%0A%0Aassert!(ptr.is_aligned());%0Aassert!(!ptr.wrapping_byte_add(1).is_aligned());%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="åœ¨ç¼–è¯‘æ—¶-2"><a href="#åœ¨ç¼–è¯‘æ—¶-2">åœ¨ç¼–è¯‘æ—¶</a></h5>
<p><strong>Note: ç¼–è¯‘æ—¶çš„å¯¹é½æ˜¯å®éªŒæ€§çš„ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/rust-lang/rust/issues/104203">tracking issue</a>ã€‚</strong></p>
<p>åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“å€¼å°†åœ¨å†…å­˜ä¸­çš„ä½•å¤„ç»“æŸã€‚
åœ¨ç¼–è¯‘æ—¶å¯¹ä»å¼•ç”¨åˆ›å»ºçš„æŒ‡é’ˆè°ƒç”¨æ­¤å‡½æ•°å°†ä»…åœ¨ä¿è¯æŒ‡é’ˆå¯¹é½çš„æƒ…å†µä¸‹è¿”å› <code>true</code>ã€‚
è¿™æ„å‘³ç€å¦‚æœå°†æŒ‡é’ˆè½¬æ¢ä¸ºæ¯”å¼•ç”¨çš„åº•å±‚åˆ†é…å…·æœ‰æ›´ä¸¥æ ¼å¯¹é½çš„ç±»å‹ï¼Œåˆ™æŒ‡é’ˆæ°¸è¿œä¸ä¼šå¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]
#![feature(const_mut_refs)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span><span class="kw-2">mut </span>data = AlignedI32(<span class="number">42</span>);
    <span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>data <span class="kw">as </span><span class="kw-2">*mut </span>AlignedI32;
    <span class="macro">assert!</span>(ptr.is_aligned());

    <span class="comment">// åœ¨è¿è¡Œæ—¶ `ptr1` æˆ– `ptr2` å°†å¯¹é½ï¼Œä½†åœ¨ç¼–è¯‘æ—¶ä¸¤è€…éƒ½ä¸å¯¹é½ã€‚
    </span><span class="kw">let </span>ptr1 = ptr.cast::&lt;AlignedI64&gt;();
    <span class="kw">let </span>ptr2 = ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;();
    <span class="macro">assert!</span>(!ptr1.is_aligned());
    <span class="macro">assert!</span>(!ptr2.is_aligned());
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%23!%5Bfeature(const_mut_refs)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0Aconst+_:+()+=+%7B%0A++++let+mut+data+=+AlignedI32(42);%0A++++let+ptr+=+%26mut+data+as+*mut+AlignedI32;%0A++++assert!(ptr.is_aligned());%0A%0A++++//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6+%60ptr1%60+%E6%88%96+%60ptr2%60+%E5%B0%86%E5%AF%B9%E9%BD%90%EF%BC%8C%E4%BD%86%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%E4%B8%A4%E8%80%85%E9%83%BD%E4%B8%8D%E5%AF%B9%E9%BD%90%E3%80%82%0A++++let+ptr1+=+ptr.cast::%3CAlignedI64%3E();%0A++++let+ptr2+=+ptr.wrapping_add(1).cast::%3CAlignedI64%3E();%0A++++assert!(!ptr1.is_aligned());%0A++++assert!(!ptr2.is_aligned());%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>ç”±äºæ­¤è¡Œä¸ºï¼Œå³ä½¿ç¼–è¯‘æ—¶æŒ‡é’ˆæœªå¯¹é½ï¼Œæ´¾ç”Ÿè‡ªç¼–è¯‘æ—¶æŒ‡é’ˆçš„è¿è¡Œæ—¶æŒ‡é’ˆä¹Ÿå¯èƒ½å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œ`COMPTIME_PTR` å’Œ `COMPTIME_PTR + 1` éƒ½æ²¡æœ‰å¯¹é½ã€‚
// å¦è¯·æ³¨æ„ï¼Œå¯å˜å¼•ç”¨ä¸å…è®¸å‡ºç°åœ¨å¸¸é‡çš„æœ€ç»ˆå€¼ä¸­ã€‚
</span><span class="kw">const </span>COMPTIME_PTR: <span class="kw-2">*mut </span>AlignedI32 = (<span class="kw-2">&amp;</span>AlignedI32(<span class="number">42</span>) <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32).cast_mut();
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.cast::&lt;AlignedI64&gt;().is_aligned());
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;().is_aligned());

<span class="comment">// åœ¨è¿è¡Œæ—¶ï¼Œ`runtime_ptr` æˆ– `runtime_ptr + 1` å¯¹é½ã€‚
</span><span class="kw">let </span>runtime_ptr = COMPTIME_PTR;
<span class="macro">assert_ne!</span>(
    runtime_ptr.cast::&lt;AlignedI64&gt;().is_aligned(),
    runtime_ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;().is_aligned(),
);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0A//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%60COMPTIME_PTR%60+%E5%92%8C+%60COMPTIME_PTR+%2B+1%60+%E9%83%BD%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E3%80%82%0A//+%E5%8F%A6%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%8C%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E4%B8%8D%E5%85%81%E8%AE%B8%E5%87%BA%E7%8E%B0%E5%9C%A8%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%80%E7%BB%88%E5%80%BC%E4%B8%AD%E3%80%82%0Aconst+COMPTIME_PTR:+*mut+AlignedI32+=+(%26AlignedI32(42)+as+*const+AlignedI32).cast_mut();%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.cast::%3CAlignedI64%3E().is_aligned());%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.wrapping_add(1).cast::%3CAlignedI64%3E().is_aligned());%0A%0A//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%8C%60runtime_ptr%60+%E6%88%96+%60runtime_ptr+%2B+1%60+%E5%AF%B9%E9%BD%90%E3%80%82%0Alet+runtime_ptr+=+COMPTIME_PTR;%0Aassert_ne!(%0A++++runtime_ptr.cast::%3CAlignedI64%3E().is_aligned(),%0A++++runtime_ptr.wrapping_add(1).cast::%3CAlignedI64%3E().is_aligned(),%0A);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>å¦‚æœæŒ‡é’ˆæ˜¯ä»å›ºå®šåœ°å€åˆ›å»ºçš„ï¼Œåˆ™æ­¤å‡½æ•°åœ¨è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œå›¾å…ƒçš„å¯¹é½æ–¹å¼å°äºå®ƒä»¬çš„å¤§å°ã€‚
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);
<span class="attr">#[repr(align(<span class="number">8</span>))]
</span><span class="kw">struct </span>AlignedI64(i64);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span>ptr = <span class="number">40 </span><span class="kw">as </span><span class="kw-2">*mut </span>AlignedI32;
    <span class="macro">assert!</span>(ptr.is_aligned());

    <span class="comment">// å¯¹äºå…·æœ‰å·²çŸ¥åœ°å€çš„æŒ‡é’ˆï¼Œè¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶è¡Œä¸ºæ˜¯ç›¸åŒçš„ã€‚
    </span><span class="kw">let </span>ptr1 = ptr.cast::&lt;AlignedI64&gt;();
    <span class="kw">let </span>ptr2 = ptr.wrapping_add(<span class="number">1</span>).cast::&lt;AlignedI64&gt;();
    <span class="macro">assert!</span>(ptr1.is_aligned());
    <span class="macro">assert!</span>(!ptr2.is_aligned());
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%9B%BE%E5%85%83%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%E5%B0%8F%E4%BA%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E5%A4%A7%E5%B0%8F%E3%80%82%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%23%5Brepr(align(8))%5D%0Astruct+AlignedI64(i64);%0A%0Aconst+_:+()+=+%7B%0A++++let+ptr+=+40+as+*mut+AlignedI32;%0A++++assert!(ptr.is_aligned());%0A%0A++++//+%E5%AF%B9%E4%BA%8E%E5%85%B7%E6%9C%89%E5%B7%B2%E7%9F%A5%E5%9C%B0%E5%9D%80%E7%9A%84%E6%8C%87%E9%92%88%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E5%92%8C%E7%BC%96%E8%AF%91%E6%97%B6%E8%A1%8C%E4%B8%BA%E6%98%AF%E7%9B%B8%E5%90%8C%E7%9A%84%E3%80%82%0A++++let+ptr1+=+ptr.cast::%3CAlignedI64%3E();%0A++++let+ptr2+=+ptr.wrapping_add(1).cast::%3CAlignedI64%3E();%0A++++assert!(ptr1.is_aligned());%0A++++assert!(!ptr2.is_aligned());%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_aligned_to-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/104203" title="Tracking issue for const_pointer_is_aligned">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1852">source</a></span><h4 class="code-header">pub fn <a href="#method.is_aligned_to-1" class="fn">is_aligned_to</a>(self, align: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>pointer_is_aligned</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/96284">#96284</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›æŒ‡é’ˆæ˜¯å¦ä¸ <code>align</code> å¯¹é½ã€‚</p>
<p>å¯¹äºé <code>Sized</code> æŒ‡é’ˆï¼Œæ­¤æ“ä½œä»…è€ƒè™‘æ•°æ®æŒ‡é’ˆï¼Œè€Œå¿½ç•¥å…ƒæ•°æ®ã€‚</p>
<h5 id="panics-7"><a href="#panics-7">Panics</a></h5>
<p>å¦‚æœ <code>align</code> ä¸æ˜¯ 2 çš„å¹‚ (åŒ…æ‹¬ 0)ï¼Œå‡½æ•°ä¼šå‡ºç° panicã€‚</p>
<h5 id="examples-39"><a href="#examples-39">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(pointer_byte_offsets)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">let </span><span class="kw-2">mut </span>data = AlignedI32(<span class="number">42</span>);
<span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>data <span class="kw">as </span><span class="kw-2">*mut </span>AlignedI32;

<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
<span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));

<span class="macro">assert!</span>(ptr.wrapping_byte_add(<span class="number">2</span>).is_aligned_to(<span class="number">2</span>));
<span class="macro">assert!</span>(!ptr.wrapping_byte_add(<span class="number">2</span>).is_aligned_to(<span class="number">4</span>));

<span class="macro">assert_ne!</span>(ptr.is_aligned_to(<span class="number">8</span>), ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(pointer_byte_offsets)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Alet+mut+data+=+AlignedI32(42);%0Alet+ptr+=+%26mut+data+as+*mut+AlignedI32;%0A%0Aassert!(ptr.is_aligned_to(1));%0Aassert!(ptr.is_aligned_to(2));%0Aassert!(ptr.is_aligned_to(4));%0A%0Aassert!(ptr.wrapping_byte_add(2).is_aligned_to(2));%0Aassert!(!ptr.wrapping_byte_add(2).is_aligned_to(4));%0A%0Aassert_ne!(ptr.is_aligned_to(8),+ptr.wrapping_add(1).is_aligned_to(8));%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="åœ¨ç¼–è¯‘æ—¶-3"><a href="#åœ¨ç¼–è¯‘æ—¶-3">åœ¨ç¼–è¯‘æ—¶</a></h5>
<p><strong>Note: ç¼–è¯‘æ—¶çš„å¯¹é½æ˜¯å®éªŒæ€§çš„ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/rust-lang/rust/issues/104203">tracking issue</a>ã€‚</strong></p>
<p>åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“å€¼å°†åœ¨å†…å­˜ä¸­çš„ä½•å¤„ç»“æŸã€‚
åœ¨ç¼–è¯‘æ—¶å¯¹ä»å¼•ç”¨åˆ›å»ºçš„æŒ‡é’ˆè°ƒç”¨æ­¤å‡½æ•°å°†ä»…åœ¨ä¿è¯æŒ‡é’ˆå¯¹é½çš„æƒ…å†µä¸‹è¿”å› <code>true</code>ã€‚
è¿™æ„å‘³ç€æŒ‡é’ˆä¸èƒ½æ¯”å¼•ç”¨çš„åº•å±‚åˆ†é…æ›´ä¸¥æ ¼åœ°å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]
#![feature(const_mut_refs)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="kw">const _</span>: () = {
    <span class="kw">let </span><span class="kw-2">mut </span>data = AlignedI32(<span class="number">42</span>);
    <span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>data <span class="kw">as </span><span class="kw-2">*mut </span>AlignedI32;

    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));

    <span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œæˆ‘ä»¬ç¡®å®šæŒ‡é’ˆæ²¡æœ‰å¯¹é½åˆ° 8.
    </span><span class="macro">assert!</span>(!ptr.is_aligned_to(<span class="number">8</span>));
    <span class="macro">assert!</span>(!ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%23!%5Bfeature(const_mut_refs)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0Aconst+_:+()+=+%7B%0A++++let+mut+data+=+AlignedI32(42);%0A++++let+ptr+=+%26mut+data+as+*mut+AlignedI32;%0A%0A++++assert!(ptr.is_aligned_to(1));%0A++++assert!(ptr.is_aligned_to(2));%0A++++assert!(ptr.is_aligned_to(4));%0A%0A++++//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E7%A1%AE%E5%AE%9A%E6%8C%87%E9%92%88%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E5%88%B0+8.%0A++++assert!(!ptr.is_aligned_to(8));%0A++++assert!(!ptr.wrapping_add(1).is_aligned_to(8));%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>ç”±äºæ­¤è¡Œä¸ºï¼Œå³ä½¿ç¼–è¯‘æ—¶æŒ‡é’ˆæœªå¯¹é½ï¼Œæ´¾ç”Ÿè‡ªç¼–è¯‘æ—¶æŒ‡é’ˆçš„è¿è¡Œæ—¶æŒ‡é’ˆä¹Ÿå¯èƒ½å¯¹é½ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="comment">// åœ¨æŸäº›å¹³å°ä¸Šï¼Œi32 çš„å¯¹é½å°äº 4.
</span><span class="attr">#[repr(align(<span class="number">4</span>))]
</span><span class="kw">struct </span>AlignedI32(i32);

<span class="comment">// åœ¨ç¼–è¯‘æ—¶ï¼Œ`COMPTIME_PTR` å’Œ `COMPTIME_PTR + 1` éƒ½æ²¡æœ‰å¯¹é½ã€‚
// å¦è¯·æ³¨æ„ï¼Œå¯å˜å¼•ç”¨ä¸å…è®¸å‡ºç°åœ¨å¸¸é‡çš„æœ€ç»ˆå€¼ä¸­ã€‚
</span><span class="kw">const </span>COMPTIME_PTR: <span class="kw-2">*mut </span>AlignedI32 = (<span class="kw-2">&amp;</span>AlignedI32(<span class="number">42</span>) <span class="kw">as </span><span class="kw-2">*const </span>AlignedI32).cast_mut();
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.is_aligned_to(<span class="number">8</span>));
<span class="kw">const _</span>: () = <span class="macro">assert!</span>(!COMPTIME_PTR.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>));

<span class="comment">// åœ¨è¿è¡Œæ—¶ï¼Œ`runtime_ptr` æˆ– `runtime_ptr + 1` å¯¹é½ã€‚
</span><span class="kw">let </span>runtime_ptr = COMPTIME_PTR;
<span class="macro">assert_ne!</span>(
    runtime_ptr.is_aligned_to(<span class="number">8</span>),
    runtime_ptr.wrapping_add(<span class="number">1</span>).is_aligned_to(<span class="number">8</span>),
);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0A//+%E5%9C%A8%E6%9F%90%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8Ci32+%E7%9A%84%E5%AF%B9%E9%BD%90%E5%B0%8F%E4%BA%8E+4.%0Afn+main()+%7B%0A%23%5Brepr(align(4))%5D%0Astruct+AlignedI32(i32);%0A%0A//+%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%60COMPTIME_PTR%60+%E5%92%8C+%60COMPTIME_PTR+%2B+1%60+%E9%83%BD%E6%B2%A1%E6%9C%89%E5%AF%B9%E9%BD%90%E3%80%82%0A//+%E5%8F%A6%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%8C%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E4%B8%8D%E5%85%81%E8%AE%B8%E5%87%BA%E7%8E%B0%E5%9C%A8%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%80%E7%BB%88%E5%80%BC%E4%B8%AD%E3%80%82%0Aconst+COMPTIME_PTR:+*mut+AlignedI32+=+(%26AlignedI32(42)+as+*const+AlignedI32).cast_mut();%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.is_aligned_to(8));%0Aconst+_:+()+=+assert!(!COMPTIME_PTR.wrapping_add(1).is_aligned_to(8));%0A%0A//+%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%8C%60runtime_ptr%60+%E6%88%96+%60runtime_ptr+%2B+1%60+%E5%AF%B9%E9%BD%90%E3%80%82%0Alet+runtime_ptr+=+COMPTIME_PTR;%0Aassert_ne!(%0A++++runtime_ptr.is_aligned_to(8),%0A++++runtime_ptr.wrapping_add(1).is_aligned_to(8),%0A);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>å¦‚æœæŒ‡é’ˆæ˜¯ä»å›ºå®šåœ°å€åˆ›å»ºçš„ï¼Œåˆ™æ­¤å‡½æ•°åœ¨è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(pointer_is_aligned)]
#![feature(const_pointer_is_aligned)]

</span><span class="kw">const _</span>: () = {
    <span class="kw">let </span>ptr = <span class="number">40 </span><span class="kw">as </span><span class="kw-2">*mut </span>u8;
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">1</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">2</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">4</span>));
    <span class="macro">assert!</span>(ptr.is_aligned_to(<span class="number">8</span>));
    <span class="macro">assert!</span>(!ptr.is_aligned_to(<span class="number">16</span>));
};</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(pointer_is_aligned)%5D%0A%23!%5Bfeature(const_pointer_is_aligned)%5D%0A%0Afn+main()+%7B%0Aconst+_:+()+=+%7B%0A++++let+ptr+=+40+as+*mut+u8;%0A++++assert!(ptr.is_aligned_to(1));%0A++++assert!(ptr.is_aligned_to(2));%0A++++assert!(ptr.is_aligned_to(4));%0A++++assert!(ptr.is_aligned_to(8));%0A++++assert!(!ptr.is_aligned_to(16));%0A%7D;%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-*mut+%5BT%5D" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#1876">source</a><a href="#impl-*mut+%5BT%5D" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.slice.html">[T]</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.len-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/71146" title="Tracking issue for const_slice_ptr_len">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1896">source</a></span><h4 class="code-header">pub fn <a href="#method.len-1" class="fn">len</a>(self) -&gt; <a class="primitive" href="primitive.usize.html">usize</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_len</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/71146">#71146</a>)</span></div></span></summary><div class="docblock"><p>è¿”å›åŸå§‹åˆ‡ç‰‡çš„é•¿åº¦ã€‚</p>
<p>è¿”å›çš„å€¼æ˜¯ <strong>å…ƒç´ </strong> çš„æ•°é‡ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ã€‚</p>
<p>å³ä½¿åŸå§‹åˆ‡ç‰‡ç”±äºæŒ‡é’ˆä¸ºç©ºæˆ–æœªå¯¹é½è€Œæ— æ³•è½¬æ¢ä¸ºåˆ‡ç‰‡å¼•ç”¨ï¼Œæ­¤å‡½æ•°ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚</p>
<h5 id="examples-40"><a href="#examples-40">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_len)]
</span><span class="kw">use </span>std::ptr;

<span class="kw">let </span>slice: <span class="kw-2">*mut </span>[i8] = ptr::slice_from_raw_parts_mut(ptr::null_mut(), <span class="number">3</span>);
<span class="macro">assert_eq!</span>(slice.len(), <span class="number">3</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_len)%5D%0Afn+main()+%7B%0Ause+std::ptr;%0A%0Alet+slice:+*mut+%5Bi8%5D+=+ptr::slice_from_raw_parts_mut(ptr::null_mut(),+3);%0Aassert_eq!(slice.len(),+3);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_empty" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/71146" title="Tracking issue for const_slice_ptr_len">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#1914">source</a></span><h4 class="code-header">pub fn <a href="#method.is_empty" class="fn">is_empty</a>(self) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_len</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/71146">#71146</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœåŸå§‹åˆ‡ç‰‡çš„é•¿åº¦ä¸º 0.</p>
<h5 id="examples-41"><a href="#examples-41">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_len)]

</span><span class="kw">let </span><span class="kw-2">mut </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>a <span class="kw">as </span><span class="kw-2">*mut </span>[<span class="kw">_</span>];
<span class="macro">assert!</span>(!ptr.is_empty());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_len)%5D%0A%0Afn+main()+%7B%0Alet+mut+a+=+%5B1,+2,+3%5D;%0Alet+ptr+=+%26mut+a+as+*mut+%5B_%5D;%0Aassert!(!ptr.is_empty());%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.split_at_mut" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#1961">source</a><h4 class="code-header">pub unsafe fn <a href="#method.split_at_mut" class="fn">split_at_mut</a>(self, mid: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; (<a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.slice.html">[T]</a>, <a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.slice.html">[T]</a>)</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>raw_slice_split</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95595">#95595</a>)</span></div></span></summary><div class="docblock"><p>åœ¨ç´¢å¼•å¤„å°†ä¸€ä¸ªçº¿æ€§åŸå§‹åˆ‡ç‰‡åˆ†æˆä¸¤éƒ¨åˆ†ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå°†åŒ…å« <code>[0, mid)</code> çš„æ‰€æœ‰ç´¢å¼• (ä¸åŒ…æ‹¬ç´¢å¼• <code>mid</code> æœ¬èº«)ï¼Œç¬¬äºŒä¸ªå°†åŒ…å« <code>[mid, len)</code> çš„æ‰€æœ‰ç´¢å¼• (ä¸åŒ…æ‹¬ç´¢å¼• <code>len</code> æœ¬èº«)ã€‚</p>
<h5 id="panics-8"><a href="#panics-8">Panics</a></h5>
<p>å¦‚æœä¸º <code>mid &gt; len</code>ï¼Œå°±ä¼šå‡ºç° panicsã€‚</p>
<h5 id="safety-23"><a href="#safety-23">Safety</a></h5>
<p><code>mid</code> å¿…é¡»æ˜¯åº•å±‚ <a href="ptr/index.html#allocated-object" title="mod std::ptr">allocated object</a> çš„ <a href="#method.add">in-bounds</a>ã€‚
è¿™æ„å‘³ç€ <code>self</code> å¿…é¡»æ˜¯å¯è§£å¼•ç”¨çš„ï¼Œå¹¶ä¸”è·¨è¶Šä¸€ä¸ªè‡³å°‘ <code>mid * size_of::&lt;T&gt;()</code> å­—èŠ‚é•¿çš„åˆ†é…ã€‚
ä¸æ”¯æŒè¿™äº›è¦æ±‚æ˜¯ <em><a href="https://doc.rust-lang.org/reference/behavior-considered-undefined.html">undefined behavior</a></em>ï¼Œå³ä½¿ä¸ä½¿ç”¨ç»“æœæŒ‡é’ˆã€‚</p>
<p>ç”±äº <code>len</code> åœ¨è¾¹ç•Œå†…ï¼Œå®ƒä¸æ˜¯ <code>*mut [T]</code> çš„å®‰å…¨ä¸ï¼Œå˜ä½“ï¼Œå› æ­¤æ­¤æ–¹æ³•çš„å®‰å…¨è¦æ±‚ä¸ <a href="#method.split_at_mut_unchecked"><code>split_at_mut_unchecked</code></a> ç›¸åŒã€‚
æ˜¾å¼è¾¹ç•Œæ£€æŸ¥ä»…åœ¨ <code>len</code> æ­£ç¡®æ—¶æ‰æœ‰ç”¨ã€‚</p>
<h5 id="examples-42"><a href="#examples-42">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(raw_slice_split)]
#![feature(slice_ptr_get)]

</span><span class="kw">let </span><span class="kw-2">mut </span>v = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>];
<span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>v <span class="kw">as </span><span class="kw-2">*mut </span>[<span class="kw">_</span>];
<span class="kw">unsafe </span>{
    <span class="kw">let </span>(left, right) = ptr.split_at_mut(<span class="number">2</span>);
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;*</span>left, [<span class="number">1</span>, <span class="number">0</span>]);
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;*</span>right, [<span class="number">3</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>]);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(raw_slice_split)%5D%0A%23!%5Bfeature(slice_ptr_get)%5D%0A%0Afn+main()+%7B%0Alet+mut+v+=+%5B1,+0,+3,+0,+5,+6%5D;%0Alet+ptr+=+%26mut+v+as+*mut+%5B_%5D;%0Aunsafe+%7B%0A++++let+(left,+right)+=+ptr.split_at_mut(2);%0A++++assert_eq!(%26*left,+%5B1,+0%5D);%0A++++assert_eq!(%26*right,+%5B3,+0,+5,+6%5D);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.split_at_mut_unchecked" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2004">source</a><h4 class="code-header">pub unsafe fn <a href="#method.split_at_mut_unchecked" class="fn">split_at_mut_unchecked</a>(self, mid: <a class="primitive" href="primitive.usize.html">usize</a>) -&gt; (<a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.slice.html">[T]</a>, <a class="primitive" href="primitive.pointer.html">*mut </a><a class="primitive" href="primitive.slice.html">[T]</a>)</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>raw_slice_split</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/95595">#95595</a>)</span></div></span></summary><div class="docblock"><p>åœ¨ç´¢å¼•å¤„å°†ä¸€ä¸ªåŸå§‹åˆ‡ç‰‡åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œè€Œä¸è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå°†åŒ…å« <code>[0, mid)</code> çš„æ‰€æœ‰ç´¢å¼• (ä¸åŒ…æ‹¬ç´¢å¼• <code>mid</code> æœ¬èº«)ï¼Œç¬¬äºŒä¸ªå°†åŒ…å« <code>[mid, len)</code> çš„æ‰€æœ‰ç´¢å¼• (ä¸åŒ…æ‹¬ç´¢å¼• <code>len</code> æœ¬èº«)ã€‚</p>
<h5 id="safety-24"><a href="#safety-24">Safety</a></h5>
<p><code>mid</code> å¿…é¡»æ˜¯åº•å±‚ [allocated object] çš„ <a href="#method.add">in-bounds</a>ã€‚
è¿™æ„å‘³ç€ <code>self</code> å¿…é¡»æ˜¯å¯è§£å¼•ç”¨çš„ï¼Œå¹¶ä¸”è·¨è¶Šä¸€ä¸ªè‡³å°‘ <code>mid * size_of::&lt;T&gt;()</code> å­—èŠ‚é•¿çš„åˆ†é…ã€‚
ä¸æ”¯æŒè¿™äº›è¦æ±‚æ˜¯ <em><a href="https://doc.rust-lang.org/reference/behavior-considered-undefined.html">undefined behavior</a></em>ï¼Œå³ä½¿ä¸ä½¿ç”¨ç»“æœæŒ‡é’ˆã€‚</p>
<h5 id="examples-43"><a href="#examples-43">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(raw_slice_split)]

</span><span class="kw">let </span><span class="kw-2">mut </span>v = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>];
<span class="comment">// é™åˆ¶å€Ÿç”¨çš„ç”Ÿå‘½å‘¨æœŸ
</span><span class="kw">unsafe </span>{
    <span class="kw">let </span>ptr = <span class="kw-2">&amp;mut </span>v <span class="kw">as </span><span class="kw-2">*mut </span>[<span class="kw">_</span>];
    <span class="kw">let </span>(left, right) = ptr.split_at_mut_unchecked(<span class="number">2</span>);
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;*</span>left, [<span class="number">1</span>, <span class="number">0</span>]);
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;*</span>right, [<span class="number">3</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">6</span>]);
    (<span class="kw-2">&amp;mut *</span>left)[<span class="number">1</span>] = <span class="number">2</span>;
    (<span class="kw-2">&amp;mut *</span>right)[<span class="number">1</span>] = <span class="number">4</span>;
}
<span class="macro">assert_eq!</span>(v, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(raw_slice_split)%5D%0A%0Afn+main()+%7B%0Alet+mut+v+=+%5B1,+0,+3,+0,+5,+6%5D;%0A//+%E9%99%90%E5%88%B6%E5%80%9F%E7%94%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%0Aunsafe+%7B%0A++++let+ptr+=+%26mut+v+as+*mut+%5B_%5D;%0A++++let+(left,+right)+=+ptr.split_at_mut_unchecked(2);%0A++++assert_eq!(%26*left,+%5B1,+0%5D);%0A++++assert_eq!(%26*right,+%5B3,+0,+5,+6%5D);%0A++++(%26mut+*left)%5B1%5D+=+2;%0A++++(%26mut+*right)%5B1%5D+=+4;%0A%7D%0Aassert_eq!(v,+%5B1,+2,+3,+4,+5,+6%5D);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_mut_ptr" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/74265" title="Tracking issue for slice_ptr_get">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#2032">source</a></span><h4 class="code-header">pub fn <a href="#method.as_mut_ptr" class="fn">as_mut_ptr</a>(self) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_get</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/74265">#74265</a>)</span></div></span></summary><div class="docblock"><p>å°†è£¸æŒ‡é’ˆè¿”å›åˆ°åˆ‡ç‰‡çš„ç¼“å†²åŒºã€‚</p>
<p>è¿™ç­‰æ•ˆäºå°† <code>self</code> å¼ºåˆ¶è½¬æ¢ä¸º <code>*mut T</code>ï¼Œä½†ç±»å‹å®‰å…¨æ€§æ›´é«˜ã€‚</p>
<h5 id="examples-44"><a href="#examples-44">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_get)]
</span><span class="kw">use </span>std::ptr;

<span class="kw">let </span>slice: <span class="kw-2">*mut </span>[i8] = ptr::slice_from_raw_parts_mut(ptr::null_mut(), <span class="number">3</span>);
<span class="macro">assert_eq!</span>(slice.as_mut_ptr(), ptr::null_mut());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_get)%5D%0Afn+main()+%7B%0Ause+std::ptr;%0A%0Alet+slice:+*mut+%5Bi8%5D+=+ptr::slice_from_raw_parts_mut(ptr::null_mut(),+3);%0Aassert_eq!(slice.as_mut_ptr(),+ptr::null_mut());%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_unchecked_mut" class="method"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2058-2060">source</a><h4 class="code-header">pub unsafe fn <a href="#method.get_unchecked_mut" class="fn">get_unchecked_mut</a>&lt;I&gt;(
    self,
    index: I
) -&gt; <a class="primitive" href="primitive.pointer.html">*mut </a>&lt;I as <a class="trait" href="slice/trait.SliceIndex.html" title="trait std::slice::SliceIndex">SliceIndex</a>&lt;<a class="primitive" href="primitive.slice.html">[T]</a>&gt;&gt;::<a class="associatedtype" href="slice/trait.SliceIndex.html#associatedtype.Output" title="type std::slice::SliceIndex::Output">Output</a><span class="where fmt-newline">where
    I: <a class="trait" href="slice/trait.SliceIndex.html" title="trait std::slice::SliceIndex">SliceIndex</a>&lt;<a class="primitive" href="primitive.slice.html">[T]</a>&gt;,</span></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>slice_ptr_get</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/74265">#74265</a>)</span></div></span></summary><div class="docblock"><p>å°†è£¸æŒ‡é’ˆè¿”å›åˆ°å…ƒç´ æˆ–å­åˆ‡ç‰‡ï¼Œè€Œä¸è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚</p>
<p>ä½¿ç”¨ <a href="#method.add">out-of-bounds index</a> æˆ–å½“ <code>self</code> ä¸å¯è§£å¼•ç”¨æ—¶è°ƒç”¨æ­¤æ–¹æ³•æ˜¯ <em><a href="https://doc.rust-lang.org/reference/behavior-considered-undefined.html">undefined behavior</a></em>ï¼Œå³ä½¿æœªä½¿ç”¨ç»“æœæŒ‡é’ˆã€‚</p>
<h5 id="examples-45"><a href="#examples-45">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(slice_ptr_get)]

</span><span class="kw">let </span>x = <span class="kw-2">&amp;mut </span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>] <span class="kw">as </span><span class="kw-2">*mut </span>[i32];

<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(x.get_unchecked_mut(<span class="number">1</span>), x.as_mut_ptr().add(<span class="number">1</span>));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(slice_ptr_get)%5D%0A%0Afn+main()+%7B%0Alet+x+=+%26mut+%5B1,+2,+4%5D+as+*mut+%5Bi32%5D;%0A%0Aunsafe+%7B%0A++++assert_eq!(x.get_unchecked_mut(1),+x.as_mut_ptr().add(1));%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_slice-1" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#2109">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_slice-1" class="fn">as_uninit_slice</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a [<a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å›å…±äº«åˆ‡ç‰‡åˆ° <code>Some</code> ä¸­åŒ…è£…çš„å€¼ã€‚
ä¸ <a href="#method.as_ref-1"><code>as_ref</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºå¯å˜çš„å¯¹åº”ç‰©ï¼Œè¯·å‚è§ <a href="#method.as_uninit_slice_mut"><code>as_uninit_slice_mut</code></a>ã€‚</p>
<h5 id="safety-25"><a href="#safety-25">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»ä¸º <a href="ptr/index.html#safety" title="mod std::ptr">æœ‰æ•ˆ</a> çš„ï¼Œæ‰èƒ½è¯»å–è®¸å¤šå­—èŠ‚çš„ <code>ptr.len() * mem::size_of::&lt;T&gt;()</code>ï¼Œå¹¶ä¸”å¿…é¡»æ­£ç¡®å¯¹é½ã€‚è¿™å°¤å…¶æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>æ•´ä¸ªå†…å­˜èŒƒå›´å¿…é¡»åŒ…å«åœ¨å•ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> å†…ï¼
åˆ‡ç‰‡æ°¸è¿œä¸èƒ½è·¨è¶Šå¤šä¸ªåˆ†é…çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å³ä½¿å¯¹äºé›¶é•¿åº¦çš„åˆ‡ç‰‡ï¼ŒæŒ‡é’ˆä¹Ÿå¿…é¡»å¯¹é½ã€‚
è¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œæšä¸¾å¸ƒå±€ä¼˜åŒ–å¯èƒ½ä¾èµ–äºå¯¹é½çš„å¼•ç”¨ (åŒ…æ‹¬ä»»ä½•é•¿åº¦çš„åˆ‡ç‰‡) å’Œéç©ºå€¼ï¼Œä»¥å°†å®ƒä»¬ä¸å…¶ä»–æ•°æ®åŒºåˆ†å¼€ã€‚</p>
</li>
</ul>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <a href="ptr/struct.NonNull.html#method.dangling" title="associated function std::ptr::NonNull::dangling"><code>NonNull::dangling()</code></a> è·å¾—å¯ç”¨ä½œé›¶é•¿åº¦åˆ‡ç‰‡çš„ <code>data</code> çš„æŒ‡é’ˆã€‚</p>
</li>
<li>
<p>åˆ‡ç‰‡çš„æ€»å¤§å° <code>ptr.len() * mem::size_of::&lt;T&gt;()</code> ä¸èƒ½å¤§äº <code>isize::MAX</code>ã€‚
è¯·å‚è§ <a href="primitive.pointer.html#method.offset" title="method pointer::offset"><code>pointer::offset</code></a> çš„å®‰å…¨æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½å‘ç”Ÿå¯å˜ (<code>UnsafeCell</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
<p>å¦è¯·å‚è§ <a href="slice/fn.from_raw_parts.html" title="fn std::slice::from_raw_parts"><code>slice::from_raw_parts</code></a>ã€‚</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_uninit_slice_mut" class="method"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91822" title="Tracking issue for const_ptr_as_ref">unstable</a></span> Â· <a class="srclink" href="../src/core/ptr/mut_ptr.rs.html#2161">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.as_uninit_slice_mut" class="fn">as_uninit_slice_mut</a>&lt;'a&gt;(self) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;&amp;'a mut [<a class="union" href="mem/union.MaybeUninit.html" title="union std::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>ptr_as_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/75402">#75402</a>)</span></div></span></summary><div class="docblock"><p>å¦‚æœæŒ‡é’ˆä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªå”¯ä¸€çš„åˆ‡ç‰‡åˆ° <code>Some</code> ä¸­åŒ…è£…çš„å€¼ã€‚
ä¸ <a href="#method.as_mut"><code>as_mut</code></a> ç›¸æ¯”ï¼Œè¿™ä¸éœ€è¦å°†è¯¥å€¼åˆå§‹åŒ–ã€‚</p>
<p>æœ‰å…³å…±äº«å‰¯æœ¬ï¼Œè¯·å‚è§ <a href="#method.as_uninit_slice-1"><code>as_uninit_slice</code></a>ã€‚</p>
<h5 id="safety-26"><a href="#safety-26">Safety</a></h5>
<p>è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¦ä¹ˆæŒ‡é’ˆæ˜¯ç©ºçš„ï¼Œè¦ä¹ˆä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½ä¸º trueï¼š</p>
<ul>
<li>
<p>æŒ‡é’ˆå¿…é¡»æ˜¯ <a href="ptr/index.html#safety" title="mod std::ptr">æœ‰æ•ˆ</a> çš„æ‰èƒ½è¿›è¡Œ <code>ptr.len() * mem::size_of::&lt;T&gt;()</code> å¤šä¸ªå­—èŠ‚çš„è¯»å–å’Œå†™å…¥ï¼Œå¹¶ä¸”å¿…é¡»æ­£ç¡®å¯¹é½ã€‚è¿™å°¤å…¶æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>æ•´ä¸ªå†…å­˜èŒƒå›´å¿…é¡»åŒ…å«åœ¨å•ä¸ª <a href="ptr/index.html#allocated-object" title="mod std::ptr">åˆ†é…å¯¹è±¡</a> å†…ï¼
åˆ‡ç‰‡æ°¸è¿œä¸èƒ½è·¨è¶Šå¤šä¸ªåˆ†é…çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å³ä½¿å¯¹äºé›¶é•¿åº¦çš„åˆ‡ç‰‡ï¼ŒæŒ‡é’ˆä¹Ÿå¿…é¡»å¯¹é½ã€‚
è¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œæšä¸¾å¸ƒå±€ä¼˜åŒ–å¯èƒ½ä¾èµ–äºå¯¹é½çš„å¼•ç”¨ (åŒ…æ‹¬ä»»ä½•é•¿åº¦çš„åˆ‡ç‰‡) å’Œéç©ºå€¼ï¼Œä»¥å°†å®ƒä»¬ä¸å…¶ä»–æ•°æ®åŒºåˆ†å¼€ã€‚</p>
</li>
</ul>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <a href="ptr/struct.NonNull.html#method.dangling" title="associated function std::ptr::NonNull::dangling"><code>NonNull::dangling()</code></a> è·å¾—å¯ç”¨ä½œé›¶é•¿åº¦åˆ‡ç‰‡çš„ <code>data</code> çš„æŒ‡é’ˆã€‚</p>
</li>
<li>
<p>åˆ‡ç‰‡çš„æ€»å¤§å° <code>ptr.len() * mem::size_of::&lt;T&gt;()</code> ä¸èƒ½å¤§äº <code>isize::MAX</code>ã€‚
è¯·å‚è§ <a href="primitive.pointer.html#method.offset" title="method pointer::offset"><code>pointer::offset</code></a> çš„å®‰å…¨æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>æ‚¨å¿…é¡»æ‰§è¡Œ Rust çš„åˆ«åè§„åˆ™ï¼Œå› ä¸ºè¿”å›çš„ç”Ÿå‘½å‘¨æœŸ <code>'a</code> æ˜¯ä»»æ„é€‰æ‹©çš„ï¼Œä¸ä¸€å®šåæ˜ æ•°æ®çš„å®é™…ç”Ÿå‘½å‘¨æœŸã€‚
ç‰¹åˆ«æ˜¯ï¼Œå½“è¿™ä¸ªå¼•ç”¨å­˜åœ¨æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸èƒ½é€šè¿‡ä»»ä½•å…¶ä»–æŒ‡é’ˆè®¿é—® (è¯»å–æˆ–å†™å…¥)ã€‚</p>
</li>
</ul>
<p>å³ä½¿æœªä½¿ç”¨æ­¤æ–¹æ³•çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼</p>
<p>å¦è¯·å‚è§ <a href="slice/fn.from_raw_parts_mut.html" title="fn std::slice::from_raw_parts_mut"><code>slice::from_raw_parts_mut</code></a>ã€‚</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">Â§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Clone-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/clone.rs.html#205">source</a><a href="#impl-Clone-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="clone/trait.Clone.html" title="trait std::clone::Clone">Clone</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.clone-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/clone.rs.html#207">source</a><a href="#method.clone-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&amp;self) -&gt; <a class="primitive" href="primitive.pointer.html">*const T</a></h4></section></summary><div class='docblock'>è¿”å›å€¼çš„å‰¯æœ¬ã€‚ <a href="clone/trait.Clone.html#tymethod.clone">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_from-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/clone.rs.html#129">source</a><a href="#method.clone_from-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&amp;mut self, source: <a class="primitive" href="primitive.reference.html">&amp;Self</a>)</h4></section></summary><div class='docblock'>ä» <code>source</code> æ‰§è¡Œå¤åˆ¶åˆ†é…ã€‚ <a href="clone/trait.Clone.html#method.clone_from">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Clone-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/clone.rs.html#213">source</a><a href="#impl-Clone-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="clone/trait.Clone.html" title="trait std::clone::Clone">Clone</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl"><a class="srclink rightside" href="../src/core/clone.rs.html#215">source</a><a href="#method.clone" class="anchor">Â§</a><h4 class="code-header">fn <a href="clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&amp;self) -&gt; <a class="primitive" href="primitive.pointer.html">*mut T</a></h4></section></summary><div class='docblock'>è¿”å›å€¼çš„å‰¯æœ¬ã€‚ <a href="clone/trait.Clone.html#tymethod.clone">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl"><a class="srclink rightside" href="../src/core/clone.rs.html#129">source</a><a href="#method.clone_from" class="anchor">Â§</a><h4 class="code-header">fn <a href="clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&amp;mut self, source: <a class="primitive" href="primitive.reference.html">&amp;Self</a>)</h4></section></summary><div class='docblock'>ä» <code>source</code> æ‰§è¡Œå¤åˆ¶åˆ†é…ã€‚ <a href="clone/trait.Clone.html#method.clone_from">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2433">source</a><a href="#impl-Debug-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="fmt/trait.Debug.html" title="trait std::fmt::Debug">Debug</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-2" class="method trait-impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2434">source</a><a href="#method.fmt-2" class="anchor">Â§</a><h4 class="code-header">fn <a href="fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="fmt/struct.Formatter.html" title="struct std::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;<a class="primitive" href="primitive.unit.html">()</a>, <a class="struct" href="fmt/struct.Error.html" title="struct std::fmt::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>ä½¿ç”¨ç»™å®šçš„æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–è¯¥å€¼ã€‚ <a href="fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2439">source</a><a href="#impl-Debug-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="fmt/trait.Debug.html" title="trait std::fmt::Debug">Debug</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-3" class="method trait-impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2440">source</a><a href="#method.fmt-3" class="anchor">Â§</a><h4 class="code-header">fn <a href="fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="fmt/struct.Formatter.html" title="struct std::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;<a class="primitive" href="primitive.unit.html">()</a>, <a class="struct" href="fmt/struct.Error.html" title="struct std::fmt::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>ä½¿ç”¨ç»™å®šçš„æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–è¯¥å€¼ã€‚ <a href="fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3C*mut+T%3E-for-AtomicPtr%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.23.0">1.23.0</span> Â· <a class="srclink" href="../src/core/sync/atomic.rs.html#1935">source</a></span><a href="#impl-From%3C*mut+T%3E-for-AtomicPtr%3CT%3E" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="convert/trait.From.html" title="trait std::convert::From">From</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut T</a>&gt; for <a class="struct" href="sync/atomic/struct.AtomicPtr.html" title="struct std::sync::atomic::AtomicPtr">AtomicPtr</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="srclink rightside" href="../src/core/sync/atomic.rs.html#1938">source</a><a href="#method.from" class="anchor">Â§</a><h4 class="code-header">fn <a href="convert/trait.From.html#tymethod.from" class="fn">from</a>(p: <a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="struct" href="sync/atomic/struct.AtomicPtr.html" title="struct std::sync::atomic::AtomicPtr">AtomicPtr</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>å°† <code>*mut T</code> è½¬æ¢ä¸º <code>AtomicPtr&lt;T&gt;</code>ã€‚</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Hash-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/hash/mod.rs.html#958">source</a><a href="#impl-Hash-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="hash/trait.Hash.html" title="trait std::hash::Hash">Hash</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hash" class="method trait-impl"><a class="srclink rightside" href="../src/core/hash/mod.rs.html#960">source</a><a href="#method.hash" class="anchor">Â§</a><h4 class="code-header">fn <a href="hash/trait.Hash.html#tymethod.hash" class="fn">hash</a>&lt;H&gt;(&amp;self, state: <a class="primitive" href="primitive.reference.html">&amp;mut H</a>)<span class="where fmt-newline">where
    H: <a class="trait" href="hash/trait.Hasher.html" title="trait std::hash::Hasher">Hasher</a>,</span></h4></section></summary><div class='docblock'>å°†è¯¥å€¼è¾“å…¥ç»™å®šçš„ <a href="hash/trait.Hasher.html" title="trait std::hash::Hasher"><code>Hasher</code></a>ã€‚ <a href="hash/trait.Hash.html#tymethod.hash">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.hash_slice" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.3.0">1.3.0</span> Â· <a class="srclink" href="../src/core/hash/mod.rs.html#237-239">source</a></span><a href="#method.hash_slice" class="anchor">Â§</a><h4 class="code-header">fn <a href="hash/trait.Hash.html#method.hash_slice" class="fn">hash_slice</a>&lt;H&gt;(data: &amp;<a class="primitive" href="primitive.slice.html">[Self]</a>, state: <a class="primitive" href="primitive.reference.html">&amp;mut H</a>)<span class="where fmt-newline">where
    H: <a class="trait" href="hash/trait.Hasher.html" title="trait std::hash::Hasher">Hasher</a>,
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>å°†è¿™ç§ç±»å‹çš„åˆ‡ç‰‡é€å…¥ç»™å®šçš„ <a href="hash/trait.Hasher.html" title="trait std::hash::Hasher"><code>Hasher</code></a> ä¸­ã€‚ <a href="hash/trait.Hash.html#method.hash_slice">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Hash-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/hash/mod.rs.html#968">source</a><a href="#impl-Hash-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="hash/trait.Hash.html" title="trait std::hash::Hash">Hash</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hash-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/hash/mod.rs.html#970">source</a><a href="#method.hash-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="hash/trait.Hash.html#tymethod.hash" class="fn">hash</a>&lt;H&gt;(&amp;self, state: <a class="primitive" href="primitive.reference.html">&amp;mut H</a>)<span class="where fmt-newline">where
    H: <a class="trait" href="hash/trait.Hasher.html" title="trait std::hash::Hasher">Hasher</a>,</span></h4></section></summary><div class='docblock'>å°†è¯¥å€¼è¾“å…¥ç»™å®šçš„ <a href="hash/trait.Hasher.html" title="trait std::hash::Hasher"><code>Hasher</code></a>ã€‚ <a href="hash/trait.Hash.html#tymethod.hash">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.hash_slice-1" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.3.0">1.3.0</span> Â· <a class="srclink" href="../src/core/hash/mod.rs.html#237-239">source</a></span><a href="#method.hash_slice-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="hash/trait.Hash.html#method.hash_slice" class="fn">hash_slice</a>&lt;H&gt;(data: &amp;<a class="primitive" href="primitive.slice.html">[Self]</a>, state: <a class="primitive" href="primitive.reference.html">&amp;mut H</a>)<span class="where fmt-newline">where
    H: <a class="trait" href="hash/trait.Hasher.html" title="trait std::hash::Hasher">Hasher</a>,
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>å°†è¿™ç§ç±»å‹çš„åˆ‡ç‰‡é€å…¥ç»™å®šçš„ <a href="hash/trait.Hasher.html" title="trait std::hash::Hasher"><code>Hasher</code></a> ä¸­ã€‚ <a href="hash/trait.Hash.html#method.hash_slice">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Ord-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1734">source</a><a href="#impl-Ord-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.Ord.html" title="trait std::cmp::Ord">Ord</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.cmp" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1736">source</a><a href="#method.cmp" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#tymethod.cmp" class="fn">cmp</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="enum" href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering">Ordering</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•è¿”å› <code>self</code> å’Œ <code>other</code> ä¹‹é—´çš„ <a href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering"><code>Ordering</code></a>ã€‚ <a href="cmp/trait.Ord.html#tymethod.cmp">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.max" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#790-792">source</a></span><a href="#method.max" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.max" class="fn">max</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>æ¯”è¾ƒå¹¶è¿”å›ä¸¤ä¸ªå€¼ä¸­çš„æœ€å¤§å€¼ã€‚ <a href="cmp/trait.Ord.html#method.max">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.min" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#810-812">source</a></span><a href="#method.min" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.min" class="fn">min</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>æ¯”è¾ƒå¹¶è¿”å›ä¸¤ä¸ªå€¼ä¸­çš„æœ€å°å€¼ã€‚ <a href="cmp/trait.Ord.html#method.min">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clamp" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.50.0">1.50.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#835-838">source</a></span><a href="#method.clamp" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.clamp" class="fn">clamp</a>(self, min: Self, max: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a> + <a class="trait" href="cmp/trait.PartialOrd.html" title="trait std::cmp::PartialOrd">PartialOrd</a>&lt;Self&gt;,</span></h4></section></summary><div class='docblock'>å°†å€¼é™åˆ¶åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ã€‚ <a href="cmp/trait.Ord.html#method.clamp">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Ord-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2184">source</a><a href="#impl-Ord-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.Ord.html" title="trait std::cmp::Ord">Ord</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.cmp-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2186">source</a><a href="#method.cmp-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#tymethod.cmp" class="fn">cmp</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="enum" href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering">Ordering</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•è¿”å› <code>self</code> å’Œ <code>other</code> ä¹‹é—´çš„ <a href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering"><code>Ordering</code></a>ã€‚ <a href="cmp/trait.Ord.html#tymethod.cmp">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.max-1" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#790-792">source</a></span><a href="#method.max-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.max" class="fn">max</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>æ¯”è¾ƒå¹¶è¿”å›ä¸¤ä¸ªå€¼ä¸­çš„æœ€å¤§å€¼ã€‚ <a href="cmp/trait.Ord.html#method.max">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.min-1" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#810-812">source</a></span><a href="#method.min-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.min" class="fn">min</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>æ¯”è¾ƒå¹¶è¿”å›ä¸¤ä¸ªå€¼ä¸­çš„æœ€å°å€¼ã€‚ <a href="cmp/trait.Ord.html#method.min">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clamp-1" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.50.0">1.50.0</span> Â· <a class="srclink" href="../src/core/cmp.rs.html#835-838">source</a></span><a href="#method.clamp-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.Ord.html#method.clamp" class="fn">clamp</a>(self, min: Self, max: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a> + <a class="trait" href="cmp/trait.PartialOrd.html" title="trait std::cmp::PartialOrd">PartialOrd</a>&lt;Self&gt;,</span></h4></section></summary><div class='docblock'>å°†å€¼é™åˆ¶åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ã€‚ <a href="cmp/trait.Ord.html#method.clamp">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialEq%3C*const+T%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1722">source</a><a href="#impl-PartialEq%3C*const+T%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.PartialEq.html" title="trait std::cmp::PartialEq">PartialEq</a>&lt;<a class="primitive" href="primitive.pointer.html">*const T</a>&gt; for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.eq-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1724">source</a><a href="#method.eq-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialEq.html#tymethod.eq" class="fn">eq</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯• <code>self</code> å’Œ <code>other</code> å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ç”± <code>==</code> ä½¿ç”¨ã€‚</div></details><details class="toggle method-toggle" open><summary><section id="method.ne-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/cmp.rs.html#226">source</a><a href="#method.ne-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialEq.html#method.ne" class="fn">ne</a>(&amp;self, other: <a class="primitive" href="primitive.reference.html">&amp;Rhs</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯• <code>!=</code>ã€‚
é»˜è®¤å®ç°å‡ ä¹æ€»æ˜¯è¶³å¤Ÿçš„ï¼Œå¹¶ä¸”ä¸åº”åœ¨æ²¡æœ‰å……åˆ†ç†ç”±çš„æƒ…å†µä¸‹è¢«è¦†ç›–ã€‚</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialEq%3C*mut+T%3E-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2173">source</a><a href="#impl-PartialEq%3C*mut+T%3E-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.PartialEq.html" title="trait std::cmp::PartialEq">PartialEq</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut T</a>&gt; for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.eq" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2175">source</a><a href="#method.eq" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialEq.html#tymethod.eq" class="fn">eq</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯• <code>self</code> å’Œ <code>other</code> å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ç”± <code>==</code> ä½¿ç”¨ã€‚</div></details><details class="toggle method-toggle" open><summary><section id="method.ne" class="method trait-impl"><a class="srclink rightside" href="../src/core/cmp.rs.html#226">source</a><a href="#method.ne" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialEq.html#method.ne" class="fn">ne</a>(&amp;self, other: <a class="primitive" href="primitive.reference.html">&amp;Rhs</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯• <code>!=</code>ã€‚
é»˜è®¤å®ç°å‡ ä¹æ€»æ˜¯è¶³å¤Ÿçš„ï¼Œå¹¶ä¸”ä¸åº”åœ¨æ²¡æœ‰å……åˆ†ç†ç”±çš„æƒ…å†µä¸‹è¢«è¦†ç›–ã€‚</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialOrd%3C*const+T%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1748">source</a><a href="#impl-PartialOrd%3C*const+T%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.PartialOrd.html" title="trait std::cmp::PartialOrd">PartialOrd</a>&lt;<a class="primitive" href="primitive.pointer.html">*const T</a>&gt; for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.partial_cmp-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1750">source</a><a href="#method.partial_cmp-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#tymethod.partial_cmp" class="fn">partial_cmp</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="enum" href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering">Ordering</a>&gt;</h4></section></summary><div class='docblock'>å¦‚æœå­˜åœ¨ï¼Œåˆ™æ­¤æ–¹æ³•è¿”å› <code>self</code> å’Œ <code>other</code> å€¼ä¹‹é—´çš„é¡ºåºã€‚ <a href="cmp/trait.PartialOrd.html#tymethod.partial_cmp">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.lt-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1755">source</a><a href="#method.lt-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.lt" class="fn">lt</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•çš„å†…å®¹å°‘äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&lt;</code> æ“ä½œå‘˜ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.lt">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.le-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1760">source</a><a href="#method.le-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.le" class="fn">le</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•å°äºæˆ–ç­‰äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&lt;=</code> è¿ç®—ç¬¦ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.le">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.gt-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1765">source</a><a href="#method.gt-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.gt" class="fn">gt</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•å¤§äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&gt;</code> æ“ä½œå‘˜ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.gt">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.ge-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1770">source</a><a href="#method.ge-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.ge" class="fn">ge</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*const T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•æ˜¯å¦å¤§äºæˆ–ç­‰äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&gt;=</code> è¿ç®—ç¬¦ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.ge">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialOrd%3C*mut+T%3E-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2198">source</a><a href="#impl-PartialOrd%3C*mut+T%3E-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.PartialOrd.html" title="trait std::cmp::PartialOrd">PartialOrd</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut T</a>&gt; for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.partial_cmp" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2200">source</a><a href="#method.partial_cmp" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#tymethod.partial_cmp" class="fn">partial_cmp</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="enum" href="option/enum.Option.html" title="enum std::option::Option">Option</a>&lt;<a class="enum" href="cmp/enum.Ordering.html" title="enum std::cmp::Ordering">Ordering</a>&gt;</h4></section></summary><div class='docblock'>å¦‚æœå­˜åœ¨ï¼Œåˆ™æ­¤æ–¹æ³•è¿”å› <code>self</code> å’Œ <code>other</code> å€¼ä¹‹é—´çš„é¡ºåºã€‚ <a href="cmp/trait.PartialOrd.html#tymethod.partial_cmp">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.lt" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2205">source</a><a href="#method.lt" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.lt" class="fn">lt</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•çš„å†…å®¹å°‘äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&lt;</code> æ“ä½œå‘˜ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.lt">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.le" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2210">source</a><a href="#method.le" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.le" class="fn">le</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•å°äºæˆ–ç­‰äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&lt;=</code> è¿ç®—ç¬¦ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.le">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.gt" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2215">source</a><a href="#method.gt" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.gt" class="fn">gt</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•å¤§äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&gt;</code> æ“ä½œå‘˜ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.gt">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.ge" class="method trait-impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2220">source</a><a href="#method.ge" class="anchor">Â§</a><h4 class="code-header">fn <a href="cmp/trait.PartialOrd.html#method.ge" class="fn">ge</a>(&amp;self, other: &amp;<a class="primitive" href="primitive.pointer.html">*mut T</a>) -&gt; <a class="primitive" href="primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>æ­¤æ–¹æ³•æµ‹è¯•æ˜¯å¦å¤§äºæˆ–ç­‰äº (å¯¹äº <code>self</code> å’Œ <code>other</code>)ï¼Œå¹¶ä¸”ç”± <code>&gt;=</code> è¿ç®—ç¬¦ä½¿ç”¨ã€‚ <a href="cmp/trait.PartialOrd.html#method.ge">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Pointer-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2370">source</a><a href="#impl-Pointer-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="fmt/trait.Pointer.html" title="trait std::fmt::Pointer">Pointer</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2371">source</a><a href="#method.fmt-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="fmt/trait.Pointer.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="fmt/struct.Formatter.html" title="struct std::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;<a class="primitive" href="primitive.unit.html">()</a>, <a class="struct" href="fmt/struct.Error.html" title="struct std::fmt::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>ä½¿ç”¨ç»™å®šçš„æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–è¯¥å€¼ã€‚</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Pointer-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2410">source</a><a href="#impl-Pointer-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="fmt/trait.Pointer.html" title="trait std::fmt::Pointer">Pointer</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="srclink rightside" href="../src/core/fmt/mod.rs.html#2411">source</a><a href="#method.fmt" class="anchor">Â§</a><h4 class="code-header">fn <a href="fmt/trait.Pointer.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="fmt/struct.Formatter.html" title="struct std::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;<a class="primitive" href="primitive.unit.html">()</a>, <a class="struct" href="fmt/struct.Error.html" title="struct std::fmt::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>ä½¿ç”¨ç»™å®šçš„æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–è¯¥å€¼ã€‚</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SimdElement-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/portable-simd/crates/core_simd/src/vector.rs.html#1010">source</a><a href="#impl-SimdElement-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="simd/trait.SimdElement.html" title="trait std::simd::SimdElement">SimdElement</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&lt;Metadata = <a class="primitive" href="primitive.unit.html">()</a>&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Mask" class="associatedtype trait-impl"><a href="#associatedtype.Mask" class="anchor">Â§</a><h4 class="code-header">type <a href="simd/trait.SimdElement.html#associatedtype.Mask" class="associatedtype">Mask</a> = <a class="primitive" href="primitive.isize.html">isize</a></h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>portable_simd</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/86656">#86656</a>)</span></div></span><div class='docblock'>æ­¤å…ƒç´ ç±»å‹å¯¹åº”çš„æ©ç å…ƒç´ ç±»å‹ã€‚</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-SimdElement-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/portable-simd/crates/core_simd/src/vector.rs.html#1022">source</a><a href="#impl-SimdElement-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="simd/trait.SimdElement.html" title="trait std::simd::SimdElement">SimdElement</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&lt;Metadata = <a class="primitive" href="primitive.unit.html">()</a>&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Mask-1" class="associatedtype trait-impl"><a href="#associatedtype.Mask-1" class="anchor">Â§</a><h4 class="code-header">type <a href="simd/trait.SimdElement.html#associatedtype.Mask" class="associatedtype">Mask</a> = <a class="primitive" href="primitive.isize.html">isize</a></h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span><span>This is a nightly-only experimental API. (<code>portable_simd</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/86656">#86656</a>)</span></div></span><div class='docblock'>æ­¤å…ƒç´ ç±»å‹å¯¹åº”çš„æ©ç å…ƒç´ ç±»å‹ã€‚</div></details></div></details><section id="impl-CoerceUnsized%3C*const+U%3E-for-%26'a+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#58">source</a><a href="#impl-CoerceUnsized%3C*const+U%3E-for-%26'a+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;'a, T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*const U</a>&gt; for <a class="primitive" href="primitive.reference.html">&amp;'a T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-CoerceUnsized%3C*const+U%3E-for-%26'a+mut+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#51">source</a><a href="#impl-CoerceUnsized%3C*const+U%3E-for-%26'a+mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;'a, T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*const U</a>&gt; for <a class="primitive" href="primitive.reference.html">&amp;'a mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-CoerceUnsized%3C*const+U%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#69">source</a><a href="#impl-CoerceUnsized%3C*const+U%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*const U</a>&gt; for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-CoerceUnsized%3C*const+U%3E-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#65">source</a><a href="#impl-CoerceUnsized%3C*const+U%3E-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*const U</a>&gt; for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-CoerceUnsized%3C*mut+U%3E-for-%26'a+mut+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#48">source</a><a href="#impl-CoerceUnsized%3C*mut+U%3E-for-%26'a+mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;'a, T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut U</a>&gt; for <a class="primitive" href="primitive.reference.html">&amp;'a mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-CoerceUnsized%3C*mut+U%3E-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#62">source</a><a href="#impl-CoerceUnsized%3C*mut+U%3E-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="ops/trait.CoerceUnsized.html" title="trait std::ops::CoerceUnsized">CoerceUnsized</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut U</a>&gt; for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Copy-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#467-477">source</a><a href="#impl-Copy-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="marker/trait.Copy.html" title="trait std::marker::Copy">Copy</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Copy-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#467-477">source</a><a href="#impl-Copy-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="marker/trait.Copy.html" title="trait std::marker::Copy">Copy</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-DispatchFromDyn%3C*const+U%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#129">source</a><a href="#impl-DispatchFromDyn%3C*const+U%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="ops/trait.DispatchFromDyn.html" title="trait std::ops::DispatchFromDyn">DispatchFromDyn</a>&lt;<a class="primitive" href="primitive.pointer.html">*const U</a>&gt; for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-DispatchFromDyn%3C*mut+U%3E-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ops/unsize.rs.html#132">source</a><a href="#impl-DispatchFromDyn%3C*mut+U%3E-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="ops/trait.DispatchFromDyn.html" title="trait std::ops::DispatchFromDyn">DispatchFromDyn</a>&lt;<a class="primitive" href="primitive.pointer.html">*mut U</a>&gt; for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="marker/trait.Unsize.html" title="trait std::marker::Unsize">Unsize</a>&lt;U&gt; + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,
    U: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Eq-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/const_ptr.rs.html#1730">source</a><a href="#impl-Eq-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.Eq.html" title="trait std::cmp::Eq">Eq</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Eq-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/ptr/mut_ptr.rs.html#2181">source</a><a href="#impl-Eq-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="cmp/trait.Eq.html" title="trait std::cmp::Eq">Eq</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Send-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#87">source</a><a href="#impl-Send-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="marker/trait.Send.html" title="trait std::marker::Send">Send</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Send-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#89">source</a><a href="#impl-Send-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="marker/trait.Send.html" title="trait std::marker::Send">Send</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-SimdCastPtr%3CT%3E-for-*const+U" class="impl"><a class="srclink rightside" href="../src/core/portable-simd/crates/core_simd/src/cast.rs.html#43">source</a><a href="#impl-SimdCastPtr%3CT%3E-for-*const+U" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="simd/trait.SimdCastPtr.html" title="trait std::simd::SimdCastPtr">SimdCastPtr</a>&lt;T&gt; for <a class="primitive" href="primitive.pointer.html">*const U</a><span class="where fmt-newline">where
    U: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>,
    T: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&lt;Metadata = &lt;U as <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&gt;::<a class="associatedtype" href="ptr/trait.Pointee.html#associatedtype.Metadata" title="type std::ptr::Pointee::Metadata">Metadata</a>&gt;,</span></h3></section><section id="impl-SimdCastPtr%3CT%3E-for-*mut+U" class="impl"><a class="srclink rightside" href="../src/core/portable-simd/crates/core_simd/src/cast.rs.html#50">source</a><a href="#impl-SimdCastPtr%3CT%3E-for-*mut+U" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="simd/trait.SimdCastPtr.html" title="trait std::simd::SimdCastPtr">SimdCastPtr</a>&lt;T&gt; for <a class="primitive" href="primitive.pointer.html">*mut U</a><span class="where fmt-newline">where
    U: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>,
    T: <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&lt;Metadata = &lt;U as <a class="trait" href="ptr/trait.Pointee.html" title="trait std::ptr::Pointee">Pointee</a>&gt;::<a class="associatedtype" href="ptr/trait.Pointee.html#associatedtype.Metadata" title="type std::ptr::Pointee::Metadata">Metadata</a>&gt;,</span></h3></section><section id="impl-Sync-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#634">source</a><a href="#impl-Sync-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="marker/trait.Sync.html" title="trait std::marker::Sync">Sync</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Sync-for-*mut+T" class="impl"><a class="srclink rightside" href="../src/core/marker.rs.html#636">source</a><a href="#impl-Sync-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; !<a class="trait" href="marker/trait.Sync.html" title="trait std::marker::Sync">Sync</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Unpin-for-*const+T" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.38.0">1.38.0</span> Â· <a class="srclink" href="../src/core/marker.rs.html#933-938">source</a></span><a href="#impl-Unpin-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="marker/trait.Unpin.html" title="trait std::marker::Unpin">Unpin</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-Unpin-for-*mut+T" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.38.0">1.38.0</span> Â· <a class="srclink" href="../src/core/marker.rs.html#933-938">source</a></span><a href="#impl-Unpin-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="marker/trait.Unpin.html" title="trait std::marker::Unpin">Unpin</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-UnwindSafe-for-*const+T" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0">1.9.0</span> Â· <a class="srclink" href="../src/core/panic/unwind_safe.rs.html#185">source</a></span><a href="#impl-UnwindSafe-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: <a class="trait" href="panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section><section id="impl-UnwindSafe-for-*mut+T" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0">1.9.0</span> Â· <a class="srclink" href="../src/core/panic/unwind_safe.rs.html#187">source</a></span><a href="#impl-UnwindSafe-for-*mut+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="primitive" href="primitive.pointer.html">*mut T</a><span class="where fmt-newline">where
    T: <a class="trait" href="panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">Â§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-*const+T" class="impl"><a href="#impl-RefUnwindSafe-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>&gt; <a class="trait" href="panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="primitive" href="primitive.pointer.html">*const T</a><span class="where fmt-newline">where
    T: <a class="trait" href="panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a>,</span></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">Â§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/any.rs.html#200">source</a><a href="#impl-Any-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="any/trait.Any.html" title="trait std::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="../src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor">Â§</a><h4 class="code-header">fn <a href="any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="any/struct.TypeId.html" title="struct std::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>è·å– <code>self</code> çš„ <code>TypeId</code>ã€‚ <a href="any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="borrow/trait.Borrow.html" title="trait std::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="srclink rightside" href="../src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">Â§</a><h4 class="code-header">fn <a href="borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>ä»æ‹¥æœ‰çš„å€¼ä¸­ä¸€æˆä¸å˜åœ°å€Ÿç”¨ã€‚ <a href="borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="borrow/trait.BorrowMut.html" title="trait std::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="marker/trait.Sized.html" title="trait std::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="srclink rightside" href="../src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">Â§</a><h4 class="code-header">fn <a href="borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>ä»æ‹¥æœ‰çš„å€¼ä¸­å€Ÿç”¨ã€‚ <a href="borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#723">source</a><a href="#impl-From%3CT%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="convert/trait.From.html" title="trait std::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-1" class="method trait-impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#726">source</a><a href="#method.from-1" class="anchor">Â§</a><h4 class="code-header">fn <a href="convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>è¿”å›æœªæ›´æ”¹çš„å‚æ•°ã€‚</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#707">source</a><a href="#impl-Into%3CU%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="convert/trait.Into.html" title="trait std::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="convert/trait.From.html" title="trait std::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#716">source</a><a href="#method.into" class="anchor">Â§</a><h4 class="code-header">fn <a href="convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>è°ƒç”¨ <code>U::from(self)</code>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§è½¬æ¢æ˜¯ <code><a href="convert/trait.From.html" title="trait std::convert::From">From</a>&lt;T&gt; for U</code> å®ç°é€‰æ‹©æ‰§è¡Œçš„ä»»ä½•æ“ä½œã€‚</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ToOwned-for-*const+T" class="impl"><a class="srclink rightside" href="../src/alloc/borrow.rs.html#82">source</a><a href="#impl-ToOwned-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="borrow/trait.ToOwned.html" title="trait std::borrow::ToOwned">ToOwned</a> for T<span class="where fmt-newline">where
    T: <a class="trait" href="clone/trait.Clone.html" title="trait std::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Owned" class="associatedtype trait-impl"><a href="#associatedtype.Owned" class="anchor">Â§</a><h4 class="code-header">type <a href="borrow/trait.ToOwned.html#associatedtype.Owned" class="associatedtype">Owned</a> = T</h4></section></summary><div class='docblock'>è·å¾—æ‰€æœ‰æƒåçš„ç»“æœç±»å‹ã€‚</div></details><details class="toggle method-toggle" open><summary><section id="method.to_owned" class="method trait-impl"><a class="srclink rightside" href="../src/alloc/borrow.rs.html#87">source</a><a href="#method.to_owned" class="anchor">Â§</a><h4 class="code-header">fn <a href="borrow/trait.ToOwned.html#tymethod.to_owned" class="fn">to_owned</a>(&amp;self) -&gt; T</h4></section></summary><div class='docblock'>ä»å€Ÿç”¨çš„æ•°æ®åˆ›å»ºæ‹¥æœ‰çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯é€šè¿‡å…‹éš†ã€‚ <a href="borrow/trait.ToOwned.html#tymethod.to_owned">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_into" class="method trait-impl"><a class="srclink rightside" href="../src/alloc/borrow.rs.html#91">source</a><a href="#method.clone_into" class="anchor">Â§</a><h4 class="code-header">fn <a href="borrow/trait.ToOwned.html#method.clone_into" class="fn">clone_into</a>(&amp;self, target: <a class="primitive" href="primitive.reference.html">&amp;mut T</a>)</h4></section></summary><div class='docblock'>ä½¿ç”¨å€Ÿæ¥çš„æ•°æ®æ¥æ›¿æ¢æ‹¥æœ‰çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯é€šè¿‡å…‹éš†ã€‚ <a href="borrow/trait.ToOwned.html#method.clone_into">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#763">source</a><a href="#impl-TryFrom%3CU%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="convert/trait.TryFrom.html" title="trait std::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="convert/trait.Into.html" title="trait std::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">Â§</a><h4 class="code-header">type <a href="convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="convert/enum.Infallible.html" title="enum std::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>å‘ç”Ÿè½¬æ¢é”™è¯¯æ—¶è¿”å›çš„ç±»å‹ã€‚</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#770">source</a><a href="#method.try_from" class="anchor">Â§</a><h4 class="code-header">fn <a href="convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="convert/trait.TryFrom.html" title="trait std::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="convert/trait.TryFrom.html#associatedtype.Error" title="type std::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>æ‰§è¡Œè½¬æ¢ã€‚</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-*const+T" class="impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#748">source</a><a href="#impl-TryInto%3CU%3E-for-*const+T" class="anchor">Â§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="convert/trait.TryInto.html" title="trait std::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="convert/trait.TryFrom.html" title="trait std::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">Â§</a><h4 class="code-header">type <a href="convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="convert/trait.TryFrom.html" title="trait std::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="convert/trait.TryFrom.html#associatedtype.Error" title="type std::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>å‘ç”Ÿè½¬æ¢é”™è¯¯æ—¶è¿”å›çš„ç±»å‹ã€‚</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="srclink rightside" href="../src/core/convert/mod.rs.html#755">source</a><a href="#method.try_into" class="anchor">Â§</a><h4 class="code-header">fn <a href="convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="result/enum.Result.html" title="enum std::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="convert/trait.TryFrom.html" title="trait std::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="convert/trait.TryFrom.html#associatedtype.Error" title="type std::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>æ‰§è¡Œè½¬æ¢ã€‚</div></details></div></details></div></section></div></main></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="单线程引用计数指针。`Rc` 代表引用计数。"><title>Rc in alloc::rc - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="alloc" data-themes="" data-resource-suffix="1.71.0" data-rustdoc-version="1.71.0-dev" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items1.71.0.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../alloc/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../alloc/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Rc</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.as_ptr">as_ptr</a></li><li><a href="#method.assume_init">assume_init</a></li><li><a href="#method.assume_init-1">assume_init</a></li><li><a href="#method.decrement_strong_count">decrement_strong_count</a></li><li><a href="#method.downcast">downcast</a></li><li><a href="#method.downcast_unchecked">downcast_unchecked</a></li><li><a href="#method.downgrade">downgrade</a></li><li><a href="#method.from_raw">from_raw</a></li><li><a href="#method.get_mut">get_mut</a></li><li><a href="#method.get_mut_unchecked">get_mut_unchecked</a></li><li><a href="#method.increment_strong_count">increment_strong_count</a></li><li><a href="#method.into_inner">into_inner</a></li><li><a href="#method.into_raw">into_raw</a></li><li><a href="#method.make_mut">make_mut</a></li><li><a href="#method.new">new</a></li><li><a href="#method.new_cyclic">new_cyclic</a></li><li><a href="#method.new_uninit">new_uninit</a></li><li><a href="#method.new_uninit_slice">new_uninit_slice</a></li><li><a href="#method.new_zeroed">new_zeroed</a></li><li><a href="#method.new_zeroed_slice">new_zeroed_slice</a></li><li><a href="#method.pin">pin</a></li><li><a href="#method.ptr_eq">ptr_eq</a></li><li><a href="#method.strong_count">strong_count</a></li><li><a href="#method.try_new">try_new</a></li><li><a href="#method.try_new_uninit">try_new_uninit</a></li><li><a href="#method.try_new_zeroed">try_new_zeroed</a></li><li><a href="#method.try_unwrap">try_unwrap</a></li><li><a href="#method.unwrap_or_clone">unwrap_or_clone</a></li><li><a href="#method.weak_count">weak_count</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Send-for-Rc%3CT%3E">!Send</a></li><li><a href="#impl-Sync-for-Rc%3CT%3E">!Sync</a></li><li><a href="#impl-AsRef%3CT%3E-for-Rc%3CT%3E">AsRef&lt;T&gt;</a></li><li><a href="#impl-Borrow%3CT%3E-for-Rc%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-Clone-for-Rc%3CT%3E">Clone</a></li><li><a href="#impl-CoerceUnsized%3CRc%3CU%3E%3E-for-Rc%3CT%3E">CoerceUnsized&lt;Rc&lt;U&gt;&gt;</a></li><li><a href="#impl-Debug-for-Rc%3CT%3E">Debug</a></li><li><a href="#impl-Default-for-Rc%3CT%3E">Default</a></li><li><a href="#impl-Deref-for-Rc%3CT%3E">Deref</a></li><li><a href="#impl-DispatchFromDyn%3CRc%3CU%3E%3E-for-Rc%3CT%3E">DispatchFromDyn&lt;Rc&lt;U&gt;&gt;</a></li><li><a href="#impl-Display-for-Rc%3CT%3E">Display</a></li><li><a href="#impl-Drop-for-Rc%3CT%3E">Drop</a></li><li><a href="#impl-Eq-for-Rc%3CT%3E">Eq</a></li><li><a href="#impl-From%3C%26CStr%3E-for-Rc%3CCStr%3E">From&lt;&amp;CStr&gt;</a></li><li><a href="#impl-From%3C%26%5BT%5D%3E-for-Rc%3C%5BT%5D%3E">From&lt;&amp;[T]&gt;</a></li><li><a href="#impl-From%3C%26str%3E-for-Rc%3Cstr%3E">From&lt;&amp;str&gt;</a></li><li><a href="#impl-From%3CBox%3CT,+Global%3E%3E-for-Rc%3CT%3E">From&lt;Box&lt;T, Global&gt;&gt;</a></li><li><a href="#impl-From%3CCString%3E-for-Rc%3CCStr%3E">From&lt;CString&gt;</a></li><li><a href="#impl-From%3CCow%3C'a,+B%3E%3E-for-Rc%3CB%3E">From&lt;Cow&lt;&#x27;a, B&gt;&gt;</a></li><li><a href="#impl-From%3CRc%3Cstr%3E%3E-for-Rc%3C%5Bu8%5D%3E">From&lt;Rc&lt;str&gt;&gt;</a></li><li><a href="#impl-From%3CString%3E-for-Rc%3Cstr%3E">From&lt;String&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Rc%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-From%3CVec%3CT,+Global%3E%3E-for-Rc%3C%5BT%5D%3E">From&lt;Vec&lt;T, Global&gt;&gt;</a></li><li><a href="#impl-FromIterator%3CT%3E-for-Rc%3C%5BT%5D%3E">FromIterator&lt;T&gt;</a></li><li><a href="#impl-Hash-for-Rc%3CT%3E">Hash</a></li><li><a href="#impl-Ord-for-Rc%3CT%3E">Ord</a></li><li><a href="#impl-PartialEq%3CRc%3CT%3E%3E-for-Rc%3CT%3E">PartialEq&lt;Rc&lt;T&gt;&gt;</a></li><li><a href="#impl-PartialOrd%3CRc%3CT%3E%3E-for-Rc%3CT%3E">PartialOrd&lt;Rc&lt;T&gt;&gt;</a></li><li><a href="#impl-Pointer-for-Rc%3CT%3E">Pointer</a></li><li><a href="#impl-RefUnwindSafe-for-Rc%3CT%3E">RefUnwindSafe</a></li><li><a href="#impl-TryFrom%3CRc%3C%5BT%5D%3E%3E-for-Rc%3C%5BT;+N%5D%3E">TryFrom&lt;Rc&lt;[T]&gt;&gt;</a></li><li><a href="#impl-Unpin-for-Rc%3CT%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Rc%3CT%3E">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-Rc%3CT%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Rc%3CT%3E-1">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Rc%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3C!%3E-for-Rc%3CT%3E">From&lt;!&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Rc%3CT%3E-1">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Rc%3CT%3E">Into&lt;U&gt;</a></li><li><a href="#impl-ToOwned-for-Rc%3CT%3E">ToOwned</a></li><li><a href="#impl-ToString-for-Rc%3CT%3E">ToString</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Rc%3CT%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Rc%3CT%3E">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In alloc::rc</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">alloc</a>::<wbr><a href="index.html">rc</a>::<wbr><a class="struct" href="#">Rc</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#316-319">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct Rc&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; { /* private fields */ }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>单线程引用计数指针。<code>Rc</code> 代表引用计数。</p>
<p>有关更多详细信息，请参见 <a href="./index.html">模块级文档</a>。</p>
<p><code>Rc</code> 的固有方法都是关联函数，这意味着您必须以例如 <a href="struct.Rc.html#method.get_mut" title="associated function alloc::rc::Rc::get_mut"><code>Rc::get_mut(&amp;mut value)</code></a> 而不是 <code>value.get_mut()</code> 的方式调用它们。
这样可以避免与内部类型 <code>T</code> 的方法发生冲突。</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#360-700">source</a><a href="#impl-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#372-383">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>(value: T) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>创建一个新的 <code>Rc&lt;T&gt;</code>。</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.new_cyclic" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.60.0">1.60.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#438-478">source</a></span><h4 class="code-header">pub fn <a href="#method.new_cyclic" class="fn">new_cyclic</a>&lt;F&gt;(data_fn: F) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;<span class="where fmt-newline">where
    F: <a class="trait" href="../../core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;<a class="struct" href="struct.Weak.html" title="struct alloc::rc::Weak">Weak</a>&lt;T&gt;) -&gt; T,</span></h4></section></summary><div class="docblock"><p>创建一个新的 <code>Rc&lt;T&gt;</code>，同时给您一个分配的 <code>Weak&lt;T&gt;</code>，以允许您创建一个 <code>T</code>，它持有一个指向自身的弱指针。</p>
<p>通常，直接或间接循环引用自身的结构体不应该对自身持有强引用以防止内存泄漏。
使用这个函数，您可以在 <code>T</code> 的初始化过程中，在 <code>Rc&lt;T&gt;</code> 创建之前访问弱指针，这样您就可以将它克隆并存储在 <code>T</code> 中。</p>
<p><code>new_cyclic</code> 先给 <code>Rc&lt;T&gt;</code> 分配托管分配，然后调用您的闭包，给这个分配一个 <code>Weak&lt;T&gt;</code>，然后再把您的闭包返回的 <code>T</code> 放入分配中，完成 <code>Rc&lt;T&gt;</code> 的构建。</p>
<p>由于新的 <code>Rc&lt;T&gt;</code> 在 <code>Rc&lt;T&gt;::new_cyclic</code> 返回之前尚未完全构造，因此在闭包内的弱引用上调用 <a href="struct.Weak.html#method.upgrade" title="method alloc::rc::Weak::upgrade"><code>upgrade</code></a> 将失败并导致 <code>None</code> 值。</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>如果 <code>data_fn</code> 发生 panic，panic 会传播给调用者，而临时的 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak&lt;T&gt;</code></a> 会被正常丢弃。</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::{Rc, Weak};

<span class="kw">struct </span>Gadget {
    me: Weak&lt;Gadget&gt;,
}

<span class="kw">impl </span>Gadget {
    <span class="doccomment">/// 创建一个引用计数的 Gadget。
    </span><span class="kw">fn </span>new() -&gt; Rc&lt;<span class="self">Self</span>&gt; {
        <span class="comment">// `me` 是指向我们正在构建的 `Rc` 的新分配的 `Weak&lt;Gadget&gt;`。
        </span>Rc::new_cyclic(|me| {
            <span class="comment">// 在此处创建实际的结构体。
            </span>Gadget { me: me.clone() }
        })
    }

    <span class="doccomment">/// 返回一个指向 Self 的引用计数指针。
    </span><span class="kw">fn </span>me(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Rc&lt;<span class="self">Self</span>&gt; {
        <span class="self">self</span>.me.upgrade().unwrap()
    }
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Ballow(dead_code)%5D%0Afn+main()+%7B%0Ause+std::rc::%7BRc,+Weak%7D;%0A%0Astruct+Gadget+%7B%0A++++me:+Weak%3CGadget%3E,%0A%7D%0A%0Aimpl+Gadget+%7B%0A++++///+%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%9A%84+Gadget%E3%80%82%0A++++fn+new()+-%3E+Rc%3CSelf%3E+%7B%0A++++++++//+%60me%60+%E6%98%AF%E6%8C%87%E5%90%91%E6%88%91%E4%BB%AC%E6%AD%A3%E5%9C%A8%E6%9E%84%E5%BB%BA%E7%9A%84+%60Rc%60+%E7%9A%84%E6%96%B0%E5%88%86%E9%85%8D%E7%9A%84+%60Weak%3CGadget%3E%60%E3%80%82%0A++++++++Rc::new_cyclic(%7Cme%7C+%7B%0A++++++++++++//+%E5%9C%A8%E6%AD%A4%E5%A4%84%E5%88%9B%E5%BB%BA%E5%AE%9E%E9%99%85%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%82%0A++++++++++++Gadget+%7B+me:+me.clone()+%7D%0A++++++++%7D)%0A++++%7D%0A%0A++++///+%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91+Self+%E7%9A%84%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%8C%87%E9%92%88%E3%80%82%0A++++fn+me(%26self)+-%3E+Rc%3CSelf%3E+%7B%0A++++++++self.me.upgrade().unwrap()%0A++++%7D%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.new_uninit" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#502-510">source</a><h4 class="code-header">pub fn <a href="#method.new_uninit" class="fn">new_uninit</a>() -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>创建一个具有未初始化内容的新 <code>Rc</code>。</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]
#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>five = Rc::&lt;u32&gt;::new_uninit();

<span class="comment">// 延迟初始化：
</span>Rc::get_mut(<span class="kw-2">&amp;mut </span>five).unwrap().write(<span class="number">5</span>);

<span class="kw">let </span>five = <span class="kw">unsafe </span>{ five.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>five, <span class="number">5</span>)</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+five+=+Rc::%3Cu32%3E::new_uninit();%0A%0A//+%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%0ARc::get_mut(%26mut+five).unwrap().write(5);%0A%0Alet+five+=+unsafe+%7B+five.assume_init()+%7D;%0A%0Aassert_eq!(*five,+5)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.new_zeroed" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#535-543">source</a><h4 class="code-header">pub fn <a href="#method.new_zeroed" class="fn">new_zeroed</a>() -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>创建一个具有未初始化内容的新 <code>Rc</code>，并用 <code>0</code> 字节填充内存。</p>
<p>有关正确和不正确使用此方法的示例，请参见 <a href="../../core/mem/maybe_uninit/union.MaybeUninit.html#method.zeroed" title="associated function core::mem::maybe_uninit::MaybeUninit::zeroed"><code>MaybeUninit::zeroed</code></a>。</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>zero = Rc::&lt;u32&gt;::new_zeroed();
<span class="kw">let </span>zero = <span class="kw">unsafe </span>{ zero.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>zero, <span class="number">0</span>)</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+zero+=+Rc::%3Cu32%3E::new_zeroed();%0Alet+zero+=+unsafe+%7B+zero.assume_init()+%7D;%0A%0Aassert_eq!(*zero,+0)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.try_new" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#557-568">source</a><h4 class="code-header">pub fn <a href="#method.try_new" class="fn">try_new</a>(value: T) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;, <a class="struct" href="../alloc/struct.AllocError.html" title="struct alloc::alloc::AllocError">AllocError</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>allocator_api</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/32838">#32838</a>)</span></div></span></summary><div class="docblock"><p>创建一个新的 <code>Rc&lt;T&gt;</code>，如果分配失败，则返回错误</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(allocator_api)]
</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::try_new(<span class="number">5</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(allocator_api)%5D%0A%23%5Ballow(unused_extern_crates)%5D%0Aextern+crate+r%23alloc;%0Afn+main()+%7B+fn+_inner()+-%3E+Result%3C(),+impl+core::fmt::Debug%3E+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::try_new(5);%0AOk::%3C(),+std::alloc::AllocError%3E(())%0A%7D+_inner().unwrap()+%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.try_new_uninit" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#592-600">source</a><h4 class="code-header">pub fn <a href="#method.try_new_uninit" class="fn">try_new_uninit</a>() -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;, <a class="struct" href="../alloc/struct.AllocError.html" title="struct alloc::alloc::AllocError">AllocError</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>allocator_api</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/32838">#32838</a>)</span></div></span></summary><div class="docblock"><p>用未初始化的内容构造一个新的 <code>Rc</code>，如果分配失败，则返回错误</p>
<h5 id="examples-5"><a href="#examples-5">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(allocator_api, new_uninit)]
#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>five = Rc::&lt;u32&gt;::try_new_uninit()<span class="question-mark">?</span>;

<span class="comment">// 延迟初始化：
</span>Rc::get_mut(<span class="kw-2">&amp;mut </span>five).unwrap().write(<span class="number">5</span>);

<span class="kw">let </span>five = <span class="kw">unsafe </span>{ five.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>five, <span class="number">5</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(allocator_api,+new_uninit)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0A%23%5Ballow(unused_extern_crates)%5D%0Aextern+crate+r%23alloc;%0Afn+main()+%7B+fn+_inner()+-%3E+Result%3C(),+impl+core::fmt::Debug%3E+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+five+=+Rc::%3Cu32%3E::try_new_uninit()?;%0A%0A//+%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%0ARc::get_mut(%26mut+five).unwrap().write(5);%0A%0Alet+five+=+unsafe+%7B+five.assume_init()+%7D;%0A%0Aassert_eq!(*five,+5);%0AOk::%3C(),+std::alloc::AllocError%3E(())%0A%7D+_inner().unwrap()+%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.try_new_zeroed" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#625-633">source</a><h4 class="code-header">pub fn <a href="#method.try_new_zeroed" class="fn">try_new_zeroed</a>() -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;, <a class="struct" href="../alloc/struct.AllocError.html" title="struct alloc::alloc::AllocError">AllocError</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>allocator_api</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/32838">#32838</a>)</span></div></span></summary><div class="docblock"><p>创建一个具有未初始化内容的新 <code>Rc</code>，并用 <code>0</code> 字节填充内存，如果分配失败，则返回错误</p>
<p>有关正确和不正确使用此方法的示例，请参见 <a href="../../core/mem/maybe_uninit/union.MaybeUninit.html#method.zeroed" title="associated function core::mem::maybe_uninit::MaybeUninit::zeroed"><code>MaybeUninit::zeroed</code></a>。</p>
<h5 id="examples-6"><a href="#examples-6">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(allocator_api, new_uninit)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>zero = Rc::&lt;u32&gt;::try_new_zeroed()<span class="question-mark">?</span>;
<span class="kw">let </span>zero = <span class="kw">unsafe </span>{ zero.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>zero, <span class="number">0</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(allocator_api,+new_uninit)%5D%0A%0A%23%5Ballow(unused_extern_crates)%5D%0Aextern+crate+r%23alloc;%0Afn+main()+%7B+fn+_inner()+-%3E+Result%3C(),+impl+core::fmt::Debug%3E+%7B%0Ause+std::rc::Rc;%0A%0Alet+zero+=+Rc::%3Cu32%3E::try_new_zeroed()?;%0Alet+zero+=+unsafe+%7B+zero.assume_init()+%7D;%0A%0Aassert_eq!(*zero,+0);%0AOk::%3C(),+std::alloc::AllocError%3E(())%0A%7D+_inner().unwrap()+%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.pin" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.33.0">1.33.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#639-641">source</a></span><h4 class="code-header">pub fn <a href="#method.pin" class="fn">pin</a>(value: T) -&gt; <a class="struct" href="../../core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;&gt;</h4></section></summary><div class="docblock"><p>创建一个新的 <code>Pin&lt;Rc&lt;T&gt;&gt;</code>。
如果 <code>T</code> 未实现 <code>Unpin</code>，则 <code>value</code> 将被固定在内存中并且无法移动。</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.try_unwrap" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#664-681">source</a></span><h4 class="code-header">pub fn <a href="#method.try_unwrap" class="fn">try_unwrap</a>(this: Self) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, Self&gt;</h4></section></summary><div class="docblock"><p>如果 <code>Rc</code> 正好有一个强引用，则返回内部值。</p>
<p>否则，返回的 <a href="../../core/result/enum.Result.html#variant.Err" title="variant core::result::Result::Err"><code>Err</code></a> 将与传入的 <code>Rc</code> 相同。</p>
<p>即使存在突出的弱引用，此操作也将成功。</p>
<h5 id="examples-7"><a href="#examples-7">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x = Rc::new(<span class="number">3</span>);
<span class="macro">assert_eq!</span>(Rc::try_unwrap(x), <span class="prelude-val">Ok</span>(<span class="number">3</span>));

<span class="kw">let </span>x = Rc::new(<span class="number">4</span>);
<span class="kw">let </span>_y = Rc::clone(<span class="kw-2">&amp;</span>x);
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>Rc::try_unwrap(x).unwrap_err(), <span class="number">4</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x+=+Rc::new(3);%0Aassert_eq!(Rc::try_unwrap(x),+Ok(3));%0A%0Alet+x+=+Rc::new(4);%0Alet+_y+=+Rc::clone(%26x);%0Aassert_eq!(*Rc::try_unwrap(x).unwrap_err(),+4);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.into_inner" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.70.0">1.70.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#697-699">source</a></span><h4 class="code-header">pub fn <a href="#method.into_inner" class="fn">into_inner</a>(this: Self) -&gt; <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>如果 <code>Rc</code> 正好有一个强引用，则返回内部值。</p>
<p>否则，返回 <a href="../../core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a>，<code>Rc</code> 为丢弃。</p>
<p>即使存在突出的弱引用，此操作也将成功。</p>
<p>如果在这个 <code>Rc</code> 的每个克隆上调用 <code>Rc::into_inner</code>，则可以保证恰好有一个调用返回内部值。</p>
<p>这特别意味着内部值不是丢弃。</p>
<p>这相当于 <code>Rc::try_unwrap(this).ok()</code>。
(请注意，由于不适用于 <code>Rc</code> 的竞争状态，这些并不等同于 <a href="../sync/struct.Arc.html" title="struct alloc::sync::Arc"><code>Arc</code></a>。)</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3C%5BT%5D%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#702-767">source</a><a href="#impl-Rc%3C%5BT%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new_uninit_slice" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#728-730">source</a><h4 class="code-header">pub fn <a href="#method.new_uninit_slice" class="fn">new_uninit_slice</a>(len: <a class="primitive" href="../../core/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;[<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>创建一个新的带有未初始化内容的引用计数的切片。</p>
<h5 id="examples-8"><a href="#examples-8">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]
#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>values = Rc::&lt;[u32]&gt;::new_uninit_slice(<span class="number">3</span>);

<span class="comment">// 延迟初始化：
</span><span class="kw">let </span>data = Rc::get_mut(<span class="kw-2">&amp;mut </span>values).unwrap();
data[<span class="number">0</span>].write(<span class="number">1</span>);
data[<span class="number">1</span>].write(<span class="number">2</span>);
data[<span class="number">2</span>].write(<span class="number">3</span>);

<span class="kw">let </span>values = <span class="kw">unsafe </span>{ values.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>values, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+values+=+Rc::%3C%5Bu32%5D%3E::new_uninit_slice(3);%0A%0A//+%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%0Alet+data+=+Rc::get_mut(%26mut+values).unwrap();%0Adata%5B0%5D.write(1);%0Adata%5B1%5D.write(2);%0Adata%5B2%5D.write(3);%0A%0Alet+values+=+unsafe+%7B+values.assume_init()+%7D;%0A%0Aassert_eq!(*values,+%5B1,+2,+3%5D)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.new_zeroed_slice" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#755-766">source</a><h4 class="code-header">pub fn <a href="#method.new_zeroed_slice" class="fn">new_zeroed_slice</a>(len: <a class="primitive" href="../../core/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;[<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>用未初始化的内容创建一个新的带有引用计数的切片，内存中填充 <code>0</code> 字节。</p>
<p>有关正确和不正确使用此方法的示例，请参见 <a href="../../core/mem/maybe_uninit/union.MaybeUninit.html#method.zeroed" title="associated function core::mem::maybe_uninit::MaybeUninit::zeroed"><code>MaybeUninit::zeroed</code></a>。</p>
<h5 id="examples-9"><a href="#examples-9">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>values = Rc::&lt;[u32]&gt;::new_zeroed_slice(<span class="number">3</span>);
<span class="kw">let </span>values = <span class="kw">unsafe </span>{ values.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>values, [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+values+=+Rc::%3C%5Bu32%5D%3E::new_zeroed_slice(3);%0Alet+values+=+unsafe+%7B+values.assume_init()+%7D;%0A%0Aassert_eq!(*values,+%5B0,+0,+0%5D)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3CMaybeUninit%3CT%3E%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#769-804">source</a><a href="#impl-Rc%3CMaybeUninit%3CT%3E%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.assume_init" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#801-803">source</a><h4 class="code-header">pub unsafe fn <a href="#method.assume_init" class="fn">assume_init</a>(self) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>转换为 <code>Rc&lt;T&gt;</code>。</p>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>与 <a href="../../core/mem/maybe_uninit/union.MaybeUninit.html#method.assume_init" title="method core::mem::maybe_uninit::MaybeUninit::assume_init"><code>MaybeUninit::assume_init</code></a> 一样，由调用者负责确保内部值确实处于初始化状态。</p>
<p>在内容尚未完全初始化时调用此方法会立即导致未定义的行为。</p>
<h5 id="examples-10"><a href="#examples-10">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]
#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>five = Rc::&lt;u32&gt;::new_uninit();

<span class="comment">// 延迟初始化：
</span>Rc::get_mut(<span class="kw-2">&amp;mut </span>five).unwrap().write(<span class="number">5</span>);

<span class="kw">let </span>five = <span class="kw">unsafe </span>{ five.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>five, <span class="number">5</span>)</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+five+=+Rc::%3Cu32%3E::new_uninit();%0A%0A//+%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%0ARc::get_mut(%26mut+five).unwrap().write(5);%0A%0Alet+five+=+unsafe+%7B+five.assume_init()+%7D;%0A%0Aassert_eq!(*five,+5)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3C%5BMaybeUninit%3CT%3E%5D%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#806-844">source</a><a href="#impl-Rc%3C%5BMaybeUninit%3CT%3E%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;[<a class="union" href="../../core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;T&gt;]&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.assume_init-1" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#841-843">source</a><h4 class="code-header">pub unsafe fn <a href="#method.assume_init-1" class="fn">assume_init</a>(self) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>new_uninit</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63291">#63291</a>)</span></div></span></summary><div class="docblock"><p>转换为 <code>Rc&lt;[T]&gt;</code>。</p>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>与 <a href="../../core/mem/maybe_uninit/union.MaybeUninit.html#method.assume_init" title="method core::mem::maybe_uninit::MaybeUninit::assume_init"><code>MaybeUninit::assume_init</code></a> 一样，由调用者负责确保内部值确实处于初始化状态。</p>
<p>在内容尚未完全初始化时调用此方法会立即导致未定义的行为。</p>
<h5 id="examples-11"><a href="#examples-11">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(new_uninit)]
#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>values = Rc::&lt;[u32]&gt;::new_uninit_slice(<span class="number">3</span>);

<span class="comment">// 延迟初始化：
</span><span class="kw">let </span>data = Rc::get_mut(<span class="kw-2">&amp;mut </span>values).unwrap();
data[<span class="number">0</span>].write(<span class="number">1</span>);
data[<span class="number">1</span>].write(<span class="number">2</span>);
data[<span class="number">2</span>].write(<span class="number">3</span>);

<span class="kw">let </span>values = <span class="kw">unsafe </span>{ values.assume_init() };

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>values, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(new_uninit)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+values+=+Rc::%3C%5Bu32%5D%3E::new_uninit_slice(3);%0A%0A//+%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A%0Alet+data+=+Rc::get_mut(%26mut+values).unwrap();%0Adata%5B0%5D.write(1);%0Adata%5B1%5D.write(2);%0Adata%5B2%5D.write(3);%0A%0Alet+values+=+unsafe+%7B+values.assume_init()+%7D;%0A%0Aassert_eq!(*values,+%5B1,+2,+3%5D)%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3CT%3E-1" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#846-1189">source</a><a href="#impl-Rc%3CT%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into_raw" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.17.0">1.17.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#862-866">source</a></span><h4 class="code-header">pub fn <a href="#method.into_raw" class="fn">into_raw</a>(this: Self) -&gt; <a class="primitive" href="../../core/primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>消耗 <code>Rc</code>，返回包装的指针。</p>
<p>为避免内存泄漏，必须使用 <a href="struct.Rc.html#method.from_raw" title="associated function alloc::rc::Rc::from_raw"><code>Rc::from_raw</code></a> 将指针转换回 <code>Rc</code>。</p>
<h5 id="examples-12"><a href="#examples-12">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x = Rc::new(<span class="string">&quot;hello&quot;</span>.to_owned());
<span class="kw">let </span>x_ptr = Rc::into_raw(x);
<span class="macro">assert_eq!</span>(<span class="kw">unsafe </span>{ <span class="kw-2">&amp;*</span>x_ptr }, <span class="string">&quot;hello&quot;</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x+=+Rc::new(%22hello%22.to_owned());%0Alet+x_ptr+=+Rc::into_raw(x);%0Aassert_eq!(unsafe+%7B+%26*x_ptr+%7D,+%22hello%22);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_ptr" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.45.0">1.45.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#885-892">source</a></span><h4 class="code-header">pub fn <a href="#method.as_ptr" class="fn">as_ptr</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>) -&gt; <a class="primitive" href="../../core/primitive.pointer.html">*const T</a></h4></section></summary><div class="docblock"><p>为数据提供裸指针。</p>
<p>计数不会受到任何影响，并且不会消耗 <code>Rc</code>。
只要 <code>Rc</code> 中存在大量计数，指针就有效。</p>
<h5 id="examples-13"><a href="#examples-13">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x = Rc::new(<span class="string">&quot;hello&quot;</span>.to_owned());
<span class="kw">let </span>y = Rc::clone(<span class="kw-2">&amp;</span>x);
<span class="kw">let </span>x_ptr = Rc::as_ptr(<span class="kw-2">&amp;</span>x);
<span class="macro">assert_eq!</span>(x_ptr, Rc::as_ptr(<span class="kw-2">&amp;</span>y));
<span class="macro">assert_eq!</span>(<span class="kw">unsafe </span>{ <span class="kw-2">&amp;*</span>x_ptr }, <span class="string">&quot;hello&quot;</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x+=+Rc::new(%22hello%22.to_owned());%0Alet+y+=+Rc::clone(%26x);%0Alet+x_ptr+=+Rc::as_ptr(%26x);%0Aassert_eq!(x_ptr,+Rc::as_ptr(%26y));%0Aassert_eq!(unsafe+%7B+%26*x_ptr+%7D,+%22hello%22);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_raw" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.17.0">1.17.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#931-938">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.from_raw" class="fn">from_raw</a>(ptr: <a class="primitive" href="../../core/primitive.pointer.html">*const T</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>从裸指针构造 <code>Rc&lt;T&gt;</code>。</p>
<p>裸指针必须事先由调用返回到 <a href="struct.Rc.html#method.into_raw" title="associated function alloc::rc::Rc::into_raw"><code>Rc&lt;U&gt;::into_raw</code></a>，其中 <code>U</code> 的大小和对齐方式必须与 <code>T</code> 相同。
如果 <code>U</code> 是 <code>T</code>，这是很简单的。
请注意，如果 <code>U</code> 不是 <code>T</code>，但是具有相同的大小和对齐方式，则基本上就像对不同类型的引用进行转换一样。
有关在这种情况下适用哪些限制的更多信息，请参见 <a href="../../core/intrinsics/fn.transmute.html" title="fn core::intrinsics::transmute"><code>mem::transmute</code></a>。</p>
<p><code>from_raw</code> 的用户必须确保 <code>T</code> 的特定值仅被丢弃一次。</p>
<p>此函数不安全，因为使用不当可能会导致内存不安全，即使从未访问返回的 <code>Rc&lt;T&gt;</code> 也是如此。</p>
<h5 id="examples-14"><a href="#examples-14">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x = Rc::new(<span class="string">&quot;hello&quot;</span>.to_owned());
<span class="kw">let </span>x_ptr = Rc::into_raw(x);

<span class="kw">unsafe </span>{
    <span class="comment">// 转换回 `Rc` 以防止泄漏。
    </span><span class="kw">let </span>x = Rc::from_raw(x_ptr);
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;*</span>x, <span class="string">&quot;hello&quot;</span>);

    <span class="comment">// 进一步调用 `Rc::from_raw(x_ptr)` 将导致内存不安全。
</span>}

<span class="comment">// 当 `x` 超出上面的作用域时，其内存将被释放，所以 `x_ptr` 现在悬垂了！</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x+=+Rc::new(%22hello%22.to_owned());%0Alet+x_ptr+=+Rc::into_raw(x);%0A%0Aunsafe+%7B%0A++++//+%E8%BD%AC%E6%8D%A2%E5%9B%9E+%60Rc%60+%E4%BB%A5%E9%98%B2%E6%AD%A2%E6%B3%84%E6%BC%8F%E3%80%82%0A++++let+x+=+Rc::from_raw(x_ptr);%0A++++assert_eq!(%26*x,+%22hello%22);%0A%0A++++//+%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%B0%83%E7%94%A8+%60Rc::from_raw(x_ptr)%60+%E5%B0%86%E5%AF%BC%E8%87%B4%E5%86%85%E5%AD%98%E4%B8%8D%E5%AE%89%E5%85%A8%E3%80%82%0A%7D%0A%0A//+%E5%BD%93+%60x%60+%E8%B6%85%E5%87%BA%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%97%B6%EF%BC%8C%E5%85%B6%E5%86%85%E5%AD%98%E5%B0%86%E8%A2%AB%E9%87%8A%E6%94%BE%EF%BC%8C%E6%89%80%E4%BB%A5+%60x_ptr%60+%E7%8E%B0%E5%9C%A8%E6%82%AC%E5%9E%82%E4%BA%86%EF%BC%81%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.downgrade" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#954-959">source</a></span><h4 class="code-header">pub fn <a href="#method.downgrade" class="fn">downgrade</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>) -&gt; <a class="struct" href="struct.Weak.html" title="struct alloc::rc::Weak">Weak</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>创建一个指向该分配的新 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针。</p>
<h5 id="examples-15"><a href="#examples-15">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="kw">let </span>weak_five = Rc::downgrade(<span class="kw-2">&amp;</span>five);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Alet+weak_five+=+Rc::downgrade(%26five);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.weak_count" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.15.0">1.15.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#975-977">source</a></span><h4 class="code-header">pub fn <a href="#method.weak_count" class="fn">weak_count</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>) -&gt; <a class="primitive" href="../../core/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>获取指向该分配的 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针的数量。</p>
<h5 id="examples-16"><a href="#examples-16">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);
<span class="kw">let </span>_weak_five = Rc::downgrade(<span class="kw-2">&amp;</span>five);

<span class="macro">assert_eq!</span>(<span class="number">1</span>, Rc::weak_count(<span class="kw-2">&amp;</span>five));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0Alet+_weak_five+=+Rc::downgrade(%26five);%0A%0Aassert_eq!(1,+Rc::weak_count(%26five));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.strong_count" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.15.0">1.15.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#993-995">source</a></span><h4 class="code-header">pub fn <a href="#method.strong_count" class="fn">strong_count</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>) -&gt; <a class="primitive" href="../../core/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>获取指向此分配的强 (<code>Rc</code>) 指针的数量。</p>
<h5 id="examples-17"><a href="#examples-17">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);
<span class="kw">let </span>_also_five = Rc::clone(<span class="kw-2">&amp;</span>five);

<span class="macro">assert_eq!</span>(<span class="number">2</span>, Rc::strong_count(<span class="kw-2">&amp;</span>five));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0Alet+_also_five+=+Rc::clone(%26five);%0A%0Aassert_eq!(2,+Rc::strong_count(%26five));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.increment_strong_count" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.53.0">1.53.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1023-1028">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.increment_strong_count" class="fn">increment_strong_count</a>(ptr: <a class="primitive" href="../../core/primitive.pointer.html">*const T</a>)</h4></section></summary><div class="docblock"><p>将与提供的指针关联的 <code>Rc&lt;T&gt;</code> 上的强引用计数增加 1。</p>
<h5 id="safety-2"><a href="#safety-2">Safety</a></h5>
<p>指针必须是通过 <code>Rc::into_raw</code> 获得的，并且关联的 <code>Rc</code> 实例必须是有效的 (即
在此方法的持续时间内，强引用计数必须至少为 1)。</p>
<h5 id="examples-18"><a href="#examples-18">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="kw">unsafe </span>{
    <span class="kw">let </span>ptr = Rc::into_raw(five);
    Rc::increment_strong_count(ptr);

    <span class="kw">let </span>five = Rc::from_raw(ptr);
    <span class="macro">assert_eq!</span>(<span class="number">2</span>, Rc::strong_count(<span class="kw-2">&amp;</span>five));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aunsafe+%7B%0A++++let+ptr+=+Rc::into_raw(five);%0A++++Rc::increment_strong_count(ptr);%0A%0A++++let+five+=+Rc::from_raw(ptr);%0A++++assert_eq!(2,+Rc::strong_count(%26five));%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decrement_strong_count" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.53.0">1.53.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1060-1062">source</a></span><h4 class="code-header">pub unsafe fn <a href="#method.decrement_strong_count" class="fn">decrement_strong_count</a>(ptr: <a class="primitive" href="../../core/primitive.pointer.html">*const T</a>)</h4></section></summary><div class="docblock"><p>将与提供的指针关联的 <code>Rc&lt;T&gt;</code> 上的强引用计数减一。</p>
<h5 id="safety-3"><a href="#safety-3">Safety</a></h5>
<p>指针必须是通过 <code>Rc::into_raw</code> 获得的，并且关联的 <code>Rc</code> 实例必须是有效的 (即
调用此方法时，强引用计数必须至少为 1)。
此方法可用于释放最终的 <code>Rc</code> 和后备存储，但<strong>不应</strong>在最终的 <code>Rc</code> 释放后调用。</p>
<h5 id="examples-19"><a href="#examples-19">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="kw">unsafe </span>{
    <span class="kw">let </span>ptr = Rc::into_raw(five);
    Rc::increment_strong_count(ptr);

    <span class="kw">let </span>five = Rc::from_raw(ptr);
    <span class="macro">assert_eq!</span>(<span class="number">2</span>, Rc::strong_count(<span class="kw-2">&amp;</span>five));
    Rc::decrement_strong_count(ptr);
    <span class="macro">assert_eq!</span>(<span class="number">1</span>, Rc::strong_count(<span class="kw-2">&amp;</span>five));
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aunsafe+%7B%0A++++let+ptr+=+Rc::into_raw(five);%0A++++Rc::increment_strong_count(ptr);%0A%0A++++let+five+=+Rc::from_raw(ptr);%0A++++assert_eq!(2,+Rc::strong_count(%26five));%0A++++Rc::decrement_strong_count(ptr);%0A++++assert_eq!(1,+Rc::strong_count(%26five));%0A%7D%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_mut" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1097-1099">source</a></span><h4 class="code-header">pub fn <a href="#method.get_mut" class="fn">get_mut</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut Self</a>) -&gt; <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="../../core/primitive.reference.html">&amp;mut T</a>&gt;</h4></section></summary><div class="docblock"><p>如果没有其他 <code>Rc</code> 或 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指向相同分配的指针，则返回给定 <code>Rc</code> 的可变引用。</p>
<p>否则返回 <a href="../../core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a>，因为更改共享值并不安全。</p>
<p>另请参见 <a href="struct.Rc.html#method.make_mut" title="associated function alloc::rc::Rc::make_mut"><code>make_mut</code></a>，当有其他 <code>Rc</code> 指针时，它将 <a href="../../core/clone/trait.Clone.html#tymethod.clone" title="method core::clone::Clone::clone"><code>clone</code></a> 内部值。</p>
<h5 id="examples-20"><a href="#examples-20">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>x = Rc::new(<span class="number">3</span>);
<span class="kw-2">*</span>Rc::get_mut(<span class="kw-2">&amp;mut </span>x).unwrap() = <span class="number">4</span>;
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>x, <span class="number">4</span>);

<span class="kw">let </span>_y = Rc::clone(<span class="kw-2">&amp;</span>x);
<span class="macro">assert!</span>(Rc::get_mut(<span class="kw-2">&amp;mut </span>x).is_none());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+x+=+Rc::new(3);%0A*Rc::get_mut(%26mut+x).unwrap()+=+4;%0Aassert_eq!(*x,+4);%0A%0Alet+_y+=+Rc::clone(%26x);%0Aassert!(Rc::get_mut(%26mut+x).is_none());%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_mut_unchecked" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1163-1167">source</a><h4 class="code-header">pub unsafe fn <a href="#method.get_mut_unchecked" class="fn">get_mut_unchecked</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut Self</a>) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;mut T</a></h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>get_mut_unchecked</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63292">#63292</a>)</span></div></span></summary><div class="docblock"><p>将变量引用返回给定的 <code>Rc</code>，而不进行任何检查。</p>
<p>另请参见 <a href="struct.Rc.html#method.get_mut" title="associated function alloc::rc::Rc::get_mut"><code>get_mut</code></a>，它是安全的并且进行适当的检查。</p>
<h5 id="safety-4"><a href="#safety-4">Safety</a></h5>
<p>如果存在指向同一分配的任何其他 <code>Rc</code> 或 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针，则在返回的借用期间，它们不得被解引用或具有活动借用，并且它们的内部类型必须与此 Rc 的内部类型完全相同 (包括生命周)。
如果不存在这样的指针 (例如紧接在 <code>Rc::new</code> 之后)，则情况很简单。</p>
<h5 id="examples-21"><a href="#examples-21">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>x = Rc::new(String::new());
<span class="kw">unsafe </span>{
    Rc::get_mut_unchecked(<span class="kw-2">&amp;mut </span>x).push_str(<span class="string">&quot;foo&quot;</span>)
}
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>x, <span class="string">&quot;foo&quot;</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+x+=+Rc::new(String::new());%0Aunsafe+%7B%0A++++Rc::get_mut_unchecked(%26mut+x).push_str(%22foo%22)%0A%7D%0Aassert_eq!(*x,+%22foo%22);%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>指向同一分配的其他 <code>Rc</code> 指针必须指向同一类型。</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x: Rc&lt;str&gt; = Rc::from(<span class="string">&quot;Hello, world!&quot;</span>);
<span class="kw">let </span><span class="kw-2">mut </span>y: Rc&lt;[u8]&gt; = x.clone().into();
<span class="kw">unsafe </span>{
    <span class="comment">// 这是未定义的行为，因为 x 的内部类型是 str，而不是 [u8]
    </span>Rc::get_mut_unchecked(<span class="kw-2">&amp;mut </span>y).fill(<span class="number">0xff</span>); <span class="comment">// 0xff 在 UTF-8 中无效
</span>}
<span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">&amp;*</span>x); <span class="comment">// str 中的 UTF-8 无效</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x:+Rc%3Cstr%3E+=+Rc::from(%22Hello,+world!%22);%0Alet+mut+y:+Rc%3C%5Bu8%5D%3E+=+x.clone().into();%0Aunsafe+%7B%0A++++//+%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%EF%BC%8C%E5%9B%A0%E4%B8%BA+x+%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB%E5%9E%8B%E6%98%AF+str%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF+%5Bu8%5D%0A++++Rc::get_mut_unchecked(%26mut+y).fill(0xff);+//+0xff+%E5%9C%A8+UTF-8+%E4%B8%AD%E6%97%A0%E6%95%88%0A%7D%0Aprintln!(%22%7B%7D%22,+%26*x);+//+str+%E4%B8%AD%E7%9A%84+UTF-8+%E6%97%A0%E6%95%88%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<p>指向同一分配的其他 <code>Rc</code> 指针必须指向完全相同的类型，包括生命周期。</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(get_mut_unchecked)]

</span><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x: Rc&lt;<span class="kw-2">&amp;</span>str&gt; = Rc::new(<span class="string">&quot;Hello, world!&quot;</span>);
{
    <span class="kw">let </span>s = String::from(<span class="string">&quot;Oh, no!&quot;</span>);
    <span class="kw">let </span><span class="kw-2">mut </span>y: Rc&lt;<span class="kw-2">&amp;</span>str&gt; = x.clone().into();
    <span class="kw">unsafe </span>{
        <span class="comment">// 这是未定义的行为，因为 x 的内部类型是 &amp;&#39;long str，而不是 &amp;&#39;short str
        </span><span class="kw-2">*</span>Rc::get_mut_unchecked(<span class="kw-2">&amp;mut </span>y) = <span class="kw-2">&amp;</span>s;
    }
}
<span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">&amp;*</span>x); <span class="comment">// Use-after-free</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(get_mut_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x:+Rc%3C%26str%3E+=+Rc::new(%22Hello,+world!%22);%0A%7B%0A++++let+s+=+String::from(%22Oh,+no!%22);%0A++++let+mut+y:+Rc%3C%26str%3E+=+x.clone().into();%0A++++unsafe+%7B%0A++++++++//+%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%EF%BC%8C%E5%9B%A0%E4%B8%BA+x+%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB%E5%9E%8B%E6%98%AF+%26'long+str%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF+%26'short+str%0A++++++++*Rc::get_mut_unchecked(%26mut+y)+=+%26s;%0A++++%7D%0A%7D%0Aprintln!(%22%7B%7D%22,+%26*x);+//+Use-after-free%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.ptr_eq" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.17.0">1.17.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1186-1188">source</a></span><h4 class="code-header">pub fn <a href="#method.ptr_eq" class="fn">ptr_eq</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>, other: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>如果两个 <code>Rc</code> 以类似于 <a href="../../core/ptr/fn.eq.html" title="fn core::ptr::eq"><code>ptr::eq</code></a> 的方式指向相同的分配，则返回 <code>true</code>。
比较 <code>dyn Trait</code> 指针时的注意事项，请参见 <a href="../../core/ptr/fn.eq.html" title="fn core::ptr::eq">that function</a>。</p>
<h5 id="examples-22"><a href="#examples-22">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);
<span class="kw">let </span>same_five = Rc::clone(<span class="kw-2">&amp;</span>five);
<span class="kw">let </span>other_five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(Rc::ptr_eq(<span class="kw-2">&amp;</span>five, <span class="kw-2">&amp;</span>same_five));
<span class="macro">assert!</span>(!Rc::ptr_eq(<span class="kw-2">&amp;</span>five, <span class="kw-2">&amp;</span>other_five));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0Alet+same_five+=+Rc::clone(%26five);%0Alet+other_five+=+Rc::new(5);%0A%0Aassert!(Rc::ptr_eq(%26five,+%26same_five));%0Aassert!(!Rc::ptr_eq(%26five,+%26other_five));%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3CT%3E-2" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1191-1311">source</a><a href="#impl-Rc%3CT%3E-2" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="../../core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.make_mut" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1245-1275">source</a></span><h4 class="code-header">pub fn <a href="#method.make_mut" class="fn">make_mut</a>(this: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut Self</a>) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class="docblock"><p>对给定的 <code>Rc</code> 进行可变引用。</p>
<p>如果还有其他指向同一分配的 <code>Rc</code> 指针，则 <code>make_mut</code> 会将 <a href="../../core/clone/trait.Clone.html#tymethod.clone" title="method core::clone::Clone::clone"><code>clone</code></a> 的内部值分配给新分配，以确保唯一的所有权。
这也称为写时克隆。</p>
<p>但是，如果没有其他指向此分配的 <code>Rc</code> 指针，而是一些 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针，则 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针将被解除关联，并且不会克隆内部值。</p>
<p>另请参见 <a href="struct.Rc.html#method.get_mut" title="associated function alloc::rc::Rc::get_mut"><code>get_mut</code></a>，它将失败而不是克隆内部值或解除 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针的关联。</p>
<h5 id="examples-23"><a href="#examples-23">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>data = Rc::new(<span class="number">5</span>);

<span class="kw-2">*</span>Rc::make_mut(<span class="kw-2">&amp;mut </span>data) += <span class="number">1</span>;         <span class="comment">// 不会克隆任何东西
</span><span class="kw">let </span><span class="kw-2">mut </span>other_data = Rc::clone(<span class="kw-2">&amp;</span>data); <span class="comment">// 不会克隆内部数据
</span><span class="kw-2">*</span>Rc::make_mut(<span class="kw-2">&amp;mut </span>data) += <span class="number">1</span>;         <span class="comment">// 克隆内部数据
</span><span class="kw-2">*</span>Rc::make_mut(<span class="kw-2">&amp;mut </span>data) += <span class="number">1</span>;         <span class="comment">// 不会克隆任何东西
</span><span class="kw-2">*</span>Rc::make_mut(<span class="kw-2">&amp;mut </span>other_data) <span class="kw-2">*</span>= <span class="number">2</span>;   <span class="comment">// 不会克隆任何东西

// 现在，`data` 和 `other_data` 指向不同的分配。
</span><span class="macro">assert_eq!</span>(<span class="kw-2">*</span>data, <span class="number">8</span>);
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>other_data, <span class="number">12</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+data+=+Rc::new(5);%0A%0A*Rc::make_mut(%26mut+data)+%2B=+1;+++++++++//+%E4%B8%8D%E4%BC%9A%E5%85%8B%E9%9A%86%E4%BB%BB%E4%BD%95%E4%B8%9C%E8%A5%BF%0Alet+mut+other_data+=+Rc::clone(%26data);+//+%E4%B8%8D%E4%BC%9A%E5%85%8B%E9%9A%86%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%0A*Rc::make_mut(%26mut+data)+%2B=+1;+++++++++//+%E5%85%8B%E9%9A%86%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%0A*Rc::make_mut(%26mut+data)+%2B=+1;+++++++++//+%E4%B8%8D%E4%BC%9A%E5%85%8B%E9%9A%86%E4%BB%BB%E4%BD%95%E4%B8%9C%E8%A5%BF%0A*Rc::make_mut(%26mut+other_data)+*=+2;+++//+%E4%B8%8D%E4%BC%9A%E5%85%8B%E9%9A%86%E4%BB%BB%E4%BD%95%E4%B8%9C%E8%A5%BF%0A%0A//+%E7%8E%B0%E5%9C%A8%EF%BC%8C%60data%60+%E5%92%8C+%60other_data%60+%E6%8C%87%E5%90%91%E4%B8%8D%E5%90%8C%E7%9A%84%E5%88%86%E9%85%8D%E3%80%82%0Aassert_eq!(*data,+8);%0Aassert_eq!(*other_data,+12);%0A%7D&amp;edition=2021">Run</a></div>
<p><a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a> 指针将被解除关联：</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span><span class="kw-2">mut </span>data = Rc::new(<span class="number">75</span>);
<span class="kw">let </span>weak = Rc::downgrade(<span class="kw-2">&amp;</span>data);

<span class="macro">assert!</span>(<span class="number">75 </span>== <span class="kw-2">*</span>data);
<span class="macro">assert!</span>(<span class="number">75 </span>== <span class="kw-2">*</span>weak.upgrade().unwrap());

<span class="kw-2">*</span>Rc::make_mut(<span class="kw-2">&amp;mut </span>data) += <span class="number">1</span>;

<span class="macro">assert!</span>(<span class="number">76 </span>== <span class="kw-2">*</span>data);
<span class="macro">assert!</span>(weak.upgrade().is_none());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+mut+data+=+Rc::new(75);%0Alet+weak+=+Rc::downgrade(%26data);%0A%0Aassert!(75+==+*data);%0Aassert!(75+==+*weak.upgrade().unwrap());%0A%0A*Rc::make_mut(%26mut+data)+%2B=+1;%0A%0Aassert!(76+==+*data);%0Aassert!(weak.upgrade().is_none());%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.unwrap_or_clone" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1308-1310">source</a><h4 class="code-header">pub fn <a href="#method.unwrap_or_clone" class="fn">unwrap_or_clone</a>(this: Self) -&gt; T</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>arc_unwrap_or_clone</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/93610">#93610</a>)</span></div></span></summary><div class="docblock"><p>如果我们有 <code>T</code> 的唯一引用，那就打开它。否则，克隆 <code>T</code> 并返回克隆。</p>
<p>假设 <code>rc_t</code> 是 <code>Rc&lt;T&gt;</code> 类型，这个函数在功能上等同于 <code>(*rc_t).clone()</code>，但会尽可能避免克隆内部值。</p>
<h5 id="examples-24"><a href="#examples-24">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(arc_unwrap_or_clone)]
</span><span class="kw">let </span>inner = String::from(<span class="string">&quot;test&quot;</span>);
<span class="kw">let </span>ptr = inner.as_ptr();

<span class="kw">let </span>rc = Rc::new(inner);
<span class="kw">let </span>inner = Rc::unwrap_or_clone(rc);
<span class="comment">// 内部值没有被克隆
</span><span class="macro">assert!</span>(ptr::eq(ptr, inner.as_ptr()));

<span class="kw">let </span>rc = Rc::new(inner);
<span class="kw">let </span>rc2 = rc.clone();
<span class="kw">let </span>inner = Rc::unwrap_or_clone(rc);
<span class="comment">// 因为有两个引用，我们不得不克隆内部值。
</span><span class="macro">assert!</span>(!ptr::eq(ptr, inner.as_ptr()));
<span class="comment">// `rc2` 是最后一个引用，所以当我们打开它时，我们会得到原来的 `String`。
</span><span class="kw">let </span>inner = Rc::unwrap_or_clone(rc2);
<span class="macro">assert!</span>(ptr::eq(ptr, inner.as_ptr()));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(arc_unwrap_or_clone)%5D%0Afn+main()+%7B%0Ause+std::%7Bptr,+rc::Rc%7D;%0Alet+inner+=+String::from(%22test%22);%0Alet+ptr+=+inner.as_ptr();%0A%0Alet+rc+=+Rc::new(inner);%0Alet+inner+=+Rc::unwrap_or_clone(rc);%0A//+%E5%86%85%E9%83%A8%E5%80%BC%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%85%8B%E9%9A%86%0Aassert!(ptr::eq(ptr,+inner.as_ptr()));%0A%0Alet+rc+=+Rc::new(inner);%0Alet+rc2+=+rc.clone();%0Alet+inner+=+Rc::unwrap_or_clone(rc);%0A//+%E5%9B%A0%E4%B8%BA%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8D%E5%BE%97%E4%B8%8D%E5%85%8B%E9%9A%86%E5%86%85%E9%83%A8%E5%80%BC%E3%80%82%0Aassert!(!ptr::eq(ptr,+inner.as_ptr()));%0A//+%60rc2%60+%E6%98%AF%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E5%BD%93%E6%88%91%E4%BB%AC%E6%89%93%E5%BC%80%E5%AE%83%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BC%9A%E5%BE%97%E5%88%B0%E5%8E%9F%E6%9D%A5%E7%9A%84+%60String%60%E3%80%82%0Alet+inner+=+Rc::unwrap_or_clone(rc2);%0Aassert!(ptr::eq(ptr,+inner.as_ptr()));%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Rc%3Cdyn+Any%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1313-1381">source</a><a href="#impl-Rc%3Cdyn+Any%3E" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;dyn <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.downcast" class="method"><span class="rightside"><span class="since" title="Stable since Rust version 1.29.0">1.29.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1334-1344">source</a></span><h4 class="code-header">pub fn <a href="#method.downcast" class="fn">downcast</a>&lt;T: <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a>&gt;(self) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;, <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;dyn <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>尝试将 <code>Rc&lt;dyn Any&gt;</code> 转换为具体类型。</p>
<h5 id="examples-25"><a href="#examples-25">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::any::Any;
<span class="kw">use </span>std::rc::Rc;

<span class="kw">fn </span>print_if_string(value: Rc&lt;<span class="kw">dyn </span>Any&gt;) {
    <span class="kw">if let </span><span class="prelude-val">Ok</span>(string) = value.downcast::&lt;String&gt;() {
        <span class="macro">println!</span>(<span class="string">&quot;String ({}): {}&quot;</span>, string.len(), string);
    }
}

<span class="kw">let </span>my_string = <span class="string">&quot;Hello World&quot;</span>.to_string();
print_if_string(Rc::new(my_string));
print_if_string(Rc::new(<span class="number">0i8</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::any::Any;%0Ause+std::rc::Rc;%0A%0Afn+print_if_string(value:+Rc%3Cdyn+Any%3E)+%7B%0A++++if+let+Ok(string)+=+value.downcast::%3CString%3E()+%7B%0A++++++++println!(%22String+(%7B%7D):+%7B%7D%22,+string.len(),+string);%0A++++%7D%0A%7D%0A%0Alet+my_string+=+%22Hello+World%22.to_string();%0Aprint_if_string(Rc::new(my_string));%0Aprint_if_string(Rc::new(0i8));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.downcast_unchecked" class="method"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1374-1380">source</a><h4 class="code-header">pub unsafe fn <a href="#method.downcast_unchecked" class="fn">downcast_unchecked</a>&lt;T: <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a>&gt;(self) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>downcast_unchecked</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/90850">#90850</a>)</span></div></span></summary><div class="docblock"><p>将 <code>Rc&lt;dyn Any&gt;</code> 向下转换为具体类型。</p>
<p>有关安全的替代方案，请参见 <a href="struct.Rc.html#method.downcast" title="method alloc::rc::Rc::downcast"><code>downcast</code></a>。</p>
<h5 id="examples-26"><a href="#examples-26">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![feature(downcast_unchecked)]

</span><span class="kw">use </span>std::any::Any;
<span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x: Rc&lt;<span class="kw">dyn </span>Any&gt; = Rc::new(<span class="number">1_usize</span>);

<span class="kw">unsafe </span>{
    <span class="macro">assert_eq!</span>(<span class="kw-2">*</span>x.downcast_unchecked::&lt;usize&gt;(), <span class="number">1</span>);
}</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(downcast_unchecked)%5D%0A%0Afn+main()+%7B%0Ause+std::any::Any;%0Ause+std::rc::Rc;%0A%0Alet+x:+Rc%3Cdyn+Any%3E+=+Rc::new(1_usize);%0A%0Aunsafe+%7B%0A++++assert_eq!(*x.downcast_unchecked::%3Cusize%3E(),+1);%0A%7D%0A%7D&amp;version=nightly&amp;edition=2021">Run</a></div>
<h5 id="safety-5"><a href="#safety-5">Safety</a></h5>
<p>包含的值必须是 <code>T</code> 类型。
使用不正确的类型调用此方法是 <em>未定义的行为</em>。</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-AsRef%3CT%3E-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.5.0">1.5.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2719-2723">source</a></span><a href="#impl-AsRef%3CT%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;T&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.as_ref" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2720-2722">source</a><a href="#method.as_ref" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.AsRef.html#tymethod.as_ref" class="fn">as_ref</a>(&amp;self) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>将此类型转换为 (通常是推断的) 输入类型的共享引用。</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Borrow%3CT%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2712-2716">source</a><a href="#impl-Borrow%3CT%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../borrow/trait.Borrow.html" title="trait alloc::borrow::Borrow">Borrow</a>&lt;T&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2713-2715">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="../borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>从拥有的值中一成不变地借用。 <a href="../borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Clone-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1624-1646">source</a><a href="#impl-Clone-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1640-1645">source</a><a href="#method.clone" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&amp;self) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>克隆 <code>Rc</code> 指针。</p>
<p>这将创建另一个指向相同分配的指针，从而增加了强引用计数。</p>
<h5 id="examples-27"><a href="#examples-27">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="kw">let _ </span>= Rc::clone(<span class="kw-2">&amp;</span>five);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Alet+_+=+Rc::clone(%26five);%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl"><a class="srclink rightside" href="../../src/core/clone.rs.html#129">source</a><a href="#method.clone_from" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&amp;mut self, source: <a class="primitive" href="../../core/primitive.reference.html">&amp;Self</a>)</h4></section></summary><div class='docblock'>从 <code>source</code> 执行复制分配。 <a href="../../core/clone/trait.Clone.html#method.clone_from">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1894-1898">source</a><a href="#impl-Debug-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../fmt/trait.Debug.html" title="trait alloc::fmt::Debug">Debug</a>&gt; <a class="trait" href="../fmt/trait.Debug.html" title="trait alloc::fmt::Debug">Debug</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1895-1897">source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="../fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="../fmt/struct.Formatter.html" title="struct alloc::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="../fmt/type.Result.html" title="type alloc::fmt::Result">Result</a></h4></section></summary><div class='docblock'>使用给定的格式化程序格式化该值。 <a href="../fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Default-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1650-1665">source</a><a href="#impl-Default-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="../../core/default/trait.Default.html" title="trait core::default::Default">Default</a>&gt; <a class="trait" href="../../core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.default" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1662-1664">source</a><a href="#method.default" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/default/trait.Default.html#tymethod.default" class="fn">default</a>() -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>用 <code>T</code> 的 <code>Default</code> 值创建一个新的 <code>Rc&lt;T&gt;</code>。</p>
<h5 id="examples-35"><a href="#examples-35">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>x: Rc&lt;i32&gt; = Default::default();
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span>x, <span class="number">0</span>);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+x:+Rc%3Ci32%3E+=+Default::default();%0Aassert_eq!(*x,+0);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Deref-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1565-1572">source</a><a href="#impl-Deref-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Target" class="associatedtype trait-impl"><a href="#associatedtype.Target" class="anchor">§</a><h4 class="code-header">type <a href="../../core/ops/deref/trait.Deref.html#associatedtype.Target" class="associatedtype">Target</a> = T</h4></section></summary><div class='docblock'>解引用后的结果类型。</div></details><details class="toggle method-toggle" open><summary><section id="method.deref" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1569-1571">source</a><a href="#method.deref" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/ops/deref/trait.Deref.html#tymethod.deref" class="fn">deref</a>(&amp;self) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>解引用值。</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Display-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1887-1891">source</a><a href="#impl-Display-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../fmt/trait.Display.html" title="trait alloc::fmt::Display">Display</a>&gt; <a class="trait" href="../fmt/trait.Display.html" title="trait alloc::fmt::Display">Display</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-2" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1888-1890">source</a><a href="#method.fmt-2" class="anchor">§</a><h4 class="code-header">fn <a href="../fmt/trait.Display.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="../fmt/struct.Formatter.html" title="struct alloc::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="../fmt/type.Result.html" title="type alloc::fmt::Result">Result</a></h4></section></summary><div class='docblock'>使用给定的格式化程序格式化该值。 <a href="../fmt/trait.Display.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Drop-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1578-1621">source</a><a href="#impl-Drop-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.drop" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1604-1620">source</a><a href="#method.drop" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/ops/drop/trait.Drop.html#tymethod.drop" class="fn">drop</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>丢弃 <code>Rc</code>。</p>
<p>这将减少强引用计数。
如果强引用计数达到零，那么唯一的其他引用 (如果有) 是 <a href="struct.Weak.html" title="struct alloc::rc::Weak"><code>Weak</code></a>，因此我们将 <code>drop</code> 作为内部值。</p>
<h5 id="examples-37"><a href="#examples-37">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">struct </span>Foo;

<span class="kw">impl </span>Drop <span class="kw">for </span>Foo {
    <span class="kw">fn </span>drop(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="macro">println!</span>(<span class="string">&quot;dropped!&quot;</span>);
    }
}

<span class="kw">let </span>foo  = Rc::new(Foo);
<span class="kw">let </span>foo2 = Rc::clone(<span class="kw-2">&amp;</span>foo);

drop(foo);    <span class="comment">// 不打印任何东西
</span>drop(foo2);   <span class="comment">// 打印 &quot;dropped!&quot;</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Astruct+Foo;%0A%0Aimpl+Drop+for+Foo+%7B%0A++++fn+drop(%26mut+self)+%7B%0A++++++++println!(%22dropped!%22);%0A++++%7D%0A%7D%0A%0Alet+foo++=+Rc::new(Foo);%0Alet+foo2+=+Rc::clone(%26foo);%0A%0Adrop(foo);++++//+%E4%B8%8D%E6%89%93%E5%8D%B0%E4%BB%BB%E4%BD%95%E4%B8%9C%E8%A5%BF%0Adrop(foo2);+++//+%E6%89%93%E5%8D%B0+%22dropped!%22%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3C%26%5BT%5D%3E-for-Rc%3C%5BT%5D%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1930-1945">source</a></span><a href="#impl-From%3C%26%5BT%5D%3E-for-Rc%3C%5BT%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="../../core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;&amp;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-7" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1942-1944">source</a><a href="#method.from-7" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(v: &amp;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h4></section></summary><div class="docblock"><p>分配一个引用计数的切片，并通过克隆 <code>v</code> 的项来填充它。</p>
<h5 id="example-6"><a href="#example-6">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>original: <span class="kw-2">&amp;</span>[i32] = <span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="kw">let </span>shared: Rc&lt;[i32]&gt; = Rc::from(original);
<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="kw-2">&amp;</span>shared[..]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+original:+%26%5Bi32%5D+=+%26%5B1,+2,+3%5D;%0Alet+shared:+Rc%3C%5Bi32%5D%3E+=+Rc::from(original);%0Aassert_eq!(%26%5B1,+2,+3%5D,+%26shared%5B..%5D);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3C%26CStr%3E-for-Rc%3CCStr%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.24.0">1.24.0</span> · <a class="srclink" href="../../src/alloc/ffi/c_str.rs.html#900-908">source</a></span><a href="#impl-From%3C%26CStr%3E-for-Rc%3CCStr%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;&amp;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-8" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/ffi/c_str.rs.html#904-907">source</a><a href="#method.from-8" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(s: &amp;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt;</h4></section></summary><div class="docblock"><p>通过将内容复制到新分配的 <a href="struct.Rc.html" title="struct alloc::rc::Rc"><code>Rc</code></a> 中，将 <code>&amp;CStr</code> 转换为 <code>Rc&lt;CStr&gt;</code>。</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3C%26str%3E-for-Rc%3Cstr%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1949-1964">source</a></span><a href="#impl-From%3C%26str%3E-for-Rc%3Cstr%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;&amp;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-4" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1960-1963">source</a><a href="#method.from-4" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(v: &amp;<a class="primitive" href="../../core/primitive.str.html">str</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;</h4></section></summary><div class="docblock"><p>分配一个引用计数的字符串切片并将 <code>v</code> 复制到其中。</p>
<h5 id="example-4"><a href="#example-4">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>shared: Rc&lt;str&gt; = Rc::from(<span class="string">&quot;statue&quot;</span>);
<span class="macro">assert_eq!</span>(<span class="string">&quot;statue&quot;</span>, <span class="kw-2">&amp;</span>shared[..]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+shared:+Rc%3Cstr%3E+=+Rc::from(%22statue%22);%0Aassert_eq!(%22statue%22,+%26shared%5B..%5D);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CBox%3CT,+Global%3E%3E-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1987-2002">source</a></span><a href="#impl-From%3CBox%3CT,+Global%3E%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="../boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;T, <a class="struct" href="../alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-1" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1999-2001">source</a><a href="#method.from-1" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(v: <a class="struct" href="../boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;T&gt;) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h4></section></summary><div class="docblock"><p>将 boxed 对象移动到引用计数的新分配。</p>
<h5 id="example-1"><a href="#example-1">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>original: Box&lt;i32&gt; = Box::new(<span class="number">1</span>);
<span class="kw">let </span>shared: Rc&lt;i32&gt; = Rc::from(original);
<span class="macro">assert_eq!</span>(<span class="number">1</span>, <span class="kw-2">*</span>shared);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+original:+Box%3Ci32%3E+=+Box::new(1);%0Alet+shared:+Rc%3Ci32%3E+=+Rc::from(original);%0Aassert_eq!(1,+*shared);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CCString%3E-for-Rc%3CCStr%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.24.0">1.24.0</span> · <a class="srclink" href="../../src/alloc/ffi/c_str.rs.html#889-897">source</a></span><a href="#impl-From%3CCString%3E-for-Rc%3CCStr%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="../ffi/struct.CString.html" title="struct alloc::ffi::CString">CString</a>&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-6" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/ffi/c_str.rs.html#893-896">source</a><a href="#method.from-6" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(s: <a class="struct" href="../ffi/struct.CString.html" title="struct alloc::ffi::CString">CString</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="struct" href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt;</h4></section></summary><div class="docblock"><p>通过将 <a href="../ffi/struct.CString.html" title="struct alloc::ffi::CString"><code>CString</code></a> 数据移动到新的 <a href="../sync/struct.Arc.html" title="struct alloc::sync::Arc"><code>Arc</code></a> 缓冲区中，将 <a href="../ffi/struct.CString.html" title="struct alloc::ffi::CString"><code>CString</code></a> 转换为 <code><a href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a href="../../core/ffi/c_str/struct.CStr.html" title="struct core::ffi::c_str::CStr">CStr</a>&gt;</code>。</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CCow%3C'a,+B%3E%3E-for-Rc%3CB%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.45.0">1.45.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2029-2053">source</a></span><a href="#impl-From%3CCow%3C'a,+B%3E%3E-for-Rc%3CB%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a, B&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="../borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, B&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;B&gt;<span class="where fmt-newline">where
    B: <a class="trait" href="../borrow/trait.ToOwned.html" title="trait alloc::borrow::ToOwned">ToOwned</a> + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,
    <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;B&gt;: <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="primitive" href="../../core/primitive.reference.html">&amp;'a B</a>&gt; + <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;B::<a class="associatedtype" href="../borrow/trait.ToOwned.html#associatedtype.Owned" title="type alloc::borrow::ToOwned::Owned">Owned</a>&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-3" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2047-2052">source</a><a href="#method.from-3" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(cow: <a class="enum" href="../borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, B&gt;) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;B&gt;</h4></section></summary><div class="docblock"><p>通过复制其内容，从写时克隆指针创建一个引用计数指针。</p>
<h5 id="example-3"><a href="#example-3">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>cow: Cow&lt;<span class="lifetime">&#39;_</span>, str&gt; = Cow::Borrowed(<span class="string">&quot;eggplant&quot;</span>);
<span class="kw">let </span>shared: Rc&lt;str&gt; = Rc::from(cow);
<span class="macro">assert_eq!</span>(<span class="string">&quot;eggplant&quot;</span>, <span class="kw-2">&amp;</span>shared[..]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Ause+std::borrow::Cow;%0Alet+cow:+Cow%3C'_,+str%3E+=+Cow::Borrowed(%22eggplant%22);%0Alet+shared:+Rc%3Cstr%3E+=+Rc::from(cow);%0Aassert_eq!(%22eggplant%22,+%26shared%5B..%5D);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CRc%3Cstr%3E%3E-for-Rc%3C%5Bu8%5D%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.62.0">1.62.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2056-2072">source</a></span><a href="#impl-From%3CRc%3Cstr%3E%3E-for-Rc%3C%5Bu8%5D%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;[<a class="primitive" href="../../core/primitive.u8.html">u8</a>]&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2068-2071">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(rc: <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>将引用计数的字符串切片转换为字节切片。</p>
<h5 id="example"><a href="#example">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>string: Rc&lt;str&gt; = Rc::from(<span class="string">&quot;eggplant&quot;</span>);
<span class="kw">let </span>bytes: Rc&lt;[u8]&gt; = Rc::from(string);
<span class="macro">assert_eq!</span>(<span class="string">&quot;eggplant&quot;</span>.as_bytes(), bytes.as_ref());</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+string:+Rc%3Cstr%3E+=+Rc::from(%22eggplant%22);%0Alet+bytes:+Rc%3C%5Bu8%5D%3E+=+Rc::from(string);%0Aassert_eq!(%22eggplant%22.as_bytes(),+bytes.as_ref());%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CString%3E-for-Rc%3Cstr%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1968-1983">source</a></span><a href="#impl-From%3CString%3E-for-Rc%3Cstr%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="../string/struct.String.html" title="struct alloc::string::String">String</a>&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-9" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1980-1982">source</a><a href="#method.from-9" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(v: <a class="struct" href="../string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.str.html">str</a>&gt;</h4></section></summary><div class="docblock"><p>分配一个引用计数的字符串切片并将 <code>v</code> 复制到其中。</p>
<h5 id="example-7"><a href="#example-7">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>original: String = <span class="string">&quot;statue&quot;</span>.to_owned();
<span class="kw">let </span>shared: Rc&lt;str&gt; = Rc::from(original);
<span class="macro">assert_eq!</span>(<span class="string">&quot;statue&quot;</span>, <span class="kw-2">&amp;</span>shared[..]);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+original:+String+=+%22statue%22.to_owned();%0Alet+shared:+Rc%3Cstr%3E+=+Rc::from(original);%0Aassert_eq!(%22statue%22,+%26shared%5B..%5D);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CT%3E-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.6.0">1.6.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#1909-1926">source</a></span><a href="#impl-From%3CT%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-5" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1923-1925">source</a><a href="#method.from-5" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; Self</h4></section></summary><div class="docblock"><p>泛型 <code>T</code> 改装成 <code>Rc&lt;T&gt;</code></p>
<p>转换在堆上分配，并将 <code>t</code> 从栈移到堆中。</p>
<h5 id="example-5"><a href="#example-5">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>x = <span class="number">5</span>;
<span class="kw">let </span>rc = Rc::new(<span class="number">5</span>);

<span class="macro">assert_eq!</span>(Rc::from(x), rc);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+x+=+5;%0Alet+rc+=+Rc::new(5);%0A%0Aassert_eq!(Rc::from(x),+rc);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CVec%3CT,+Global%3E%3E-for-Rc%3C%5BT%5D%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2006-2026">source</a></span><a href="#impl-From%3CVec%3CT,+Global%3E%3E-for-Rc%3C%5BT%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="../vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T, <a class="struct" href="../alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-2" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2018-2025">source</a><a href="#method.from-2" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(v: <a class="struct" href="../vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;T&gt;) -&gt; <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h4></section></summary><div class="docblock"><p>分配一个引用计数的切片，并将 <code>v</code> 的项移入其中。</p>
<h5 id="example-2"><a href="#example-2">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>original: Box&lt;Vec&lt;i32&gt;&gt; = Box::new(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);
<span class="kw">let </span>shared: Rc&lt;Vec&lt;i32&gt;&gt; = Rc::from(original);
<span class="macro">assert_eq!</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="kw-2">*</span>shared);</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+original:+Box%3CVec%3Ci32%3E%3E+=+Box::new(vec!%5B1,+2,+3%5D);%0Alet+shared:+Rc%3CVec%3Ci32%3E%3E+=+Rc::from(original);%0Aassert_eq!(vec!%5B1,+2,+3%5D,+*shared);%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-FromIterator%3CT%3E-for-Rc%3C%5BT%5D%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.37.0">1.37.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2089-2131">source</a></span><a href="#impl-FromIterator%3CT%3E-for-Rc%3C%5BT%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/iter/traits/collect/trait.FromIterator.html" title="trait core::iter::traits::collect::FromIterator">FromIterator</a>&lt;T&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from_iter" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2128-2130">source</a><a href="#method.from_iter" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/iter/traits/collect/trait.FromIterator.html#tymethod.from_iter" class="fn">from_iter</a>&lt;I: <a class="trait" href="../../core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = T&gt;&gt;(iter: I) -&gt; Self</h4></section></summary><div class="docblock"><p>获取 <code>Iterator</code> 中的每个元素，并将其收集到 <code>Rc&lt;[T]&gt;</code> 中。</p>
<h5 id="性能特点"><a href="#性能特点">性能特点</a></h5><h6 id="一般情况"><a href="#一般情况">一般情况</a></h6>
<p>在一般情况下，首先要收集到 <code>Vec&lt;T&gt;</code> 中来收集到 <code>Rc&lt;[T]&gt;</code> 中。也就是说，编写以下内容时：</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>evens: Rc&lt;[u8]&gt; = (<span class="number">0</span>..<span class="number">10</span>).filter(|<span class="kw-2">&amp;</span>x| x % <span class="number">2 </span>== <span class="number">0</span>).collect();</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+evens:+Rc%3C%5Bu8%5D%3E+=+(0..10).filter(%7C%26x%7C+x+%25+2+==+0).collect();%0Aassert_eq!(%26*evens,+%26%5B0,+2,+4,+6,+8%5D);%0A%7D&amp;edition=2021">Run</a></div>
<p>这就像我们写的那样：</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>evens: Rc&lt;[u8]&gt; = (<span class="number">0</span>..<span class="number">10</span>).filter(|<span class="kw-2">&amp;</span>x| x % <span class="number">2 </span>== <span class="number">0</span>)
    .collect::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;() <span class="comment">// 第一组分配在此处发生。
    </span>.into(); <span class="comment">// `Rc&lt;[T]&gt;` 的第二个分配在此处进行。</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+evens:+Rc%3C%5Bu8%5D%3E+=+(0..10).filter(%7C%26x%7C+x+%25+2+==+0)%0A++++.collect::%3CVec%3C_%3E%3E()+//+%E7%AC%AC%E4%B8%80%E7%BB%84%E5%88%86%E9%85%8D%E5%9C%A8%E6%AD%A4%E5%A4%84%E5%8F%91%E7%94%9F%E3%80%82%0A++++.into();+//+%60Rc%3C%5BT%5D%3E%60+%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%88%86%E9%85%8D%E5%9C%A8%E6%AD%A4%E5%A4%84%E8%BF%9B%E8%A1%8C%E3%80%82%0Aassert_eq!(%26*evens,+%26%5B0,+2,+4,+6,+8%5D);%0A%7D&amp;edition=2021">Run</a></div>
<p>这将分配构造 <code>Vec&lt;T&gt;</code> 所需的次数，然后分配一次，以将 <code>Vec&lt;T&gt;</code> 转换为 <code>Rc&lt;[T]&gt;</code>。</p>
<h6 id="已知长度的迭代器"><a href="#已知长度的迭代器">已知长度的迭代器</a></h6>
<p>当您的 <code>Iterator</code> 实现 <code>TrustedLen</code> 且大小正确时，将为 <code>Rc&lt;[T]&gt;</code> 进行一次分配。例如：</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>evens: Rc&lt;[u8]&gt; = (<span class="number">0</span>..<span class="number">10</span>).collect(); <span class="comment">// 这里只进行一次分配。</span></code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Alet+evens:+Rc%3C%5Bu8%5D%3E+=+(0..10).collect();+//+%E8%BF%99%E9%87%8C%E5%8F%AA%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E5%88%86%E9%85%8D%E3%80%82%0Aassert_eq!(%26*evens,+%26*(0..10).collect::%3CVec%3C_%3E%3E());%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Hash-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1880-1884">source</a><a href="#impl-Hash-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a>&gt; <a class="trait" href="../../core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.hash" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1881-1883">source</a><a href="#method.hash" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/hash/trait.Hash.html#tymethod.hash" class="fn">hash</a>&lt;H: <a class="trait" href="../../core/hash/trait.Hasher.html" title="trait core::hash::Hasher">Hasher</a>&gt;(&amp;self, state: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut H</a>)</h4></section></summary><div class='docblock'>将该值输入给定的 <a href="../../core/hash/trait.Hasher.html" title="trait core::hash::Hasher"><code>Hasher</code></a>。 <a href="../../core/hash/trait.Hash.html#tymethod.hash">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.hash_slice" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.3.0">1.3.0</span> · <a class="srclink" href="../../src/core/hash/mod.rs.html#237-239">source</a></span><a href="#method.hash_slice" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/hash/trait.Hash.html#method.hash_slice" class="fn">hash_slice</a>&lt;H&gt;(data: &amp;<a class="primitive" href="../../core/primitive.slice.html">[Self]</a>, state: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut H</a>)<span class="where fmt-newline">where
    H: <a class="trait" href="../../core/hash/trait.Hasher.html" title="trait core::hash::Hasher">Hasher</a>,
    Self: <a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>将这种类型的切片送入给定的 <a href="../../core/hash/trait.Hasher.html" title="trait core::hash::Hasher"><code>Hasher</code></a> 中。 <a href="../../core/hash/trait.Hash.html#method.hash_slice">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Ord-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1858-1877">source</a><a href="#impl-Ord-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>&gt; <a class="trait" href="../../core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.cmp" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1874-1876">source</a><a href="#method.cmp" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.Ord.html#tymethod.cmp" class="fn">cmp</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="enum" href="../../core/cmp/enum.Ordering.html" title="enum core::cmp::Ordering">Ordering</a></h4></section></summary><div class="docblock"><p>两个 <code>Rc</code> 的比较。</p>
<p>通过调用 <code>cmp()</code> 的内部值来比较两者。</p>
<h5 id="examples-36"><a href="#examples-36">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;
<span class="kw">use </span>std::cmp::Ordering;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert_eq!</span>(Ordering::Less, five.cmp(<span class="kw-2">&amp;</span>Rc::new(<span class="number">6</span>)));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Ause+std::cmp::Ordering;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert_eq!(Ordering::Less,+five.cmp(%26Rc::new(6)));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.max" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/core/cmp.rs.html#790-792">source</a></span><a href="#method.max" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.Ord.html#method.max" class="fn">max</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>比较并返回两个值中的最大值。 <a href="../../core/cmp/trait.Ord.html#method.max">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.min" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span> · <a class="srclink" href="../../src/core/cmp.rs.html#810-812">source</a></span><a href="#method.min" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.Ord.html#method.min" class="fn">min</a>(self, other: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h4></section></summary><div class='docblock'>比较并返回两个值中的最小值。 <a href="../../core/cmp/trait.Ord.html#method.min">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clamp" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.50.0">1.50.0</span> · <a class="srclink" href="../../src/core/cmp.rs.html#835-838">source</a></span><a href="#method.clamp" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.Ord.html#method.clamp" class="fn">clamp</a>(self, min: Self, max: Self) -&gt; Self<span class="where fmt-newline">where
    Self: <a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/cmp/trait.PartialOrd.html" title="trait core::cmp::PartialOrd">PartialOrd</a>&lt;Self&gt;,</span></h4></section></summary><div class='docblock'>将值限制在某个时间间隔内。 <a href="../../core/cmp/trait.Ord.html#method.clamp">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialEq%3CRc%3CT%3E%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1713-1758">source</a><a href="#impl-PartialEq%3CRc%3CT%3E%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/cmp/trait.PartialEq.html" title="trait core::cmp::PartialEq">PartialEq</a>&gt; <a class="trait" href="../../core/cmp/trait.PartialEq.html" title="trait core::cmp::PartialEq">PartialEq</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.eq" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1733-1735">source</a><a href="#method.eq" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialEq.html#tymethod.eq" class="fn">eq</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>两个 Rc 相等。</p>
<p>即使两个 <code>Rc</code> 的内部值相等，即使它们存储在不同的分配中，它们也相等。</p>
<p>如果 <code>T</code> 还实现了 <code>Eq</code> (暗示相等的反射性)，则指向同一分配的两个 `Rc’ 始终相等。</p>
<h5 id="examples-33"><a href="#examples-33">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five == Rc::new(<span class="number">5</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+==+Rc::new(5));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.ne" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1755-1757">source</a><a href="#method.ne" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialEq.html#method.ne" class="fn">ne</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>两个 <code>Rc</code> 的不等式。</p>
<p>如果两个 Rc 的内部值不相等，则它们不相等。</p>
<p>如果 <code>T</code> 还实现了 <code>Eq</code> (暗示相等的反射性)，则指向同一分配的两个 `Rc’ 始终相等。</p>
<h5 id="examples-34"><a href="#examples-34">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five != Rc::new(<span class="number">6</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+!=+Rc::new(6));%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-PartialOrd%3CRc%3CT%3E%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1764-1855">source</a><a href="#impl-PartialOrd%3CRc%3CT%3E%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/cmp/trait.PartialOrd.html" title="trait core::cmp::PartialOrd">PartialOrd</a>&gt; <a class="trait" href="../../core/cmp/trait.PartialOrd.html" title="trait core::cmp::PartialOrd">PartialOrd</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.partial_cmp" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1780-1782">source</a><a href="#method.partial_cmp" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialOrd.html#tymethod.partial_cmp" class="fn">partial_cmp</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../core/cmp/enum.Ordering.html" title="enum core::cmp::Ordering">Ordering</a>&gt;</h4></section></summary><div class="docblock"><p>两个 <code>Rc</code> 的部分比较。</p>
<p>通过调用 <code>partial_cmp()</code> 的内部值来比较两者。</p>
<h5 id="examples-28"><a href="#examples-28">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;
<span class="kw">use </span>std::cmp::Ordering;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert_eq!</span>(<span class="prelude-val">Some</span>(Ordering::Less), five.partial_cmp(<span class="kw-2">&amp;</span>Rc::new(<span class="number">6</span>)));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0Ause+std::cmp::Ordering;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert_eq!(Some(Ordering::Less),+five.partial_cmp(%26Rc::new(6)));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.lt" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1798-1800">source</a><a href="#method.lt" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialOrd.html#method.lt" class="fn">lt</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>小于两个 Rc 的比较。</p>
<p>通过调用 <code>&lt;</code> 的内部值来比较两者。</p>
<h5 id="examples-29"><a href="#examples-29">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five &lt; Rc::new(<span class="number">6</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+%3C+Rc::new(6));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.le" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1816-1818">source</a><a href="#method.le" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialOrd.html#method.le" class="fn">le</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>两个 <code>Rc</code> 的小于或等于比较。</p>
<p>通过调用 <code>&lt;=</code> 的内部值来比较两者。</p>
<h5 id="examples-30"><a href="#examples-30">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five &lt;= Rc::new(<span class="number">5</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+%3C=+Rc::new(5));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.gt" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1834-1836">source</a><a href="#method.gt" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialOrd.html#method.gt" class="fn">gt</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>大于两个 Rc 的比较。</p>
<p>通过调用 <code>&gt;</code> 的内部值来比较两者。</p>
<h5 id="examples-31"><a href="#examples-31">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five &gt; Rc::new(<span class="number">4</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+%3E+Rc::new(4));%0A%7D&amp;edition=2021">Run</a></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.ge" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1852-1854">source</a><a href="#method.ge" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/cmp/trait.PartialOrd.html#method.ge" class="fn">ge</a>(&amp;self, other: &amp;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;) -&gt; <a class="primitive" href="../../core/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>两个 <code>Rc</code> 的大于或等于比较。</p>
<p>通过调用 <code>&gt;=</code> 的内部值来比较两者。</p>
<h5 id="examples-32"><a href="#examples-32">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="kw">let </span>five = Rc::new(<span class="number">5</span>);

<span class="macro">assert!</span>(five &gt;= Rc::new(<span class="number">5</span>));</code></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn+main()+%7B%0Ause+std::rc::Rc;%0A%0Alet+five+=+Rc::new(5);%0A%0Aassert!(five+%3E=+Rc::new(5));%0A%7D&amp;edition=2021">Run</a></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Pointer-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1901-1905">source</a><a href="#impl-Pointer-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../fmt/trait.Pointer.html" title="trait alloc::fmt::Pointer">Pointer</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-1" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1902-1904">source</a><a href="#method.fmt-1" class="anchor">§</a><h4 class="code-header">fn <a href="../fmt/trait.Pointer.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="../fmt/struct.Formatter.html" title="struct alloc::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="../fmt/type.Result.html" title="type alloc::fmt::Result">Result</a></h4></section></summary><div class='docblock'>使用给定的格式化程序格式化该值。</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-TryFrom%3CRc%3C%5BT%5D%3E%3E-for-Rc%3C%5BT;+N%5D%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.43.0">1.43.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2075-2085">source</a></span><a href="#impl-TryFrom%3CRc%3C%5BT%5D%3E%3E-for-Rc%3C%5BT;+N%5D%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, const N: <a class="primitive" href="../../core/primitive.usize.html">usize</a>&gt; <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.array.html">[T; N]</a>&gt;</h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="../../core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;</h4></section></summary><div class='docblock'>发生转换错误时返回的类型。</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#2078-2084">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(boxed_slice: <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;<a class="primitive" href="../../core/primitive.slice.html">[T]</a>&gt;) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, Self::<a class="associatedtype" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>执行转换。</div></details></div></details><section id="impl-CoerceUnsized%3CRc%3CU%3E%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#338">source</a><a href="#impl-CoerceUnsized%3CRc%3CU%3E%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/marker/trait.Unsize.html" title="trait core::marker::Unsize">Unsize</a>&lt;U&gt;, U: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/ops/unsize/trait.CoerceUnsized.html" title="trait core::ops::unsize::CoerceUnsized">CoerceUnsized</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;U&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-DispatchFromDyn%3CRc%3CU%3E%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#341">source</a><a href="#impl-DispatchFromDyn%3CRc%3CU%3E%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/marker/trait.Unsize.html" title="trait core::marker::Unsize">Unsize</a>&lt;U&gt;, U: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/ops/unsize/trait.DispatchFromDyn.html" title="trait core::ops::unsize::DispatchFromDyn">DispatchFromDyn</a>&lt;<a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;U&gt;&gt; for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-Eq-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#1761">source</a><a href="#impl-Eq-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="../../core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a>&gt; <a class="trait" href="../../core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-RefUnwindSafe-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.58.0">1.58.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#335">source</a></span><a href="#impl-RefUnwindSafe-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="../../core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-Send-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#322">source</a><a href="#impl-Send-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; !<a class="trait" href="../../core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-Sync-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/rc.rs.html#330">source</a><a href="#impl-Sync-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; !<a class="trait" href="../../core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-Unpin-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.33.0">1.33.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#2726">source</a></span><a href="#impl-Unpin-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section><section id="impl-UnwindSafe-for-Rc%3CT%3E" class="impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.9.0">1.9.0</span> · <a class="srclink" href="../../src/alloc/rc.rs.html#333">source</a></span><a href="#impl-UnwindSafe-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="../../core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>&gt; <a class="trait" href="../../core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Rc.html" title="struct alloc::rc::Rc">Rc</a>&lt;T&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/any.rs.html#200">source</a><a href="#impl-Any-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="../../src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="../../core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>获取 <code>self</code> 的 <code>TypeId</code>。 <a href="../../core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Rc%3CT%3E-1" class="impl"><a class="srclink rightside" href="../../src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-Rc%3CT%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../borrow/trait.Borrow.html" title="trait alloc::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow-1" class="method trait-impl"><a class="srclink rightside" href="../../src/core/borrow.rs.html#210">source</a><a href="#method.borrow-1" class="anchor">§</a><h4 class="code-header">fn <a href="../borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>从拥有的值中一成不变地借用。 <a href="../borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../borrow/trait.BorrowMut.html" title="trait alloc::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="srclink rightside" href="../../src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="../borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="../../core/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>从拥有的值中借用。 <a href="../borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3C!%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#740">source</a><a href="#impl-From%3C!%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="primitive" href="../../core/primitive.never.html">!</a>&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-11" class="method trait-impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#741">source</a><a href="#method.from-11" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: <a class="primitive" href="../../core/primitive.never.html">!</a>) -&gt; T</h4></section></summary><div class='docblock'>从输入类型转换为此类型。</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Rc%3CT%3E-1" class="impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#723">source</a><a href="#impl-From%3CT%3E-for-Rc%3CT%3E-1" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-10" class="method trait-impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#726">source</a><a href="#method.from-10" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>返回未更改的参数。</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#707">source</a><a href="#impl-Into%3CU%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#716">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>调用 <code>U::from(self)</code>。</p>
<p>也就是说，这种转换是 <code><a href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> 实现选择执行的任何操作。</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ToOwned-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/borrow.rs.html#82-94">source</a><a href="#impl-ToOwned-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../borrow/trait.ToOwned.html" title="trait alloc::borrow::ToOwned">ToOwned</a> for T<span class="where fmt-newline">where
    T: <a class="trait" href="../../core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Owned" class="associatedtype trait-impl"><a href="#associatedtype.Owned" class="anchor">§</a><h4 class="code-header">type <a href="../borrow/trait.ToOwned.html#associatedtype.Owned" class="associatedtype">Owned</a> = T</h4></section></summary><div class='docblock'>获得所有权后的结果类型。</div></details><details class="toggle method-toggle" open><summary><section id="method.to_owned" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/borrow.rs.html#87-89">source</a><a href="#method.to_owned" class="anchor">§</a><h4 class="code-header">fn <a href="../borrow/trait.ToOwned.html#tymethod.to_owned" class="fn">to_owned</a>(&amp;self) -&gt; T</h4></section></summary><div class='docblock'>从借用的数据创建拥有的数据，通常是通过克隆。 <a href="../borrow/trait.ToOwned.html#tymethod.to_owned">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_into" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/borrow.rs.html#91-93">source</a><a href="#method.clone_into" class="anchor">§</a><h4 class="code-header">fn <a href="../borrow/trait.ToOwned.html#method.clone_into" class="fn">clone_into</a>(&amp;self, target: <a class="primitive" href="../../core/primitive.reference.html">&amp;mut T</a>)</h4></section></summary><div class='docblock'>使用借来的数据来替换拥有的数据，通常是通过克隆。 <a href="../borrow/trait.ToOwned.html#method.clone_into">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ToString-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/alloc/string.rs.html#2513-2527">source</a><a href="#impl-ToString-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="../string/trait.ToString.html" title="trait alloc::string::ToString">ToString</a> for T<span class="where fmt-newline">where
    T: <a class="trait" href="../fmt/trait.Display.html" title="trait alloc::fmt::Display">Display</a> + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.to_string" class="method trait-impl"><a class="srclink rightside" href="../../src/alloc/string.rs.html#2519-2526">source</a><a href="#method.to_string" class="anchor">§</a><h4 class="code-header">default fn <a href="../string/trait.ToString.html#tymethod.to_string" class="fn">to_string</a>(&amp;self) -&gt; <a class="struct" href="../string/struct.String.html" title="struct alloc::string::String">String</a></h4></section></summary><div class='docblock'>将给定值转换为 <code>String</code>。 <a href="../string/trait.ToString.html#tymethod.to_string">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#763">source</a><a href="#impl-TryFrom%3CU%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="../../core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="../../core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="../../core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>发生转换错误时返回的类型。</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from-1" class="method trait-impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#770">source</a><a href="#method.try_from-1" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>执行转换。</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Rc%3CT%3E" class="impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#748">source</a><a href="#impl-TryInto%3CU%3E-for-Rc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-2" class="associatedtype trait-impl"><a href="#associatedtype.Error-2" class="anchor">§</a><h4 class="code-header">type <a href="../../core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>发生转换错误时返回的类型。</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="srclink rightside" href="../../src/core/convert/mod.rs.html#755">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="../../core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>执行转换。</div></details></div></details></div></section></div></main></body></html>
<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>rustdoc æ‰‹å†Œ ä¸­æ–‡ç‰ˆ</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="rustdoc æ‰‹å†Œè¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ rustdoc å‘½ä»¤æˆ– cargo doc æ¥ç”Ÿæˆæ¼‚äº®çš„ crate æ–‡æ¡£ï¼Œå‘å¸ƒ crate å‰å¾ˆæœ‰å¿…è¦ç†Ÿæ‚‰ rustdoc çš„ç›¸å…³å†…å®¹ã€‚">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="what-is-rustdoc.html"><strong aria-hidden="true">1.</strong> ä»€ä¹ˆæ˜¯ rustdoc?</a></li><li class="chapter-item expanded "><a href="how-to-read-rustdoc.html"><strong aria-hidden="true">2.</strong> å¦‚ä½•é˜…è¯» rustdoc çš„è¾“å‡º</a></li><li class="chapter-item expanded "><a href="how-to-write-documentation.html"><strong aria-hidden="true">3.</strong> å¦‚ä½•å†™æ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="what-to-include.html"><strong aria-hidden="true">4.</strong> ä»€ä¹ˆè¢«åŒ…å«ï¼ˆå’Œæ’é™¤ï¼‰</a></li><li class="chapter-item expanded "><a href="command-line-arguments.html"><strong aria-hidden="true">5.</strong> å‘½ä»¤è¡Œå‚æ•°</a></li><li class="chapter-item expanded "><a href="the-doc-attribute.html"><strong aria-hidden="true">6.</strong> #[doc] å±æ€§</a></li><li class="chapter-item expanded "><a href="documentation-tests.html"><strong aria-hidden="true">7.</strong> æ–‡æ¡£æµ‹è¯•</a></li><li class="chapter-item expanded "><a href="linking-to-items-by-name.html"><strong aria-hidden="true">8.</strong> é€šè¿‡ items åç§°é“¾æ¥</a></li><li class="chapter-item expanded "><a href="lints.html"><strong aria-hidden="true">9.</strong> Lints</a></li><li class="chapter-item expanded "><a href="advanced-features.html"><strong aria-hidden="true">10.</strong> é«˜çº§ç‰¹æ€§</a></li><li class="chapter-item expanded "><a href="unstable-features.html"><strong aria-hidden="true">11.</strong> ä¸ç¨³å®šç‰¹æ€§</a></li><li class="chapter-item expanded "><a href="website-features.html"><strong aria-hidden="true">12.</strong> Website features</a></li><li class="chapter-item expanded "><a href="passes.html"><strong aria-hidden="true">13.</strong> Passes</a></li><li class="chapter-item expanded "><a href="references.html"><strong aria-hidden="true">14.</strong> References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">rustdoc æ‰‹å†Œ ä¸­æ–‡ç‰ˆ</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/rust-lang-cn/rustdoc-cn" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#ä»€ä¹ˆæ˜¯-rustdoc" id="ä»€ä¹ˆæ˜¯-rustdoc">ä»€ä¹ˆæ˜¯ rustdocï¼Ÿ</a></h1>
<blockquote>
<p>ä¸­æ–‡ç¿»è¯‘æ³¨ï¼ˆThe Chinese translation of <a href="https://doc.rust-lang.org/rustdoc/">The rustdoc Book</a>ï¼‰ï¼š</p>
<ul>
<li>ğŸ‘‰ æŸ¥çœ‹æ›´å¤š <a href="https://rustwiki.org/" style="color:#97ca00;font-weight:bold;">Rust å®˜æ–¹æ–‡æ¡£ä¸­è‹±æ–‡åŒè¯­æ•™ç¨‹</a>ï¼ŒåŒ…æ‹¬åŒè¯­ç‰ˆ<a href="https://rustwiki.org/zh-CN/book/">ã€ŠRust ç¨‹åºè®¾è®¡è¯­è¨€ã€‹</a>ï¼ˆå‡ºç‰ˆä¹¦åä¸ºã€ŠRust æƒå¨æŒ‡å—ã€‹ï¼‰ï¼Œæœ¬ç«™è¿˜æä¾›äº† <a href="https://rustwiki.org/zh-CN/std/">Rust æ ‡å‡†åº“ä¸­æ–‡ç‰ˆ</a>ã€‚</li>
<li>ã€Šrustdoc æ‰‹å†Œã€‹ï¼ˆ<em>rustdoc Book</em> ä¸­æ–‡ç‰ˆï¼‰ç¿»è¯‘è‡ª <a href="https://doc.rust-lang.org/rustdoc/"><em>rustdoc Book</em></a>ï¼Œå†…å®¹å·²å…¨éƒ¨ç¿»è¯‘å®Œæˆï¼ŒæŸ¥çœ‹æ­¤ä¹¦çš„ <a href="https://github.com/rust-lang-cn/rustdoc-cn">Github ç¿»è¯‘é¡¹ç›®å’Œæºç </a>ã€‚</li>
<li>æœ¬æ–‡ç‰ˆæœ€åæ›´æ–°æ—¶é—´ï¼š2022-02-04ã€‚</li>
<li>æœ¬ä¹¦ä¸»è¦è¯‘è€…ï¼š<a href="https://github.com/wendajiang"><em>David</em></a>ï¼Œ<a href="https://github.com/rust-lang-cn">Rust ä¸­æ–‡ç¿»è¯‘é¡¹ç›®ç»„</a> æˆå‘˜ã€‚</li>
<li><a href="https://rustwiki.org/en/rustdoc/" style="color:red;">æœ¬ç«™æ”¯æŒæ–‡æ¡£ä¸­è‹±æ–‡åˆ‡æ¢</a>ï¼Œç‚¹å‡»é¡µé¢å³ä¸Šè§’è¯­è¨€å›¾æ ‡å¯åˆ‡æ¢åˆ°ç›¸åŒç« èŠ‚çš„è‹±æ–‡é¡µé¢ï¼Œ<strong>è‹±æ–‡ç‰ˆæ¯å¤©éƒ½ä¼šè‡ªåŠ¨åŒæ­¥ä¸€æ¬¡å®˜æ–¹çš„æœ€æ–°ç‰ˆæœ¬</strong>ã€‚</li>
<li>è‹¥å‘ç°å½“å‰é¡µè¡¨è¾¾é”™è¯¯æˆ–å¸®åŠ©æˆ‘ä»¬æ”¹è¿›ç¿»è¯‘ï¼Œå¯ç‚¹å‡»å³ä¸Šè§’çš„ç¼–è¾‘æŒ‰é’®æ‰“å¼€è¯¥é¡µå¯¹åº”æºç æ–‡ä»¶è¿›è¡Œç¼–è¾‘å’Œä¿®æ”¹ï¼ŒRust ä¸­æ–‡èµ„æºçš„å¼€æºç»„ç»‡å‘å±•ç¦»ä¸å¼€å¤§å®¶ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒå’Œå¸®åŠ©ï¼</li>
</ul>
</blockquote>
<p>æ ‡å‡† Rust ç‰ˆæœ¬åŒ…å«äº†åä¸º <code>rustdoc</code> çš„å·¥å…·ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸º Rust é¡¹ç›®ç”Ÿæˆæ–‡æ¡£ï¼ŒRustdoc æ¥å—ä¸€ä¸ª crate æ ¹ç›®å½•æˆ–è€…ä¸€ä¸ª markdown æ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œç”Ÿæˆ HTMLï¼ŒCSS å’Œ JavaScript æ–‡ä»¶ã€‚</p>
<h2><a class="header" href="#åŸºæœ¬ä½¿ç”¨" id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</a></h2>
<p>è®©æˆ‘ä»¬è¯•ç”¨ä¸€ä¸‹ï¼Œä½¿ç”¨ Cargo åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p>
<pre><code class="language-bash">$ cargo new docs --lib
$ cd docs
</code></pre>
<p>åœ¨ <code>src/lib.rs</code> ä¸­ï¼ŒCargo ç”Ÿæˆäº†ä¸€äº›äº‹ä¾‹ä»£ç ï¼Œåˆ æ‰ä½¿ç”¨ä¸‹é¢çš„ä»£ç ä»£æ›¿</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// foo is a function
fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶åæˆ‘ä»¬è¿è¡Œ <code>rustdoc</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ crate æ ¹ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs
</code></pre>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°ç›®å½• <code>doc</code>ï¼Œå…¶ä¸­æ˜¯ä¸€ä¸ªç½‘ç«™ç»“æ„ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸»é¡µé¢æ˜¯ <code>doc/lib/index.html</code>ã€‚å¦‚æœä½ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå¯ä»¥åœ¨ tab æ çœ‹åˆ° &quot;Crate lib&quot;ï¼Œé¡µé¢æ²¡æœ‰å†…å®¹ã€‚</p>
<h2><a class="header" href="#é…ç½®-rustdoc" id="é…ç½®-rustdoc">é…ç½® rustdoc</a></h2>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šç¬¬ä¸€ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬çš„åŒ…åå­—æ˜¯ &quot;lib&quot;ï¼Ÿç¬¬äºŒï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ä»»ä½•å†…å®¹ï¼Ÿ</p>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜çš„åŸå› æ˜¯å› ä¸º <code>rustdoc</code> è¯•å›¾æ›´å¥½ç”¨ï¼Œåƒ <code>rustc</code> å°±å‡å®šæˆ‘ä»¬ crate çš„åå­—å°±æ˜¯ crate æ ¹ç›®å½•æ–‡ä»¶çš„åå­—ã€‚ä¸ºäº†ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä¼ é€’å‚æ•°ï¼š</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --crate-name docs
</code></pre>
<p>ç°åœ¨ï¼Œ <code>doc/docs/index.html</code> æ–‡ä»¶ç”Ÿæˆï¼Œé¡µé¢åç§°ä¸º &quot;Crate docs&quot;ã€‚</p>
<p>å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„å‡½æ•° <code>foo</code> ä¸æ˜¯å…¬å…±çš„ï¼›<code>rustdoc</code> é»˜è®¤åªä¼šä¸ºå…¬å…±å‡½æ•°ç”Ÿæˆæ–‡æ¡£ï¼Œå¦‚æœæˆ‘ä»¬å°†ä»£ç ä¿®æ”¹ä¸º</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// foo is a function
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶åé‡æ–°è¿è¡Œ <code>rustdoc</code>:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --crate-name docs
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬ç”Ÿæˆäº†æ–‡æ¡£ï¼Œæ‰“å¼€ <code>doc/docs/index.html</code>ï¼Œæ˜¾ç¤ºäº† <code>foo</code> å‡½æ•°çš„è¿æ¥é¡µé¢ï¼Œæ–‡ä»¶ä½ç½®æ˜¯ <code>doc/docs/fn.foo.html</code>ã€‚åœ¨å‡½æ•°çš„é¡µé¢ä¸Šï¼Œä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å†™çš„æ³¨é‡Š &quot;foo is a function&quot;ã€‚</p>
<h2><a class="header" href="#é€šè¿‡-cargo-ä½¿ç”¨-rustdoc" id="é€šè¿‡-cargo-ä½¿ç”¨-rustdoc">é€šè¿‡ Cargo ä½¿ç”¨ rustdoc</a></h2>
<p>Cargo æ•´åˆäº† <code>rustdoc</code>ï¼Œä½¿å¾—ç”Ÿæˆæ–‡æ¡£æ›´å®¹æ˜“ã€‚ä»£æ›¿ <code>rustdoc</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code class="language-bash">$ cargo doc
</code></pre>
<p>å®é™…ä¸Šï¼Œä¼šè¿™æ ·è°ƒç”¨ <code>rustdoc</code>:</p>
<pre><code class="language-bash">$ rustdoc --crate-name docs src/lib.rs -o &lt;path&gt;/docs/target/doc -L
dependency=&lt;path&gt;/docs/target/debug/deps
</code></pre>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>cargo doc --verbose</code> çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p>å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆæ­£ç¡®çš„ crate åç§° <code>--crate-name</code>ï¼ŒåŒæ—¶æŒ‡å‘ <code>src/lib.rs</code>ã€‚ä½†æ˜¯å…¶ä»–çš„å‚æ•°è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li><code>-o</code> æ§åˆ¶æ–‡æ¡£çš„è¾“å‡ºã€‚ä¸ä½¿ç”¨é¡¶å±‚çš„ <code>doc</code> ç›®å½•ï¼ŒCargo ä¼šæŠŠç”Ÿæˆçš„æ–‡æ¡£ç”Ÿæˆåœ¨ <code>target</code>ã€‚è¿™æ˜¯ Cargo é¡¹ç›®çš„æƒ¯ç”¨ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®ã€‚</li>
<li><code>-L</code> å¸®åŠ© rustdoc æ‰¾åˆ°ä»£ç çš„ä¾èµ–ï¼Œå¦‚æœæˆ‘ä»¬çš„é¡¹ç›®æœ‰ä¾èµ–ï¼Œä¹Ÿä¼šç”Ÿæˆä¾èµ–çš„æ–‡æ¡£ã€‚</li>
</ul>
<h2><a class="header" href="#outer-å’Œ-inner-æ–‡æ¡£" id="outer-å’Œ-inner-æ–‡æ¡£">Outer å’Œ inner æ–‡æ¡£</a></h2>
<p><code>///</code> è¯­æ³•ç”¨æ¥å¯¹ä¸‹é¢ä¸€ä¸ª item ç”Ÿæˆæ–‡æ¡£ï¼Œæ‰€ä»¥ç§°ä¸º outer æ–‡æ¡£ã€‚è¿˜æœ‰è¯­æ³•<code>//!</code>ï¼Œç”¨æ¥ç”Ÿæˆ item å†…éƒ¨çš„æ–‡æ¡£ï¼Œä¹Ÿå«åš inner æ–‡æ¡£ï¼Œé€šå¸¸ç”¨æ¥å¯¹æ•´ä¸ª crate ç”Ÿæˆæ–‡æ¡£ï¼Œå› ä¸ºæ˜¯ crate çš„æ ¹ï¼Œæ²¡æœ‰ item åœ¨å‰é¢ã€‚æ‰€ä»¥ä¸ºäº†ç”Ÿæˆæ•´ä¸ª crate çš„æ–‡æ¡£ï¼Œä½ éœ€è¦è¿™æ ·ç”¨ <code>//!</code>ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! This is my first rust crate
<span class="boring">}
</span></code></pre></pre>
<p>å½“è¿™æ ·ç”¨çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆ item å†…éƒ¨çš„æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯ crate è‡ªå·±ã€‚</p>
<p>ä¸ºäº†è·å–æ›´å¤š <code>//!</code> çš„ä¿¡æ¯ï¼Œè¯·çœ‹ <a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#commenting-contained-items">the Book</a></p>
<h2><a class="header" href="#åˆ©ç”¨å•ç‹¬çš„-markdown-æ–‡ä»¶" id="åˆ©ç”¨å•ç‹¬çš„-markdown-æ–‡ä»¶">åˆ©ç”¨å•ç‹¬çš„ Markdown æ–‡ä»¶</a></h2>
<p><code>rustdoc</code> å¯ä»¥ä¸ºå•ç‹¬çš„ markdown æ–‡ä»¶ç”Ÿæˆ HTMLã€‚è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼Œåˆ›å»º<code>README.md</code>ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹</p>
<pre><code class="language-text"># Docs

This is a project to test out `rustdoc`.

[Here is a link!](https://www.rust-lang.org)

## Example

```rust
fn foo() -&gt; i32 {
    1 + 1
}
```
</code></pre>
<p>ç„¶åè¿è¡Œ <code>rustdoc</code> å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">$ rustdoc README.md
</code></pre>
<p>ä½ èƒ½å‘ç°ç”Ÿæˆçš„ <code>docs/doc/README.html</code> æ–‡ä»¶ã€‚</p>
<p>ä¸è¿‡ç°åœ¨ Cargo ä¸èƒ½è¿™æ ·æ“ä½œ markdown æ–‡ä»¶ã€‚</p>
<h2><a class="header" href="#æ€»ç»“" id="æ€»ç»“">æ€»ç»“</a></h2>
<p>æœ¬èŠ‚æ¶µç›–äº† <code>rustdoc</code> çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚æœ¬ä¹¦çš„å‰©ä½™éƒ¨åˆ†ä¼šå±•ç¤º <code>rustdoc</code> æ‰€æœ‰çš„å¯é€‰åŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h1><a class="header" href="#å¦‚ä½•é˜…è¯»-rustdoc-çš„è¾“å‡º" id="å¦‚ä½•é˜…è¯»-rustdoc-çš„è¾“å‡º">å¦‚ä½•é˜…è¯» rustdoc çš„è¾“å‡º</a></h1>
<p>Rustdoc çš„ HTML æ–‡ä»¶åŒ…å«äº†æœ‰ç”¨çš„è·³è½¬å…¥å£ï¼Œä¾¿äºç”¨æˆ·è·³è½¬ç†è§£ä½ çš„ä»£ç ã€‚æœ¬ç« ä¼šè¦†ç›–å…¥å£çš„ä¸»è¦ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è‰¯å¥½çš„æ–‡æ¡£ä½œè€…å’Œç”¨æˆ·çš„å¼€ç«¯ã€‚</p>
<h2><a class="header" href="#ç»“æ„" id="ç»“æ„">ç»“æ„</a></h2>
<p><code>rustdoc</code> çš„è¾“å‡ºåŒ…å«ä¸‰éƒ¨åˆ†ï¼Œå·¦ä¾§æ˜¯æ•´ä¸ªé¡µé¢çš„å¿«é€Ÿå¯¼èˆªï¼Œå±•ç¤ºäº†å½“å‰æ¡ç›®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚é¡µé¢çš„å³ä¾§å¤§ç‰ˆé¢ç”±é¡¶éƒ¨çš„æœç´¢å’Œä¸‹é¢çš„æ–‡æ¡£é¡µé¢ä¸»ä½“ç»„æˆã€‚</p>
<h2><a class="header" href="#item-æ–‡æ¡£" id="item-æ–‡æ¡£">Item æ–‡æ¡£</a></h2>
<p>å±å¹•çš„ä¸»è¦åŒºåŸŸå±•ç¤ºçš„æ˜¯ item çš„æ–‡æ¡£ã€‚</p>
<p>é¡¶ç«¯æ˜¯ä¸€è§ˆä¿¡æ¯ï¼š</p>
<ul>
<li>item çš„ç±»å‹å’Œåç§°ï¼Œæ¯”å¦‚ &quot;Struct <code>std::time::Duration</code>&quot;ï¼›</li>
<li>å¤åˆ¶ crate è·¯å¾„çš„æŒ‰é’®ï¼›</li>
<li>å±•å¼€å’Œæ”¶èµ· item é¡¶å±‚æ–‡æ¡£çš„æŒ‰é’® (<code>[+]</code> or <code>[-]</code>)ï¼›</li>
<li>å¦‚æœ <a href="the-doc-attribute.html#html_no_source">configured</a>, å¹¶ä¸”å¯ä»¥å±•ç¤ºï¼ˆå¦‚æœæ–‡æ¡£åˆ›å»ºé€šè¿‡ <code>cargo doc --no-deps</code> æºç å¯èƒ½æ˜¯æ— æ•ˆçš„ï¼‰ï¼Œä¼šæœ‰æºç çš„è¿æ¥ (<code>[src]</code>)ï¼›</li>
<li>å¦‚æœ item æ˜¯æ ‡å‡†åº“ï¼Œä¼šå±•ç¤º item ç¨³å®šçš„ç‰ˆæœ¬ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ item çš„ä¸»è¦æ–‡æ¡£ï¼ŒåŒ…æ‹¬å‡½æ•°ç­¾åï¼ŒRust ç±»å‹çš„ fields åˆ—è¡¨æˆ–è€… variantsã€‚æœ€åé¡µé¢åˆ—å‡ºå…³è”çš„å‡½æ•°ä»¥åŠ trait å®ç°ï¼ŒåŒ…æ‹¬ <code>rustdoc</code> çŸ¥é“çš„è‡ªåŠ¨å’Œç©ºç™½å®ç°ã€‚</p>
<h3><a class="header" href="#å¯¼èˆª" id="å¯¼èˆª">å¯¼èˆª</a></h3>
<p>subheadingsï¼Œvariantsï¼Œfields å’Œæ–‡æ¡£ä¸­å¾ˆå¤šå…ƒç´ éƒ½æ˜¯é”šï¼Œå¯ä»¥è¢«é“¾æ¥ï¼Œè¿™æ˜¯å¯ä»¥å‡†ç¡®ä¼ é€’ä½ è¡¨è¾¾çš„å¥½æ–¹æ³•ã€‚å½“æ‚¬åœæˆ–ç»™å®šé”®ç›˜ç„¦ç‚¹æ—¶ï¼Œå°åˆ·ç¬¦å· &quot;Â§&quot; å‡ºç°åœ¨å¸¦æœ‰é”šç‚¹çš„è¡Œæ—è¾¹ã€‚</p>
<h2><a class="header" href="#å¯¼èˆªæ " id="å¯¼èˆªæ ">å¯¼èˆªæ </a></h2>
<p>æ¯”å¦‚ï¼Œå½“æŸ¥çœ‹ crate æ ¹æ–‡æ¡£çš„æ—¶å€™ï¼Œä¼šå±•ç¤ºæ‰€æœ‰çš„ crate æ–‡æ¡£çš„ modulesï¼Œstructsï¼Œtraitsï¼Œfunctionsï¼Œmacros çš„å¿«é€Ÿé“¾æ¥ã€‚é¡¶éƒ¨ï¼Œåœ¨å½“å‰ crate åç§°å’Œç‰ˆæœ¬æ—è¾¹æˆ–è€…å½“å‰ item æ—è¾¹å±•ç¤º <a href="the-doc-attribute.html#html_logo_url">configurable logo</a>ã€‚</p>
<h2><a class="header" href="#ä¸»é¢˜é€‰æ‹©å’Œæœç´¢æ " id="ä¸»é¢˜é€‰æ‹©å’Œæœç´¢æ ">ä¸»é¢˜é€‰æ‹©å’Œæœç´¢æ </a></h2>
<p>å½“åœ¨æ”¯æŒ JavaScript çš„æµè§ˆå™¨ä¸­æ‰“å¼€ <code>rustdoc</code> çš„è¾“å‡ºæ—¶ï¼Œé¡µé¢é¡¶éƒ¨ä¼šå‡ºç°ä¸€ä¸ªæ¥å£ï¼Œå·¦ä¾§æ˜¯ä¸»é¢˜é€‰æ‹©ï¼ˆä¸€ä¸ªç”»ç¬”å›¾æ ‡ï¼‰ï¼Œæœç´¢æ ï¼Œå¸®åŠ©æç¤ºå’Œé…ç½®æŒ‰é’®ã€‚ã€è¯‘è€…æ³¨ï¼šä¸»é¢˜é€‰æ‹©å·²ç»åœ¨é…ç½®è®¾ç½®ä¸­ã€‘</p>
<h3><a class="header" href="#ä¸»é¢˜é€‰æ‹©" id="ä¸»é¢˜é€‰æ‹©">ä¸»é¢˜é€‰æ‹©</a></h3>
<p>ç‚¹å‡»ä¸»é¢˜é€‰æ‹©ä¼šåˆ—å‡ºå¯é€‰ä¸»é¢˜ï¼Œé»˜è®¤æ˜¯ <code>ayu</code>, <code>light</code>, and <code>dark</code>ã€‚</p>
<h3><a class="header" href="#æœç´¢æ " id="æœç´¢æ ">æœç´¢æ </a></h3>
<p>åœ¨æœç´¢æ è¾“å…¥å†…å®¹ï¼Œä¼šæ¨¡ç³ŠåŒ¹é…æœç´¢å½“å‰çš„æ–‡æ¡£</p>
<p>é»˜è®¤æœç´¢ç»“æœæ˜¾ç¤ºæŒ‰ç…§åç§°çš„ç»“æœï¼Œæ„å‘³ç€æ¨¡ç³ŠåŒ¹é… item çš„åç§°ï¼ŒåŒ¹é…çš„åç§°æ˜¾ç¤ºåœ¨å·¦ä¾§ï¼Œå¦‚æœæœ‰æè¿°ä¼šæ˜¾ç¤ºåœ¨å³ä¾§ï¼Œç‚¹å‡» itemï¼Œä½ ä¼šè·³è½¬åˆ°å¯¹åº”çš„é¡µé¢</p>
<p>è¿˜æœ‰ä¸¤ç§ç»“æœï¼ŒæŒ‰ç…§å‚æ•°æœç´¢ï¼Œå±•ç¤ºå‡½æ•°å‚æ•°ä¸­ç±»å‹çš„åŒ¹é…ç»“æœï¼ŒæŒ‰è¿”å›å€¼æœç´¢ï¼Œå±•ç¤ºå‡½æ•°è¿”å›å€¼ç±»å‹çš„æœç´¢ç»“æ„ã€‚è¿™ä¸¤ç§æœç´¢ç»“æœåœ¨ä½ ä¸çŸ¥é“å‡½æ•°åç§°ï¼Œä½†æ˜¯çŸ¥é“ä½ æƒ³è¦çš„ç±»å‹æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>å½“åœ¨æœç´¢æ è¾“å…¥æ—¶ï¼Œå¯ä»¥é€šè¿‡å†’å·å‰ç¼€æ¥é™åˆ¶æœç´¢ç»“æœçš„ç±»å‹ï¼ˆæ¯”å¦‚ <code>mod:</code>ï¼‰</p>
<h3><a class="header" href="#å¿«æ·é”®" id="å¿«æ·é”®">å¿«æ·é”®</a></h3>
<p>æŒ‰ä¸‹ <code>S</code> ç„¦ç‚¹ä¼šç§»åŠ¨åˆ°æœç´¢æ¡†ï¼ŒæŒ‰ä¸‹ <code>?</code> ä¼šå±•ç¤ºå¸®åŠ©ç•Œé¢ï¼Œå…¶ä¸­åŒ…æ‹¬æ‰€æœ‰å¿«æ·é”®ä»¥åŠè¯´æ˜ã€‚æŒ‰ä¸‹ <code>T</code> ç„¦ç‚¹ç§»åŠ¨åˆ°ä¸»é¢˜é€‰æ‹©ã€‚ã€è¯‘è€…æ³¨ï¼šä¸»é¢˜é€‰æ‹©é€šè¿‡æœç´¢æ çš„å³ä¾§ setting æŒ‰é’®å”¤å‡ºã€‘</p>
<p>å½“ç„¦ç‚¹åœ¨æœç´¢ç»“æœæ—¶ï¼Œå·¦å³ç®­å¤´å¯ä»¥åˆ‡æ¢æœç´¢çš„ tabï¼Œä¸Šä¸‹ç®­å¤´å¯ä»¥ç§»åŠ¨å…³æ³¨çš„æœç´¢ç»“æœã€‚æŒ‰ä¸‹å›è½¦é”®å¯ä»¥æ‰“å¼€é«˜äº®çš„ç»“æœã€‚</p>
<p>å½“ç„¦ç‚¹åœ¨ item æ–‡æ¡£æ—¶ï¼ŒåŠ å·å’Œå‡å·å¯ä»¥å±•å¼€æ”¶èµ·æ–‡æ¡£çš„å°ç»“ã€‚</p>
<h1><a class="header" href="#å¦‚ä½•å†™æ–‡æ¡£" id="å¦‚ä½•å†™æ–‡æ¡£">å¦‚ä½•å†™æ–‡æ¡£</a></h1>
<p>å¥½çš„æ–‡æ¡£å¹¶ä¸è‡ªç„¶ã€‚å­˜åœ¨ä¸€äº›çŸ›ç›¾çš„ç›®æ ‡ä½¿å¾—å†™å¥½æ–‡æ¡£å¾ˆå›°éš¾ã€‚å³è¦æ±‚å¯¹é¢†åŸŸå¾ˆä¸“ä¸šåˆè¦å†™å‡ºå¯¹æ–°æ‰‹å¾ˆå‹å¥½çš„æ–‡æ¡£ã€‚æ–‡æ¡£å› æ­¤ç»å¸¸éšå»ä¸€äº›ç»†èŠ‚ï¼Œæˆ–è€…ç•™ç»™è¯»è€…ä¸€äº›æœªè§£ç­”çš„é—®é¢˜ã€‚</p>
<p>Rust æ–‡æ¡£æœ‰ä¸€äº›åŸåˆ™æŒ‡å¯¼ä»»ä½•äººæ¥å†™æ–‡æ¡£ï¼Œä»è€Œæ¯ä¸ªäººéƒ½æœ‰æœºä¼šæ¥ä½¿ç”¨ä»£ç ã€‚</p>
<p>æœ¬ç« ä¸ä»…è¦†ç›–å¦‚ä½•ç¼–å†™æ–‡æ¡£ï¼Œè¿˜ä»‹ç»äº†å¦‚ä½•å†™å‡º<strong>å¥½</strong>æ–‡æ¡£ã€‚å°½å¯èƒ½æ¸…æ™°å®Œæ•´éå¸¸é‡è¦ã€‚æ ¹æ®ç»éªŒï¼šä½ ç¼–å†™çš„æ–‡æ¡£è¶Šå¤šä½ çš„ crate è¶Šå¥½ã€‚å¦‚æœ item æ˜¯å…¬å…±çš„ï¼Œå°±åº”è¯¥æœ‰æ–‡æ¡£ã€‚</p>
<h2><a class="header" href="#å¼€å§‹" id="å¼€å§‹">å¼€å§‹</a></h2>
<p>ç¼–å†™ crate æ–‡æ¡£é¦–å…ˆåº”è¯¥ä»é¦–é¡µå¼€å§‹ã€‚ä¾‹å¦‚ <a href="https://docs.rs/hashbrown/0.8.2/hashbrown/"><code>hashbrown</code></a> crate çº§åˆ«çš„æ–‡æ¡£æ€»ç»“äº†è¿™ä¸ª crate çš„è§’è‰²æ˜¯ä»€ä¹ˆï¼Œè¯´æ˜äº†ä½¿ç”¨çš„è¯¦ç»†æŠ€æœ¯ï¼Œä»¥åŠä¸ºä»€ä¹ˆä½ éœ€è¦è¿™ä¸ª crateã€‚</p>
<p>åœ¨ä»‹ç»äº† crate ä¹‹åï¼Œé¦–é¡µç»™å‡ºä½¿ç”¨ crate çš„ä»£ç ç¤ºä¾‹å¾ˆé‡è¦ã€‚åœ¨ä»£ç ä¾‹å­ä¸­å±•ç¤ºåº“å¦‚ä½•ä½¿ç”¨ï¼Œä¸è¦ä½¿ç”¨è£å‰ªè¿‡çš„ä»£ç ï¼Œ
ä½¿å¾—ç”¨æˆ·å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´å°±èƒ½è¿è¡Œã€‚</p>
<p><a href="https://docs.rs/futures/0.3.5/futures/"><code>futures</code></a> ä½¿ç”¨å†…è”æ³¨é‡Šé€è¡Œè§£é‡Šä½¿ç”¨ <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>Future</code></a> çš„å¤æ‚æ€§ï¼Œå› ä¸ºç”¨æˆ·æ¥è§¦ rust çš„ <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>Future</code></a> çš„ç¬¬ä¸€ä¸ªä¾‹å­å¯èƒ½å°±æ˜¯è¿™ä¸ªã€‚</p>
<p><a href="https://docs.rs/backtrace/0.3.50/backtrace/"><code>backtrace</code></a> æ–‡æ¡£æè¿°äº†æ•´ä¸ªä½¿ç”¨è¿‡ç¨‹ï¼Œè¯´æ˜äº† <code>Cargo.toml</code> æ–‡ä»¶åº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Œä¼ é€’å‘½ä»¤è¡Œå‚æ•°ç»™ç¼–è¯‘å™¨ï¼Œå¹¶å±•ç¤ºäº†ä¸€ä¸ªä½¿ç”¨ backtrace çš„ä¾‹å­ã€‚</p>
<p>æœ€åï¼Œé¦–é¡µä¼šæˆä¸ºå¦‚ä½•ä½¿ç”¨ crate çš„ç»¼åˆå‚è€ƒï¼Œå°±åƒ <a href="https://docs.rs/regex/1.3.9/regex/"><code>regex</code></a>ã€‚åœ¨è¿™ä¸ªé¦–é¡µï¼Œæ‰€æœ‰çš„ä¾èµ–è¢«åˆ—å‡ºï¼Œè¾¹ç¼˜æƒ…å†µè¢«åˆ—å‡ºï¼Œå®é™…ä¾‹å­è¢«åˆ—å‡ºã€‚ç„¶åé¦–é¡µç»§ç»­å±•ç¤ºå¦‚ä½•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œç„¶åè¿˜åˆ—å‡ºäº† crate çš„ç‰¹æ€§ã€‚</p>
<p>ä¸è¦æ‹…å¿ƒä½ çš„æ–° crate ä¸å·²ç»å¼€å‘ä¸€æ®µæ—¶é—´çš„ crate æ¯”è¾ƒã€‚è¦æ˜¯æ–‡æ¡£é€æ­¥å®Œå–„ï¼Œè¯·é€æ­¥å¼€å§‹æ·»åŠ ä»‹ç»ï¼Œç¤ºä¾‹å’Œç‰¹æ€§ã€‚ç½—é©¬ä¸æ˜¯ä¸€å¤©å»ºæˆçš„ï¼</p>
<p><code>lib.rs</code> çš„ç¬¬ä¸€è¡Œå¼€å§‹ä¼šæ˜¯é¦–é¡µï¼Œå®ƒä»¬ä¸ rustdoc å…¶ä»–éƒ¨åˆ†ä¸åŒï¼Œè¦ä»¥ <code>//!</code> å¼€å§‹è¡¨æ˜è¿™æ˜¯æ¨¡å—çº§åˆ«æˆ–è€… crate çº§åˆ«çš„æ–‡æ¡£ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! Fast and easy queue abstraction.
//!
//! Provides an abstraction over a queue.  When the abstraction is used
//! there are these advantages:
//! - Fast
//! - [`Easy`]
//!
//! [`Easy`]: http://thatwaseasy.example.com

/// This module makes it easy.
pub mod easy {

    /// Use the abstraction function to do this specific thing.
    pub fn abstraction() {}

}
<span class="boring">}
</span></code></pre></pre>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ–‡æ¡£ç¬¬ä¸€è¡Œæ˜¯æ²¡æœ‰æŠ€æœ¯ç»†èŠ‚çš„å¥å­ï¼Œä½†æ˜¯å¾ˆå¥½çš„æè¿°äº†åœ¨ Rust ç”Ÿæ€ä¸­çš„ä½ç½®ã€‚
é˜…è¯»è¿™è¡Œåï¼Œç”¨æˆ·åº”è¯¥çŸ¥é“ crate æ˜¯å¦æ»¡è¶³ä»–ä»¬çš„éœ€è¦ã€‚</p>
<h2><a class="header" href="#æ–‡æ¡£ç»„æˆ" id="æ–‡æ¡£ç»„æˆ">æ–‡æ¡£ç»„æˆ</a></h2>
<p>æ— è®ºæ˜¯ modules, structs, funtions, macrosï¼šä»£ç çš„å…¬å…± API éƒ½åº”è¯¥æœ‰æ–‡æ¡£ã€‚å¾ˆå°‘æœ‰äººå«Œå¼ƒæ–‡æ¡£å¤ªå¤šï¼</p>
<p>æ¯ä¸ª item çš„æ–‡æ¡£åº”è¯¥éƒ½ä»¥ä¸‹é¢çš„ç»“æ„æ„æˆï¼š</p>
<pre><code class="language-text">[short sentence explaining what it is]

[more detailed explanation]

[at least one code example that users can copy/paste to try it]

[even more advanced explanations if necessary]
</code></pre>
<p>ç¼–å†™æ–‡æ¡£æ—¶ï¼ŒåŸºæœ¬ç»“æ„åº”è¯¥å¾ˆå®¹æ˜“éµå¾ªï¼›ä½ å¯èƒ½è®¤ä¸ºä»£ç ç¤ºä¾‹å¾®ä¸è¶³é“ï¼Œä½†æ˜¯å®ƒçœŸçš„å¾ˆé‡è¦ï¼Œ
èƒ½å¸®åŠ©ç”¨æˆ·ç†è§£ item æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠå­˜åœ¨çš„ç›®çš„æ˜¯ä»€ä¹ˆã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ¥è‡ª <a href="https://doc.rust-lang.org/stable/std/index.html">standard library</a> çš„ä¾‹å­ï¼Œ
<a href="https://doc.rust-lang.org/stable/std/env/fn.args.html"><code>std::env::args()</code></a> å‡½æ•°ï¼š</p>
<pre><code class="language-markdown">Returns the arguments which this program was started with (normally passed
via the command line).

The first element is traditionally the path of the executable, but it can be
set to arbitrary text, and may not even exist. This means this property should
not be relied upon for security purposes.

On Unix systems shell usually expands unquoted arguments with glob patterns
(such as `*` and `?`). On Windows this is not done, and such arguments are
passed as-is.

# Panics

The returned iterator will panic during iteration if any argument to the
process is not valid unicode. If this is not desired,
use the [`args_os`] function instead.

# Examples

```
use std::env;

// Prints each argument on a separate line
for argument in env::args() {
    println!(&quot;{}&quot;, argument);
}
```

[`args_os`]: ./fn.args_os.html
</code></pre>
<p>åœ¨ç¬¬ä¸€ä¸ªç©ºè¡Œä¹‹é—´çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«ç”¨äºæœç´¢å’Œæ¨¡å—çš„ç®€ä»‹ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„ <code>std::enve::args()</code> å‡½æ•°å°±ä¼šåœ¨å±•ç¤ºåœ¨ <a href="https://doc.rust-lang.org/stable/std/env/index.html#functions"><code>std::env</code></a> æ¨¡å—æ–‡æ¡£ä¸­ã€‚å°†æ‘˜è¦ä¿æŒåœ¨ä¸€è¡Œæ˜¯è‰¯å¥½ä¹ æƒ¯ï¼šç®€ä»‹æ˜¯å¥½æ–‡æ¡£çš„ç›®æ ‡ã€‚</p>
<p>å› ä¸ºç±»å‹ç³»ç»Ÿå¾ˆå¥½å®šä¹‰äº†å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œæ‰€ä»¥å°†å…¶æ˜¾å¼å†™å…¥æ–‡æ¡£æ²¡æœ‰å¥½å¤„ï¼Œå°¤å…¶æ˜¯ <code>rustdoc</code> ä¼šè‡ªåŠ¨åœ¨å‡½æ•°ç­¾åä¸­æ·»åŠ æŒ‡å‘ç±»å‹çš„è¶…é“¾æ¥ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Panics</code> å°èŠ‚è§£é‡Šäº†ä»£ç ä½•æ—¶å¯èƒ½ä¼šæ„å¤–é€€å‡ºï¼Œå¯ä»¥å¸®åŠ©è¯»è€…è§„é¿ panicã€‚å¦‚æœä½ çŸ¥é“ä»£ç çš„è¾¹ç¼˜æƒ…å†µï¼Œå°½å¯èƒ½å¢åŠ  panic å°èŠ‚ã€‚</p>
<p>å¦‚åŒä½ æ‰€çœ‹åˆ°çš„ï¼Œå®ƒéµå¾ªäº†ç»™å‡ºçš„ç»“æ„å»ºè®®ï¼šç®€çŸ­æè¿°å‡½æ•°çš„ä½œç”¨ï¼Œç„¶åæä¾›äº†æ›´å¤šä¿¡æ¯ä»¥åŠæœ€åæä¾›äº†ä»£ç ç¤ºä¾‹ã€‚</p>
<h2><a class="header" href="#markdown" id="markdown">Markdown</a></h2>
<p><code>rustdoc</code> ä½¿ç”¨ <a href="https://commonmark.org/">CommonMark Markdown specification</a>ã€‚ä½ å¯èƒ½ä¼šå¯¹å®ƒä»¬çš„ç½‘ç«™æ„Ÿå…´è¶£ï¼š</p>
<ul>
<li><a href="https://commonmark.org/help/">CommonMark quick reference</a></li>
<li><a href="https://spec.commonmark.org/current/">current spec</a></li>
</ul>
<p>è¡¥å……äº†æ ‡å‡† CommonMark è¯­æ³•ï¼Œ <code>rustdoc</code> æ”¯æŒå‡ ç§æ‰©å±•ï¼š</p>
<h3><a class="header" href="#strikethroughåˆ é™¤çº¿" id="strikethroughåˆ é™¤çº¿">Strikethroughï¼ˆåˆ é™¤çº¿ï¼‰</a></h3>
<p>æ–‡æœ¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ³¢æµªçº¿æ¥æ¸²æŸ“åˆ é™¤çº¿ï¼š</p>
<pre><code class="language-text">An example of ~~strikethrough text~~.
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¼šæ¸²æŸ“æˆï¼š</p>
<blockquote>
<p>An example of <del>strikethrough text</del>.</p>
</blockquote>
<p>è¿™ä½¿ç”¨ <a href="https://github.github.com/gfm/#strikethrough-extension-">GitHub Strikethrough extension</a>ã€‚</p>
<h3><a class="header" href="#footnotesè§’æ ‡" id="footnotesè§’æ ‡">Footnotesï¼ˆè§’æ ‡ï¼‰</a></h3>
<p>è§’æ ‡ä¼šç”Ÿæˆä¸€ä¸ªå°å·æ•°å­—é“¾æ¥ï¼Œç‚¹å‡»æ•°å­—é“¾æ¥ä¼šè·³è½¬åˆ°è¿™ä¸ª item çš„ä½ç½®ã€‚è§’æ ‡æ ‡ç­¾ç±»ä¼¼ä¸é“¾æ¥è¯­æ³•ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code class="language-text">This is an example of a footnote[^note].

[^note]: This text is the contents of the footnote, which will be rendered
    towards the bottom.
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¼šæ¸²æŸ“æˆï¼š</p>
<blockquote>
<p>This is an example of a footnote<sup class="footnote-reference"><a href="#note">1</a></sup>.</p>
<div class="footnote-definition" id="note"><sup class="footnote-definition-label">1</sup>
<blockquote>
<pre><code>This text is the contents of the footnote, which will be rendered
</code></pre>
</blockquote>
<pre><code>towards the bottom.
</code></pre>
</div>
</blockquote>
<p>è§’æ ‡æ•°å­—ä¼šæ ¹æ®è§’æ ‡ä½ç½®è‡ªåŠ¨ç”Ÿæˆã€‚</p>
<h3><a class="header" href="#tablesè¡¨æ ¼" id="tablesè¡¨æ ¼">Tablesï¼ˆè¡¨æ ¼ï¼‰</a></h3>
<p>è¡¨æ ¼å¯ä»¥å¯ä»¥é€šè¿‡ç«–çº¿å’ŒçŸ­æ¨ªçº¿æ¥è¡¨ç¤ºè¡¨æ ¼çš„è¡Œå’Œåˆ—ã€‚è¢«è½¬æ¢ä¸ºç¬¦åˆ HTML å½¢çŠ¶çš„è¡¨æ ¼ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="language-text">| Header1 | Header2 |
|---------|---------|
| abc     | def     |
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¼šè¢«æ¸²æŸ“æˆç±»ä¼¼è¿™æ ·ï¼š</p>
<blockquote>
<table><thead><tr><th>Header1</th><th>Header2</th></tr></thead><tbody>
<tr><td>abc</td><td>def</td></tr>
</tbody></table>
</blockquote>
<p>é˜…è¯» <a href="https://github.github.com/gfm/#tables-extension-">GitHub Tables extension</a> çš„è¯´æ˜è·å–æ›´å¤šç»†èŠ‚ã€‚</p>
<h3><a class="header" href="#task-lists" id="task-lists">Task lists</a></h3>
<p>ä»»åŠ¡åˆ—è¡¨å¯ä»¥ç”¨äºæ£€æŸ¥éœ€è¦å®Œæˆçš„æ¡ç›®ã€‚
æ¯”å¦‚ï¼š</p>
<pre><code class="language-md">- [x] Complete task
- [ ] Incomplete task
</code></pre>
<p>ä¼šè¢«æ¸²æŸ“æˆï¼š</p>
<blockquote>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Complete task</li>
<li><input disabled="" type="checkbox"/>
Incomplete task</li>
</ul>
</blockquote>
<p>é˜…è¯» <a href="https://github.github.com/gfm/#task-list-items-extension-">task list extension</a> è·å¾—æ›´å¤šç»†èŠ‚ã€‚</p>
<h3><a class="header" href="#smart-punctuationæ ‡ç‚¹ç¬¦å·" id="smart-punctuationæ ‡ç‚¹ç¬¦å·">Smart punctuationï¼ˆæ ‡ç‚¹ç¬¦å·ï¼‰</a></h3>
<p>ä¸€äº› ASCII ç¬¦å·å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºæ›´å¥½çœ‹çš„ Unicode ç¬¦å·ï¼š</p>
<table><thead><tr><th>ASCII sequence</th><th>Unicode</th></tr></thead><tbody>
<tr><td><code>--</code></td><td>â€“</td></tr>
<tr><td><code>---</code></td><td>â€”</td></tr>
<tr><td><code>...</code></td><td>â€¦</td></tr>
<tr><td><code>&quot;</code></td><td>â€œ or â€, depending on context</td></tr>
<tr><td><code>'</code></td><td>â€˜ or â€™, depending on context</td></tr>
</tbody></table>
<p>æ‰€ä»¥ï¼Œä¸éœ€è¦æ‰‹å·¥è¾“å…¥è¿™äº› Unicode ç¬¦å·ï¼</p>
<h1><a class="header" href="#ä»€ä¹ˆåŒ…å«å’Œæ’é™¤" id="ä»€ä¹ˆåŒ…å«å’Œæ’é™¤">ä»€ä¹ˆåŒ…å«ï¼ˆå’Œæ’é™¤ï¼‰</a></h1>
<p>è¯´èµ·æ¥é¡¹ç›®ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½éœ€è¦æœ‰æ–‡æ¡£ç®€å•æ­£ç¡®ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•æ‰èƒ½åšåˆ°ï¼Œä»¥åŠæ˜¯å¦è¿˜æœ‰å†…å®¹æ²¡æœ‰æ–‡æ¡£ï¼Ÿ</p>
<p>åœ¨é¡¶å±‚çš„ <code>src/lib.rs</code> æˆ–è€…ä½ çš„äºŒè¿›åˆ¶é¡¹ç›® <code>main.rs</code> æ–‡ä»¶ä¸­ï¼ŒåŒ…å«ä¸‹é¢çš„å±æ€§ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(missing_docs)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>ç°åœ¨è¿è¡Œ <code>cargo doc</code>ï¼Œæ£€æŸ¥è¾“å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-text"> Documenting docdemo v0.1.0 (/Users/username/docdemo)
warning: missing documentation for the crate
 --&gt; src/main.rs:1:1
  |
1 | / #![warn(missing_docs)]
2 | |
3 | | fn main() {
4 | |     println!(&quot;Hello, world!&quot;);
5 | | }
  | |_^
  |
note: the lint level is defined here
 --&gt; src/main.rs:1:9
  |
1 | #![warn(missing_docs)]
  |         ^^^^^^^^^^^^

warning: 1 warning emitted

    Finished dev [unoptimized + debuginfo] target(s) in 2.96s
</code></pre>
<p>ä½œä¸ºä¸€ä¸ªåº“ä½œè€…ï¼ŒåŠ å…¥ lint <code>#![deny(missing_docs)]</code> æ˜¯ä¸€ä¸ªç¡®ä¿é¡¹ç›®æ‹¥æœ‰è‰¯å¥½æ–‡æ¡£çš„å¥½æ–¹æ³•ï¼Œ<code>#![warn(missing_docs)]</code> æ˜¯é€šå‘è‰¯å¥½æ–‡æ¡£çš„å¥½æ–¹æ³•ã€‚é™¤äº†æ–‡æ¡£ï¼Œ<code>#![deny(missing_doc_code_examples)]</code> ç¡®ä¿æ¯ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ã€‚åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ·»åŠ  crate çº§åˆ«çš„ lint æ¥è­¦å‘Šã€‚</p>
<p>ä¸‹é¢çš„ç« èŠ‚æœ‰æ›´å¤š lints çš„ç»†èŠ‚ <a href="lints.html">Lints</a>ã€‚</p>
<h2><a class="header" href="#ä¾‹å­" id="ä¾‹å­">ä¾‹å­</a></h2>
<p>å½“ç„¶è¿™å¾ˆç®€å•ï¼Œä½†æ˜¯æ–‡æ¡£çš„åŠ›é‡ä¹‹ä¸€æ˜¯å±•ç¤ºçš„ä»£ç æ˜“äºç†è§£ï¼Œè€Œä¸æ˜¯ç”Ÿäº§çº§åˆ«ã€‚æ–‡æ¡£é€šå¸¸ä¼šå¿½ç•¥é”™è¯¯å¤„ç†ï¼Œå› ä¸ºä¾‹å­éœ€è¦æ’é™¤ä¸€äº›ä¸å¿…è¦çš„å†…å®¹ä¿æŒç®€å•ã€‚</p>
<p><code>Async</code> æ˜¯ä¸€ä¸ªå¥½ä¾‹å­ã€‚ä¸ºäº†æ‰§è¡Œ <code>async</code> ä¾‹å­ï¼Œä¸€ä¸ª executor æ˜¯éœ€è¦çš„ï¼Œä¾‹å­ä¸­é€šå¸¸ä¼šçœç•¥å®ƒï¼Œè®©ç”¨æˆ·è‡ªå·±å°† <code>async</code> ä»£ç æ”¾åˆ°è‡ªå·±çš„è¿è¡Œæ—¶ã€‚</p>
<p>æœ€å¥½ä¸è¦åœ¨ä¾‹å­ä¸­ä½¿ç”¨ <code>unwrap()</code>ï¼Œå¹¶ä¸”å¦‚æœé”™è¯¯å¤„ç†ä½¿å¾—ä¾‹å­éš¾ä»¥ç†è§£åº”è¯¥è¢«éšè—èµ·æ¥ã€‚</p>
<pre><code class="language-text">/// Example
/// ```rust
/// let fourtytwo = &quot;42&quot;.parse::&lt;u32&gt;()?;
/// println!(&quot;{} + 10 = {}&quot;, fourtytwo, fourtytwo+10);
/// ```
</code></pre>
<p>å½“ rustdoc wrap è¿™äº›åˆ° main å‡½æ•°ä¸­ï¼Œä¼šç¼–è¯‘é”™è¯¯å› ä¸º <code>ParseIntError</code> trait æ²¡æœ‰å®ç°ã€‚ä¸ºäº†åŒæ—¶å¸®åŠ©è¯»è€…å’Œæµ‹è¯•ï¼Œè¿™ä¸ªä¾‹å­è¿˜éœ€è¦å¢åŠ äº›é¢å¤–ä»£ç ï¼š</p>
<pre><code class="language-text">/// Example
/// ```rust
/// # main() -&gt; Result&lt;(), std::num::ParseIntError&gt; {
/// let fortytwo = &quot;42&quot;.parse::&lt;u32&gt;()?;
/// println!(&quot;{} + 10 = {}&quot;, fortytwo, fortytwo+10);
/// #     Ok(())
/// # }
/// ```
</code></pre>
<p>è¿™ä¸¤ä¸ªä¾‹å­åœ¨æ–‡æ¡£é¡µé¢æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å¯¹ä½  crate çš„ä½¿ç”¨è€…æœ‰ä¸€äº›é¢å¤–çš„ä¿¡æ¯ã€‚æ›´å¤šçš„æ–‡æ¡£æµ‹è¯•å†…å®¹åœ¨æ¥ä¸‹æ¥çš„ [æ–‡æ¡£æµ‹è¯•] ç« èŠ‚ä¸­ã€‚</p>
<h2><a class="header" href="#ä»€ä¹ˆè¢«æ’é™¤" id="ä»€ä¹ˆè¢«æ’é™¤">ä»€ä¹ˆè¢«æ’é™¤</a></h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„å…¬å…±æ¥å£å¯èƒ½ä¼šé»˜è®¤åŒ…å«åœ¨ rustdoc è¾“å‡ºä¸­ã€‚<code>#[doc(hidden)]</code> å±æ€§å¯ä»¥éšè—å®ç°ç»†èŠ‚æ¥é¼“åŠ±æœ¬ crate çš„æƒ¯ç”¨æ³•ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªå†…éƒ¨çš„ <code>macro!</code> ä½¿å¾— crate æ›´å®¹æ˜“å®ç°å¦‚æœå¯¹ç”¨æˆ·æš´éœ²ä¼šä½¿å¾—ç”¨æˆ·å›°æƒ‘ã€‚ä¸€ä¸ªå†…éƒ¨çš„<code>Error</code>ç±»å‹å¯èƒ½å­˜åœ¨ï¼Œå¹¶ä¸” <code>impl</code> ç»†èŠ‚åº”è¯¥è¢«éšè—ï¼Œå¦‚åŒ <a href="https://rust-lang.github.io/api-guidelines/documentation.html#rustdoc-does-not-show-unhelpful-implementation-details-c-hidden">API Guidelines</a> ä¸­æè¿°çš„ä¸€æ ·ã€‚</p>
<h2><a class="header" href="#è‡ªå®šä¹‰è¾“å‡º" id="è‡ªå®šä¹‰è¾“å‡º">è‡ªå®šä¹‰è¾“å‡º</a></h2>
<p>ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰ css æ–‡ä»¶ç»™ <code>rustdoc</code> å®šä¹‰æ–‡æ¡£çš„æ¬¾å¼æ˜¯å¯è¡Œçš„ã€‚</p>
<pre><code class="language-bash">rustdoc --extend-css custom.css src/lib.rs
</code></pre>
<p>ä¸€ä¸ªè‰¯å¥½çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ›å»ºæœ¬ä¹¦çš„æš—é»‘ä¸»é¢˜ã€‚è®°ä½ï¼Œæš—é»‘ä¸»é¢˜ä¹ŸåŒ…å«åœ¨ç‚¹å‡»ç”»ç¬”çš„è¾“å‡ºä¸­ã€‚ä½¿ç”¨å¯é€‰å‚æ•°å¯ä»¥å¾ˆå®¹æ˜“ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜ <code>.css</code> æ–‡ä»¶ï¼š</p>
<pre><code class="language-bash">rustdoc --theme awesome.css src/lib.rs
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªæ–°ä¸»é¢˜ <a href="https://github.com/rust-lang/rust/blob/master/src/librustdoc/html/static/themes/ayu.css">Ayu</a> çš„ä¾‹å­ã€‚</p>
<h1><a class="header" href="#command-line-arguments" id="command-line-arguments">Command-line arguments</a></h1>
<p>è¿™é‡Œæ˜¯å¯ä»¥ä¼ é€’ç»™ <code>rustdoc</code> çš„å‚æ•°åˆ—è¡¨ï¼š</p>
<h2><a class="header" href="#-h--help-help" id="-h--help-help"><code>-h</code>/<code>--help</code>: help</a></h2>
<p>è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="language-bash">$ rustdoc -h
$ rustdoc --help
</code></pre>
<p>è¿™ä¼šå±•ç¤º <code>rustdoc</code> å†…ç½®çš„å¸®åŠ©ï¼ŒåŒ…å«äº†å¤§é‡å¯ç”¨çš„å‘½ä»¤è¡Œ flagsã€‚</p>
<p>æœ‰äº› flags æ˜¯æœªç¨³å®šçš„ï¼›è¿™ä¸ªé¡µé¢åªä¼šåªåŒ…å¥½ç¨³å®šçš„å‚æ•°ï¼Œ<code>--help</code> ä¼šåŒ…å«æ‰€æœ‰çš„ã€‚</p>
<h2><a class="header" href="#-v--version-version-information" id="-v--version-version-information"><code>-V</code>/<code>--version</code>: version information</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc -V
$ rustdoc --version
</code></pre>
<p>This will show <code>rustdoc</code>'s version, which will look something
like this:</p>
<pre><code class="language-text">rustdoc 1.17.0 (56124baa9 2017-04-24)
</code></pre>
<h2><a class="header" href="#-v--verbose-more-verbose-output" id="-v--verbose-more-verbose-output"><code>-v</code>/<code>--verbose</code>: more verbose output</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc -v src/lib.rs
$ rustdoc --verbose src/lib.rs
</code></pre>
<p>This enables &quot;verbose mode&quot;, which means that more information will be written
to standard out. What is written depends on the other flags you've passed in.
For example, with <code>--version</code>:</p>
<pre><code class="language-text">$ rustdoc --verbose --version
rustdoc 1.17.0 (56124baa9 2017-04-24)
binary: rustdoc
commit-hash: hash
commit-date: date
host: host-triple
release: 1.17.0
LLVM version: 3.9
</code></pre>
<h2><a class="header" href="#-o--out-dir-output-directory-path" id="-o--out-dir-output-directory-path"><code>-o</code>/<code>--out-dir</code>: output directory path</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -o target/doc
$ rustdoc src/lib.rs --out-dir target/doc
</code></pre>
<p>By default, <code>rustdoc</code>'s output appears in a directory named <code>doc</code> in
the current working directory. With this flag, it will place all output
into the directory you specify.</p>
<h2><a class="header" href="#--crate-name-controlling-the-name-of-the-crate" id="--crate-name-controlling-the-name-of-the-crate"><code>--crate-name</code>: controlling the name of the crate</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --crate-name mycrate
</code></pre>
<p>By default, <code>rustdoc</code> assumes that the name of your crate is the same name
as the <code>.rs</code> file. <code>--crate-name</code> lets you override this assumption with
whatever name you choose.</p>
<h2><a class="header" href="#--document-private-items-show-items-that-are-not-public" id="--document-private-items-show-items-that-are-not-public"><code>--document-private-items</code>: Show items that are not public</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --document-private-items
</code></pre>
<p>By default, <code>rustdoc</code> only documents items that are publicly reachable.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn public() {} // this item is public and will be documented
mod private { // this item is private and will not be documented
    pub fn unreachable() {} // this item is public, but unreachable, so it will not be documented
}
<span class="boring">}
</span></code></pre></pre>
<p><code>--document-private-items</code> documents all items, even if they're not public.</p>
<h2><a class="header" href="#-l--library-path-where-to-look-for-dependencies" id="-l--library-path-where-to-look-for-dependencies"><code>-L</code>/<code>--library-path</code>: where to look for dependencies</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -L target/debug/deps
$ rustdoc src/lib.rs --library-path target/debug/deps
</code></pre>
<p>If your crate has dependencies, <code>rustdoc</code> needs to know where to find them.
Passing <code>--library-path</code> gives <code>rustdoc</code> a list of places to look for these
dependencies.</p>
<p>This flag takes any number of directories as its argument, and will use all of
them when searching.</p>
<h2><a class="header" href="#--cfg-passing-configuration-flags" id="--cfg-passing-configuration-flags"><code>--cfg</code>: passing configuration flags</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --cfg feature=&quot;foo&quot;
</code></pre>
<p>This flag accepts the same values as <code>rustc --cfg</code>, and uses it to configure
compilation. The example above uses <code>feature</code>, but any of the <code>cfg</code> values
are acceptable.</p>
<h2><a class="header" href="#--extern-specify-a-dependencys-location" id="--extern-specify-a-dependencys-location"><code>--extern</code>: specify a dependency's location</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --extern lazy-static=/path/to/lazy-static
</code></pre>
<p>Similar to <code>--library-path</code>, <code>--extern</code> is about specifying the location
of a dependency. <code>--library-path</code> provides directories to search in, <code>--extern</code>
instead lets you specify exactly which dependency is located where.</p>
<h2><a class="header" href="#-c--codegen-pass-codegen-options-to-rustc" id="-c--codegen-pass-codegen-options-to-rustc"><code>-C</code>/<code>--codegen</code>: pass codegen options to rustc</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -C target_feature=+avx
$ rustdoc src/lib.rs --codegen target_feature=+avx

$ rustdoc --test src/lib.rs -C target_feature=+avx
$ rustdoc --test src/lib.rs --codegen target_feature=+avx

$ rustdoc --test README.md -C target_feature=+avx
$ rustdoc --test README.md --codegen target_feature=+avx
</code></pre>
<p>When rustdoc generates documentation, looks for documentation tests, or executes documentation
tests, it needs to compile some rust code, at least part-way. This flag allows you to tell rustdoc
to provide some extra codegen options to rustc when it runs these compilations. Most of the time,
these options won't affect a regular documentation run, but if something depends on target features
to be enabled, or documentation tests need to use some additional options, this flag allows you to
affect that.</p>
<p>The arguments to this flag are the same as those for the <code>-C</code> flag on rustc. Run <code>rustc -C help</code> to
get the full list.</p>
<h2><a class="header" href="#--test-run-code-examples-as-tests" id="--test-run-code-examples-as-tests"><code>--test</code>: run code examples as tests</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --test
</code></pre>
<p>This flag will run your code examples as tests. For more, see <a href="documentation-tests.html">the chapter
on documentation tests</a>.</p>
<p>See also <code>--test-args</code>.</p>
<h2><a class="header" href="#--test-args-pass-options-to-test-runner" id="--test-args-pass-options-to-test-runner"><code>--test-args</code>: pass options to test runner</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --test --test-args ignored
</code></pre>
<p>This flag will pass options to the test runner when running documentation tests.
For more, see <a href="documentation-tests.html">the chapter on documentation tests</a>.</p>
<p>See also <code>--test</code>.</p>
<h2><a class="header" href="#--target-generate-documentation-for-the-specified-target-triple" id="--target-generate-documentation-for-the-specified-target-triple"><code>--target</code>: generate documentation for the specified target triple</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --target x86_64-pc-windows-gnu
</code></pre>
<p>Similar to the <code>--target</code> flag for <code>rustc</code>, this generates documentation
for a target triple that's different than your host triple.</p>
<p>All of the usual caveats of cross-compiling code apply.</p>
<h2><a class="header" href="#--default-theme-set-the-default-theme" id="--default-theme-set-the-default-theme"><code>--default-theme</code>: set the default theme</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --default-theme=ayu
</code></pre>
<p>Sets the default theme (for users whose browser has not remembered a
previous theme selection from the on-page theme picker).</p>
<p>The supplied value should be the lowercase version of the theme name.
The set of available themes can be seen in the theme picker in the
generated output.</p>
<p>Note that the set of available themes - and their appearance - is not
necessarily stable from one rustdoc version to the next. If the
requested theme does not exist, the builtin default (currently
<code>light</code>) is used instead.</p>
<h2><a class="header" href="#--markdown-css-include-more-css-files-when-rendering-markdown" id="--markdown-css-include-more-css-files-when-rendering-markdown"><code>--markdown-css</code>: include more CSS files when rendering markdown</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc README.md --markdown-css foo.css
</code></pre>
<p>When rendering Markdown files, this will create a <code>&lt;link&gt;</code> element in the
<code>&lt;head&gt;</code> section of the generated HTML. For example, with the invocation above,</p>
<pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;foo.css&quot; /&gt;
</code></pre>
<p>will be added.</p>
<p>When rendering Rust files, this flag is ignored.</p>
<h2><a class="header" href="#--html-in-header-include-more-html-in-head" id="--html-in-header-include-more-html-in-head"><code>--html-in-header</code>: include more HTML in <head></a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --html-in-header header.html
$ rustdoc README.md --html-in-header header.html
</code></pre>
<p>This flag takes a list of files, and inserts them into the <code>&lt;head&gt;</code> section of
the rendered documentation.</p>
<h2><a class="header" href="#--html-before-content-include-more-html-before-the-content" id="--html-before-content-include-more-html-before-the-content"><code>--html-before-content</code>: include more HTML before the content</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --html-before-content extra.html
$ rustdoc README.md --html-before-content extra.html
</code></pre>
<p>This flag takes a list of files, and inserts them inside the <code>&lt;body&gt;</code> tag but
before the other content <code>rustdoc</code> would normally produce in the rendered
documentation.</p>
<h2><a class="header" href="#--html-after-content-include-more-html-after-the-content" id="--html-after-content-include-more-html-after-the-content"><code>--html-after-content</code>: include more HTML after the content</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --html-after-content extra.html
$ rustdoc README.md --html-after-content extra.html
</code></pre>
<p>This flag takes a list of files, and inserts them before the <code>&lt;/body&gt;</code> tag but
after the other content <code>rustdoc</code> would normally produce in the rendered
documentation.</p>
<h2><a class="header" href="#--markdown-playground-url-control-the-location-of-the-playground" id="--markdown-playground-url-control-the-location-of-the-playground"><code>--markdown-playground-url</code>: control the location of the playground</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc README.md --markdown-playground-url https://play.rust-lang.org/
</code></pre>
<p>When rendering a Markdown file, this flag gives the base URL of the Rust
Playground, to use for generating <code>Run</code> buttons.</p>
<h2><a class="header" href="#--markdown-no-toc-dont-generate-a-table-of-contents" id="--markdown-no-toc-dont-generate-a-table-of-contents"><code>--markdown-no-toc</code>: don't generate a table of contents</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc README.md --markdown-no-toc
</code></pre>
<p>When generating documentation from a Markdown file, by default, <code>rustdoc</code> will
generate a table of contents. This flag suppresses that, and no TOC will be
generated.</p>
<h2><a class="header" href="#-e--extend-css-extend-rustdocs-css" id="-e--extend-css-extend-rustdocs-css"><code>-e</code>/<code>--extend-css</code>: extend rustdoc's CSS</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -e extra.css
$ rustdoc src/lib.rs --extend-css extra.css
</code></pre>
<p>With this flag, the contents of the files you pass are included at the bottom
of Rustdoc's <code>theme.css</code> file.</p>
<p>While this flag is stable, the contents of <code>theme.css</code> are not, so be careful!
Updates may break your theme extensions.</p>
<h2><a class="header" href="#--sysroot-override-the-system-root" id="--sysroot-override-the-system-root"><code>--sysroot</code>: override the system root</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --sysroot /path/to/sysroot
</code></pre>
<p>Similar to <code>rustc --sysroot</code>, this lets you change the sysroot <code>rustdoc</code> uses
when compiling your code.</p>
<h3><a class="header" href="#--edition-control-the-edition-of-docs-and-doctests" id="--edition-control-the-edition-of-docs-and-doctests"><code>--edition</code>: control the edition of docs and doctests</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --edition 2018
$ rustdoc --test src/lib.rs --edition 2018
</code></pre>
<p>This flag allows <code>rustdoc</code> to treat your rust code as the given edition. It will compile doctests with
the given edition as well. As with <code>rustc</code>, the default edition that <code>rustdoc</code> will use is <code>2015</code>
(the first edition).</p>
<h2><a class="header" href="#--theme-add-a-theme-to-the-documentation-output" id="--theme-add-a-theme-to-the-documentation-output"><code>--theme</code>: add a theme to the documentation output</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --theme /path/to/your/custom-theme.css
</code></pre>
<p><code>rustdoc</code>'s default output includes two themes: <code>light</code> (the default) and
<code>dark</code>. This flag allows you to add custom themes to the output. Giving a CSS
file to this flag adds it to your documentation as an additional theme choice.
The theme's name is determined by its filename; a theme file named
<code>custom-theme.css</code> will add a theme named <code>custom-theme</code> to the documentation.</p>
<h2><a class="header" href="#--check-theme-verify-custom-themes-against-the-default-theme" id="--check-theme-verify-custom-themes-against-the-default-theme"><code>--check-theme</code>: verify custom themes against the default theme</a></h2>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc --check-theme /path/to/your/custom-theme.css
</code></pre>
<p>While <code>rustdoc</code>'s HTML output is more-or-less consistent between versions, there
is no guarantee that a theme file will have the same effect. The <code>--theme</code> flag
will still allow you to add the theme to your documentation, but to ensure that
your theme works as expected, you can use this flag to verify that it implements
the same CSS rules as the official <code>light</code> theme.</p>
<p><code>--check-theme</code> is a separate mode in <code>rustdoc</code>. When <code>rustdoc</code> sees the
<code>--check-theme</code> flag, it discards all other flags and only performs the CSS rule
comparison operation.</p>
<h3><a class="header" href="#--crate-version-control-the-crate-version" id="--crate-version-control-the-crate-version"><code>--crate-version</code>: control the crate version</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --crate-version 1.3.37
</code></pre>
<p>When <code>rustdoc</code> receives this flag, it will print an extra &quot;Version (version)&quot; into the sidebar of
the crate root's docs. You can use this flag to differentiate between different versions of your
library's documentation.</p>
<h2><a class="header" href="#path-load-command-line-flags-from-a-path" id="path-load-command-line-flags-from-a-path"><code>@path</code>: load command-line flags from a path</a></h2>
<p>If you specify <code>@path</code> on the command-line, then it will open <code>path</code> and read
command line options from it. These options are one per line; a blank line indicates
an empty option. The file can use Unix or Windows style line endings, and must be
encoded as UTF-8.</p>
<h2><a class="header" href="#--passes-add-more-rustdoc-passes" id="--passes-add-more-rustdoc-passes"><code>--passes</code>: add more rustdoc passes</a></h2>
<p>This flag is <strong>deprecated</strong>.
For more details on passes, see <a href="passes.html">the chapter on them</a>.</p>
<h2><a class="header" href="#--no-defaults-dont-run-default-passes" id="--no-defaults-dont-run-default-passes"><code>--no-defaults</code>: don't run default passes</a></h2>
<p>This flag is <strong>deprecated</strong>.
For more details on passes, see <a href="passes.html">the chapter on them</a>.</p>
<h2><a class="header" href="#-r--input-format-input-format" id="-r--input-format-input-format"><code>-r</code>/<code>--input-format</code>: input format</a></h2>
<p>This flag is <strong>deprecated</strong> and <strong>has no effect</strong>.</p>
<p>Rustdoc only supports Rust source code and Markdown input formats. If the
file ends in <code>.md</code> or <code>.markdown</code>, <code>rustdoc</code> treats it as a Markdown file.
Otherwise, it assumes that the input file is Rust.</p>
<h2><a class="header" href="#--nocapture" id="--nocapture"><code>--nocapture</code></a></h2>
<p>When this flag is used with <code>--test</code>, the output (stdout and stderr) of your tests won't be
captured by rustdoc. Instead, the output will be directed to your terminal,
as if you had run the test executable manually. This is especially useful
for debugging your tests!</p>
<h1><a class="header" href="#doc-å±æ€§" id="doc-å±æ€§"><code>#[doc]</code> å±æ€§</a></h1>
<p><code>#[doc]</code> å±æ€§å¯ä»¥è®©ä½ æ§åˆ¶ <code>rustdoc</code> å·¥ä½œçš„å„ä¸ªæ–¹é¢ã€‚</p>
<p><code>#[doc]</code> æœ€åŸºæœ¬çš„ä½œç”¨å°±æ˜¯å¤„ç†æ–‡æ¡£å†…å®¹ã€‚å°±æ˜¯è¯´ï¼Œ<code>///</code> å°±æ˜¯ <code>#[doc]</code> çš„è¯­æ³•ç³–ã€‚ä¸‹é¢çš„ä¸¤è¡Œæ³¨é‡Šæ˜¯ä¸€æ ·çš„ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// This is a doc comment.
#[doc = &quot; This is a doc comment.&quot;]
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>ï¼ˆè¯·æ³¨æ„å±æ€§ç‰ˆæœ¬çš„å¼€å§‹çš„ç©ºæ ¼ã€‚ï¼‰</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>///</code> æ¯” <code>#[doc]</code> æ›´å®¹æ˜“ä½¿ç”¨ã€‚ä¸€ç§åé¢æ›´å®¹æ˜“ä½¿ç”¨çš„åœºæ™¯æ˜¯ç»™å®ç”Ÿæˆæ–‡æ¡£ï¼›<code>collapse-docs</code> ä¼šç»„åˆå¤šä¸ª <code>#[doc]</code>å±æ€§ä¸ºä¸€æ¡æ–‡æ¡£æ³¨é‡Šï¼Œæ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc = &quot;This is&quot;]
#[doc = &quot; a &quot;]
#[doc = &quot;doc comment&quot;]
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·å¯èƒ½æ„Ÿè§‰æ›´çµæ´»ã€‚æ³¨æ„è¿™è·Ÿä¸‹é¢çš„å†™æ³•æ˜¯ä¸€æ ·çš„ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc = &quot;This is\n a \ndoc comment&quot;]
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>ç»™å‡ºçš„æ–‡æ¡£ä¼šæ¸²æŸ“æˆ markdownï¼Œä¼šåˆ é™¤æ¢è¡Œç¬¦ã€‚</p>
<p>å¦ä¸€ä¸ªæœ‰ç”¨çš„åœºæ™¯æ˜¯å¼•å…¥å¤–éƒ¨æ–‡ä»¶ï¼š</p>
<pre><code class="language-rust no_run ignore">#[doc = include_str!(&quot;../README.md&quot;)]
<span class="boring">fn f() {}
</span></code></pre>
<p><code>doc</code> å±æ€§æœ‰æ›´å¤šçš„é€‰é¡¹ï¼ä¸ä¼šåŒ…å«åœ¨è¾“å‡ºä¸­ï¼Œä½†æ˜¯å¯ä»¥æ§åˆ¶è¾“å‡ºçš„è¡¨ç¤ºã€‚æˆ‘ä»¬å°†å®ƒä»¬åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåœ¨ crate å±‚é¢ä½¿ç”¨çš„ï¼Œå’Œåœ¨ item å±‚é¢ä½¿ç”¨çš„ã€‚</p>
<h2><a class="header" href="#crate-å±‚é¢" id="crate-å±‚é¢">crate å±‚é¢</a></h2>
<p>è¿™äº›é€‰é¡¹æ§åˆ¶æ–‡æ¡£åœ¨ crate å±‚é¢å¦‚ä½•è¡¨ç¤ºã€‚</p>
<h3><a class="header" href="#html_favicon_url" id="html_favicon_url"><code>html_favicon_url</code></a></h3>
<p>è¿™ä¸ª <code>doc</code> å±æ€§è®©ä½ æ§åˆ¶ä½ çš„æ–‡æ¡£å›¾æ ‡ã€‚</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(html_favicon_url = &quot;https://example.com/favicon.ico&quot;)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>è¿™ä¼šåœ¨ä½ çš„æ–‡æ¡£ä¸­åŠ å…¥ <code>&lt;link rel=&quot;shortcut icon&quot; href=&quot;{}&quot;&gt;</code>ï¼Œå±æ€§çš„å€¼ä¼šå¡«å…¥ <code>{}</code>ã€‚</p>
<p>å¦‚æœä½ ä¸ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå°±æ²¡æœ‰å›¾æ ‡ã€‚</p>
<h3><a class="header" href="#html_logo_url" id="html_logo_url"><code>html_logo_url</code></a></h3>
<p>è¿™ä¸ª <code>doc</code> å±æ€§å¯ä»¥è®©ä½ æ§åˆ¶å·¦ä¸Šè§’çš„ logoã€‚</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(html_logo_url = &quot;https://example.com/logo.jpg&quot;)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>è¿™ä¼šåœ¨ä½ çš„æ–‡æ¡£ä¸­åŠ å…¥ <code>&lt;a href='index.html'&gt;&lt;img src='{}' alt='logo' width='100'&gt;&lt;/a&gt;</code>ï¼Œå±æ€§çš„å€¼ä¼šå¡«å…¥ <code>{}</code>ã€‚</p>
<p>å¦‚æœä½ ä¸ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå°±æ²¡æœ‰ logoã€‚</p>
<h3><a class="header" href="#html_playground_url" id="html_playground_url"><code>html_playground_url</code></a></h3>
<p>è¿™ä¸ª <code>doc</code> å±æ€§è®©ä½ æ§åˆ¶æ–‡æ¡£ç¤ºä¾‹ä¸­çš„ &quot;run&quot; æŒ‰é’®çš„è¯·æ±‚åˆ°å“ªé‡Œã€‚</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(html_playground_url = &quot;https://playground.example.com/&quot;)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>ç°åœ¨ï¼Œå½“ä½ æŒ‰ä¸‹ &quot;run&quot;ï¼Œä¼šå‘å¯¹åº”ç½‘ç«™å‘å‡ºè¯·æ±‚ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œæ²¡æœ‰è¿è¡ŒæŒ‰é’®ã€‚</p>
<h3><a class="header" href="#issue_tracker_base_url" id="issue_tracker_base_url"><code>issue_tracker_base_url</code></a></h3>
<p>è¿™ä¸ª <code>doc</code> å±æ€§åœ¨æ ‡å‡†åº“ä¸­ä½¿ç”¨æœ€å¤šï¼›å½“ä¸€ä¸ªç‰¹æ€§æœªç¨³å®šæ—¶ï¼Œéœ€è¦æä¾› issue number æ¥è¿½è¸ªè¿™ä¸ªç‰¹æ€§ã€‚<code>rustdoc</code> ä½¿ç”¨è¿™ä¸ª numberï¼ŒåŠ å…¥åˆ°ç»™å®šçš„åŸºæœ¬ URL æ¥é“¾æ¥åˆ°è¿½è¸ªçš„ç½‘å€ã€‚</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(issue_tracker_base_url = &quot;https://github.com/rust-lang/rust/issues/&quot;)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<h3><a class="header" href="#html_root_url" id="html_root_url"><code>html_root_url</code></a></h3>
<p><code>#[doc(html_root_url = &quot;â€¦&quot;)]</code> å±æ€§çš„å€¼è¡¨æ˜äº†ç”Ÿæˆå¤–éƒ¨ crate çš„ URLã€‚å½“ rustdoc éœ€è¦ç”Ÿæˆä¸€ä¸ªå¤–éƒ¨ crate item çš„é“¾æ¥æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æœ¬åœ°å¤–éƒ¨ crate çš„æ–‡æ¡£ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥é“¾æ¥æŒ‡å‘ã€‚å¦‚æœå¤±è´¥ï¼Œå°±ä¼šä½¿ç”¨ <code>--extern-html-root-url</code> å‘½ä»¤è¡Œå‚æ•°çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œæ‰ä¼šä½¿ç”¨ <code>html_root_url</code> ï¼Œå¦‚æœè¿˜æ˜¯æ— æ•ˆï¼Œå¤–éƒ¨ item ä¸ä¼šé“¾æ¥ã€‚</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(html_root_url = &quot;https://docs.rs/serde/1.0&quot;)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<h3><a class="header" href="#html_no_source" id="html_no_source"><code>html_no_source</code></a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>rustdoc</code> ä¼šåŒ…å«ä½ çš„æºç é“¾æ¥åˆ°æ–‡æ¡£ä¸­ã€‚
ä½†æ˜¯å¦‚æœä½ è¿™æ ·å†™ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(html_no_source)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>å°±ä¸ä¼šã€‚</p>
<h3><a class="header" href="#testno_crate_inject" id="testno_crate_inject"><code>test(no_crate_inject)</code></a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>rustdoc</code> ä¼šè‡ªåŠ¨åŠ ä¸€è¡Œ <code>extern crate my_crate;</code> åˆ°æ¯ä¸ªæ–‡æ¡£æµ‹è¯•ä¸­ã€‚
ä½†æ˜¯å¦‚æœä½ è¿™æ ·å†™äº†ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(test(no_crate_inject))]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>å°±ä¸ä¼šã€‚</p>
<h3><a class="header" href="#testattr" id="testattr"><code>test(attr(...))</code></a></h3>
<p>è¿™ä¸ª <code>doc</code> å±æ€§å…è®¸ä½ å¯¹ä½ æ‰€æœ‰çš„æ–‡æ¡£æµ‹è¯•åŠ ä¸ŠæŸä¸ªå±æ€§ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³è¦ä½ çš„æ–‡æ¡£æµ‹è¯•å­˜åœ¨è­¦å‘Šæ—¶å¤±è´¥ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span>#![doc(test(attr(deny(warnings))))]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#item-å±‚é¢" id="item-å±‚é¢">item å±‚é¢</a></h2>
<p>è¿™äº› <code>#[doc]</code> å±æ€§å•ç‹¬ç»™ item ä½¿ç”¨ï¼Œæ§åˆ¶ item æ–‡æ¡£è¡¨ç¤ºã€‚</p>
<h3><a class="header" href="#inline-and-no_inline" id="inline-and-no_inline"><code>inline</code> and <code>no_inline</code></a></h3>
<p><span id="docno_inlinedocinline"></span></p>
<p>è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥ç”¨äº <code>use</code> å£°æ˜ã€‚æ¯”å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹ Rust ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">pub use bar::Bar;

/// bar docs
pub mod bar {
    /// the docs for Bar
    pub struct Bar;
}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p>æ–‡æ¡£ä¼šç”Ÿæˆ &quot;Re-exports&quot; å°èŠ‚ï¼Œè¡¨ç¤º <code>pub use bar::Bar;</code> å…¶ä¸­ <code>Bar</code> ä¼šé“¾æ¥åˆ°è‡ªå·±çš„é¡µé¢ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°†ä»£ç æ”¹ä¸ºï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">#[doc(inline)]
pub use bar::Bar;
<span class="boring">pub mod bar { pub struct Bar; }
</span><span class="boring">fn main() {}
</span></code></pre></pre>
<p><code>Bar</code> å°±ä¼šå‡ºç°åœ¨ <code>Structs</code> å°èŠ‚ï¼Œå°±åƒ <code>Bar</code> å°±å®šä¹‰åœ¨é¡¶å±‚ä¸€æ ·ï¼Œè€Œä¸æ˜¯ <code>pub use</code> çš„ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ä¿®æ”¹åŸå§‹çš„ä¾‹å­ï¼Œä½¿ <code>bar</code> ç§æœ‰ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">pub use bar::Bar;

/// bar docs
mod bar {
    /// the docs for Bar
    pub struct Bar;
}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p>è¿™é‡Œï¼Œå› ä¸º <code>bar</code> ä¸æ˜¯å…¬å…±çš„ï¼Œ<code>Bar</code> æ²¡æœ‰è‡ªå·±çš„é¡µé¢ï¼Œæ‰€æœ‰æ²¡æœ‰é“¾æ¥å¯ä»¥æŒ‡å‘ã€‚<code>rustdoc</code> å°†ä¼šå†…è”å®šä¹‰ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°ä¸ <code>#[doc(inline)]</code> ä¸€æ ·çš„ç»“æœï¼š<code>Bar</code> å°±ä¼šå‡ºç°åœ¨ <code>Structs</code> å°èŠ‚ï¼Œå°±åƒ <code>Bar</code> å°±å®šä¹‰åœ¨é¡¶å±‚ä¸€æ ·ã€‚å¦‚æœæˆ‘ä»¬åŠ ä¸Š <code>no_inline</code> å±æ€§ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">#[doc(no_inline)]
pub use bar::Bar;

/// bar docs
mod bar {
    /// the docs for Bar
    pub struct Bar;
}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº† <code>Re-exports</code>ï¼Œå¹¶ä¸” <code>Bar</code> æ²¡æœ‰é“¾æ¥åˆ°ä»»ä½•é¡µé¢ã€‚</p>
<p>ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼šåœ¨ Rust 2018 ä»¥åŠæ›´é«˜ç‰ˆæœ¬ï¼Œå¦‚æœä½  <code>pub use</code> ä½ çš„ä¾èµ–ï¼Œ<code>rustdoc</code> ä¸ä¼šä½œä¸º modules å†…è”é™¤éä½ åŠ ä¸Š <code>#[doc(inline)]</code>ã€‚</p>
<h3><a class="header" href="#hidden" id="hidden"><code>hidden</code></a></h3>
<p><span id="dochidden"></span></p>
<p>ä»»ä½•æ ‡æ³¨äº† <code>#[doc(hidden)]</code> çš„ item ä¸ä¼šå‡ºç°åœ¨æ–‡æ¡£ä¸­ï¼Œé™¤é <code>strip-hidden</code> pass è¢«åˆ é™¤ã€‚</p>
<h3><a class="header" href="#alias" id="alias"><code>alias</code></a></h3>
<p>è¿™ä¸ªå±æ€§ç»™æœç´¢ç´¢å¼•å¢åŠ äº†åˆ«åã€‚</p>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc(alias = &quot;TheAlias&quot;)]
pub struct SomeType;
<span class="boring">}
</span></code></pre></pre>
<p>ç°åœ¨ï¼Œå¦‚æœä½ è¾“å…¥ &quot;TheAlias&quot; æœç´¢ï¼Œä¹Ÿä¼šæ˜¾ç¤º <code>SomeType</code>ã€‚å½“ç„¶å¦‚æœä½ è¾“å…¥ <code>SomeType</code> ä¹Ÿä¼šæ˜¾ç¤º <code>SomeType</code>ï¼</p>
<h4><a class="header" href="#ffi-ä¾‹å­" id="ffi-ä¾‹å­">FFI ä¾‹å­</a></h4>
<p>æ–‡æ¡£å±æ€§åœ¨å†™ c åº“çš„ bingding æ—¶å°¤å…¶æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸‹é¢è¿™æ ·çš„ C å‡½æ•°ï¼š</p>
<pre><code class="language-c">int lib_name_do_something(Obj *obj);
</code></pre>
<p>å®ƒè¾“å…¥ä¸€ä¸ªæŒ‡å‘ <code>Obj</code> ç±»å‹çš„æŒ‡é’ˆè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚åœ¨ Rust ä¸­ï¼Œå¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code class="language-ignore(usingnon-existingffitypes)">pub struct Obj {
    inner: *mut ffi::Obj,
}

impl Obj {
    pub fn do_something(&amp;mut self) -&gt; i32 {
        unsafe { ffi::lib_name_do_something(self.inner) }
    }
}
</code></pre>
<p>å‡½æ•°å·²ç»è¢«è½¬æ¢ä¸ºä¸€ä¸ªæ–¹æ³•ä¾¿äºä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³è¦å¯»æ‰¾ Rust ç›¸å½“çš„ <code>lib_name_do_something</code>ï¼Œä½ æ²¡æœ‰åŠæ³•åšåˆ°ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªé™åˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>do_something</code> æ–¹æ³•åŠ ä¸Š <code>#[doc(alias = &quot;lib_name_do_something&quot;)]</code>ï¼Œç„¶åå°±å¯ä»¥äº†ï¼</p>
<p>ç”¨æˆ·å¯ä»¥ç›´æ¥æœç´¢ <code>lib_name_do_something</code> ç„¶åæ‰¾åˆ°<code>Obj::do_something</code>ã€‚</p>
<h1><a class="header" href="#æ–‡æ¡£æµ‹è¯•" id="æ–‡æ¡£æµ‹è¯•">æ–‡æ¡£æµ‹è¯•</a></h1>
<p><code>rustdoc</code> æ”¯æŒå°†ä½ æ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹ä½œä¸ºæµ‹è¯•æ‰§è¡Œã€‚è¿™ç¡®ä¿äº†æ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹ä¿æŒæ›´æ–°ã€‚</p>
<p>åŸºæœ¬å†™æ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// # Examples
///
/// ```
/// let x = 5;
/// ```
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>ä¸‰ä¸ªåå¼•å·ä¸­çš„ä»£ç å—ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åå«åš<code>foo.rs</code>ï¼Œè¿è¡Œ<code>rustdoc --test foo.rs</code>ä¼šæå–è¿™ä¸ªä¾‹å­ï¼Œç„¶åä½œä¸ºæµ‹è¯•æ‰§è¡Œã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä»£ç å—æ²¡æœ‰è®¾ç½®è¯­è¨€ï¼Œrustdoc é»˜è®¤æ˜¯ Rust ä»£ç ï¼Œæ‰€ä»¥ä¸‹é¢çš„ï¼š</p>
<pre><code class="language-markdown">```rust
let x = 5;
```
</code></pre>
<p>è·Ÿè¿™ä¸ªæ˜¯ç›¸ç­‰çš„</p>
<pre><code class="language-markdown">```
let x = 5;
```
</code></pre>
<p>è¿˜æœ‰ä¸€äº›å¾®å¦™ä¹‹å¤„ï¼è¯·é˜…è¯»è·å¾—æ›´å¤šè¯¦æƒ…ã€‚</p>
<h2><a class="header" href="#æ–‡æ¡£æµ‹è¯•é€šè¿‡æˆ–è€…å¤±è´¥" id="æ–‡æ¡£æµ‹è¯•é€šè¿‡æˆ–è€…å¤±è´¥">æ–‡æ¡£æµ‹è¯•é€šè¿‡æˆ–è€…å¤±è´¥</a></h2>
<p>å°±åƒå¸¸è§„çš„å•å…ƒæµ‹è¯•ï¼Œå¸¸è§„çš„æ–‡æ¡£æµ‹è¯•ä¹Ÿéœ€è¦ç¼–è¯‘å’Œè¿è¡Œâ€œé€šè¿‡â€ã€‚æ‰€ä»¥å¦‚æœéœ€è¦è®¡ç®—ç»™å‡ºä¸€ä¸ªç»“æœï¼Œå¯ä»¥ä½¿ç”¨<code>assert!</code>ç³»åˆ—å®æ¥æ£€æŸ¥ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let foo = &quot;foo&quot;;
assert_eq!(foo, &quot;foo&quot;);
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·ï¼Œå¦‚æœè®¡ç®—è¿”å›çš„ç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œä»£ç å°±ä¼š panicï¼Œæ–‡æ¡£æµ‹è¯•ä¼šå¤±è´¥ã€‚</p>
<h2><a class="header" href="#é¢„å¤„ç†ä¾‹å­" id="é¢„å¤„ç†ä¾‹å­">é¢„å¤„ç†ä¾‹å­</a></h2>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ æ³¨æ„åˆ°å¥‡æ€ªçš„äº‹æƒ…ï¼šæ²¡æœ‰<code>main</code>å‡½æ•°ï¼å¦‚æœå¼ºåˆ¶ä½ ä¸ºæ¯ä¸ªä¾‹å­å†™<code>main</code>ï¼Œå¢åŠ äº†éš¾åº¦ã€‚
æ‰€ä»¥<code>rustdoc</code>åœ¨è¿è¡Œä¾‹å­å‰ä¼šå¸®ä½ å¤„ç†å¥½è¿™ä¸ªã€‚è¿™é‡Œæ˜¯<code>rustdoc</code>é¢„å¤„ç†çš„å®Œæ•´ç®—æ³•ï¼š</p>
<ol>
<li>ä¸€äº›å¸¸ç”¨çš„ <code>allow</code> å±æ€§ä¼šè¢«æ’å…¥ï¼ŒåŒ…æ‹¬ <code>unused_variables</code>, <code>unused_assignments</code>, <code>unused_mut</code>, <code>unused_attributes</code>, å’Œ <code>dead_code</code>ã€‚å°å‹ç¤ºä¾‹ç»å¸¸å‡ºå‘è¿™äº›è­¦å‘Šã€‚</li>
<li>å¦‚æœå­˜åœ¨ <code>#![doc(test(attr(...)))]</code> çš„å±æ€§ä¼šè¢«åŠ å…¥ã€‚</li>
<li><code>#![foo]</code> å±æ€§ä¼šè¢«ä½œä¸º crate å±æ€§ä¿ç•™ã€‚</li>
<li>å¦‚æœä¾‹å­ä¸åŒ…å« <code>extern crate</code>, å¹¶ä¸” <code>#![doc(test(no_crate_inject))]</code> æ²¡æœ‰è¢«æŒ‡å®šï¼Œ<code>extern crate &lt;mycrate&gt;;</code> è¢«æ’å…¥ï¼ˆæ³¨æ„ <code>#[macro_use]</code> è¦æ‰‹åŠ¨å†™ä¸€èˆ¬ï¼‰ã€‚</li>
<li>æœ€åï¼Œå¦‚æœä¾‹å­ä¸åŒ…å« <code>fn main</code>ï¼Œå‰©ä¸‹çš„ä»£ç ä¼šè¢« main å‡½æ•° wrapï¼š<code>fn main() { your_code }</code>ã€‚</li>
</ol>
<p>å¯¹äºç¬¬ 4 æ¡çš„è¯¦ç»†è§£é‡Šï¼Œè¯·é˜…è¯»ä¸‹é¢çš„â€œå®çš„æ–‡æ¡£â€</p>
<h2><a class="header" href="#éšè—ä¾‹å­çš„ä¸€éƒ¨åˆ†" id="éšè—ä¾‹å­çš„ä¸€éƒ¨åˆ†">éšè—ä¾‹å­çš„ä¸€éƒ¨åˆ†</a></h2>
<p>æœ‰æ—¶ï¼Œä½ éœ€è¦ä¸€äº›åˆå§‹ä»£ç ï¼Œæˆ–è€…ä¸€äº›ä¼šåˆ†æ•£æ–‡æ¡£æ³¨æ„åŠ›çš„ä»£ç ï¼Œä½†æ˜¯å®ƒä»¬å¯¹æµ‹è¯•å·¥ä½œæ˜¯å¿…è¦çš„ã€‚è€ƒè™‘ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```
/// /// Some documentation.
/// # fn foo() {} // this function will be hidden
/// println!(&quot;Hello, World!&quot;);
/// ```
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>ä¼šæ¸²æŸ“ä¸ºï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Some documentation.
<span class="boring">fn foo() {}
</span>println!(&quot;Hello, World!&quot;);
<span class="boring">}
</span></code></pre></pre>
<p>æ²¡é”™ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œä½ å¯ä»¥åŠ ä¸€äº›ä»¥ <code># </code> å¼€å¤´çš„è¡Œï¼Œåœ¨è¾“å‡ºä¸­å®ƒä»¬ä¼šéšè—ï¼Œä½†æ˜¯ç¼–è¯‘ä»£ç ä¼šç”¨åˆ°ã€‚ä½ å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–‡æ¡£æ³¨é‡Šéœ€è¦ä½¿ç”¨å‡½æ•°ï¼Œä½†æ˜¯æˆ‘åªæƒ³ç»™ä½ çœ‹æ–‡æ¡£æ³¨é‡Šï¼Œæˆ‘éœ€è¦åŠ å…¥å‡½æ•°çš„å®šä¹‰ã€‚åŒæ—¶ï¼Œéœ€è¦æ»¡è¶³ç¼–è¯‘å™¨ç¼–è¯‘ï¼Œè€Œéšè—è¿™éƒ¨åˆ†ä»£ç ä½¿å¾—ç¤ºä¾‹æ›´æ¸…æ™°ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯å†™å‡ºè¯¦ç»†çš„ç¤ºä¾‹ä»£ç å¹¶ä¸”ä¿ç•™ä½ çš„å¯æµ‹è¯•æ€§æ–‡æ¡£ã€‚</p>
<p>æ¯”å¦‚ï¼Œæƒ³è±¡æˆ‘ä»¬æƒ³è¦ç»™è¿™äº›ä»£ç å†™æ–‡æ¡£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
let y = 6;
println!(&quot;{}&quot;, x + y);
<span class="boring">}
</span></code></pre></pre>
<p>æ–‡æ¡£æ³¨é‡Šæœ€ç»ˆå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>First, we set <code>x</code> to five:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
<span class="boring">let y = 6;
</span><span class="boring">println!(&quot;{}&quot;, x + y);
</span><span class="boring">}
</span></code></pre></pre>
<p>Next, we set <code>y</code> to six:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">let x = 5;
</span>let y = 6;
<span class="boring">println!(&quot;{}&quot;, x + y);
</span><span class="boring">}
</span></code></pre></pre>
<p>Finally, we print the sum of <code>x</code> and <code>y</code>:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">let x = 5;
</span><span class="boring">let y = 6;
</span>println!(&quot;{}&quot;, x + y);
<span class="boring">}
</span></code></pre></pre>
</blockquote>
<p>ä¸ºäº†ä¿æŒæ¯ä¸ªä»£ç å—å¯æµ‹è¯•ï¼Œæˆ‘ä»¬è¦åœ¨æ¯ä¸ªä»£ç å—éƒ½æœ‰å®Œæ•´ä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æƒ³æ–‡æ¡£è¯»è€…æ¯æ¬¡éƒ½çœ‹åˆ°å…¨éƒ¨è¡Œä»£ç ï¼š</p>
<pre><code class="language-markdown">First, we set `x` to five:

```
let x = 5;
# let y = 6;
# println!(&quot;{}&quot;, x + y);
```

Next, we set `y` to six:

```
# let x = 5;
let y = 6;
# println!(&quot;{}&quot;, x + y);
```

Finally, we print the sum of `x` and `y`:

```
# let x = 5;
# let y = 6;
println!(&quot;{}&quot;, x + y);
```
</code></pre>
<p>é€šè¿‡å¤åˆ¶ä¾‹å­çš„æ‰€æœ‰ä»£ç ï¼Œä¾‹å­å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ŒåŒæ—¶ä½¿ç”¨ <code># </code> åœ¨æ–‡æ¡£ä¸­æœ‰äº›éƒ¨åˆ†è¢«éšè—ã€‚</p>
<p><code>#</code> çš„éšè—å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª <code>##</code> æ¥æ¶ˆé™¤ã€‚ å¦‚æœæˆ‘ä»¬æœ‰ä¸€è¡Œæ³¨é‡Šï¼Œä»¥ <code>#</code> å¼€å¤´ï¼Œé‚£ä¹ˆè¿™æ ·å†™ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = &quot;foo
# bar # baz&quot;;
<span class="boring">}
</span></code></pre></pre>
<p>æˆ‘ä»¬å¯ä»¥è½¬ä¹‰ç¬¬ä¸€ä¸ª <code>#</code> æ¥æ³¨é‡Šå®ƒï¼š</p>
<pre><code class="language-text">/// let s = &quot;foo
/// ## bar # baz&quot;;
</code></pre>
<h2><a class="header" href="#åœ¨æ–‡æ¡£æµ‹è¯•ä¸­ä½¿ç”¨-" id="åœ¨æ–‡æ¡£æµ‹è¯•ä¸­ä½¿ç”¨-">åœ¨æ–‡æ¡£æµ‹è¯•ä¸­ä½¿ç”¨ <code>?</code></a></h2>
<p>å½“å†™ä¾‹å­æ—¶ï¼Œå¾ˆå°‘ä¼šåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†ï¼Œå› ä¸ºé”™è¯¯å¤„ç†ä¼šå¢åŠ å¾ˆå¤šæ ·æ¿ä»£ç ã€‚å–è€Œä»£ä¹‹ï¼Œä½ å¯èƒ½æ›´å¸Œæœ›è¿™æ ·ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```
/// use std::io;
/// let mut input = String::new();
/// io::stdin().read_line(&amp;mut input)?;
/// ```
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>é—®é¢˜æ˜¯ <code>?</code> è¿”å› <code>Result&lt;T, E&gt;</code>ï¼Œæµ‹è¯•å‡½æ•°ä¸èƒ½è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥ä¼šæœ‰ç±»å‹é”™è¯¯ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡è‡ªå·±å¢åŠ è¿”å› <code>Result&lt;T, E&gt;</code> çš„ <code>main</code> å‡½æ•°æ¥è§„é¿è¿™ä¸ªé™åˆ¶ï¼Œå› ä¸º <code>Result&lt;T, E&gt;</code> å®ç°äº† <code>Termination</code> traitï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">/// A doc test using ?
///
/// ```
/// use std::io;
///
/// fn main() -&gt; io::Result&lt;()&gt; {
///     let mut input = String::new();
///     io::stdin().read_line(&amp;mut input)?;
///     Ok(())
/// }
/// ```
<span class="boring">fn f() {}
</span></code></pre></pre>
<p>ä¸ä¸‹èŠ‚çš„ <code># </code>ä¸€èµ·ï¼Œä½ å¯ä»¥å¾—åˆ°è¯»è€…èˆ’æœï¼Œç¼–è¯‘é€šè¿‡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">/// ```
/// use std::io;
/// # fn main() -&gt; io::Result&lt;()&gt; {
/// let mut input = String::new();
/// io::stdin().read_line(&amp;mut input)?;
/// # Ok(())
/// # }
/// ```
<span class="boring">fn f() {}
</span></code></pre></pre>
<p>ä» 1.34.0 ç‰ˆæœ¬å¼€å§‹ï¼Œä¹Ÿå¯ä»¥çœç•¥ <code>fn main()</code>ï¼Œä½†æ˜¯ä½ å¿…é¡»æ¶ˆé™¤é”™è¯¯ç±»å‹çš„æ­§ä¹‰ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```
/// use std::io;
/// let mut input = String::new();
/// io::stdin().read_line(&amp;mut input)?;
/// # Ok::&lt;(), io::Error&gt;(())
/// ```
<span class="boring">fn f() {}
</span><span class="boring">}
</span></code></pre></pre>
<p>è¿™æ˜¯ <code>?</code> æ“ä½œç¬¦éšå¼è½¬æ¢å¸¦æ¥çš„ä¸ä¾¿ï¼Œå› ä¸ºç±»å‹ä¸å”¯ä¸€æ‰€ä»¥ç±»å‹æ¨æ–­ä¼šå‡ºé”™ã€‚ä½ å¿…é¡»å†™ <code>(())</code>ï¼Œ<code>rustdoc</code> æ‰èƒ½ç†è§£ä½ æƒ³è¦ä¸€ä¸ªéšå¼è¿”å›å€¼ <code>Result</code> çš„å‡½æ•°ã€‚</p>
<h2><a class="header" href="#åœ¨æ–‡æ¡£æµ‹è¯•ä¸­æ˜¾ç¤ºè­¦å‘Š" id="åœ¨æ–‡æ¡£æµ‹è¯•ä¸­æ˜¾ç¤ºè­¦å‘Š">åœ¨æ–‡æ¡£æµ‹è¯•ä¸­æ˜¾ç¤ºè­¦å‘Š</a></h2>
<p>ä½ å¯ä»¥é€šè¿‡è¿è¡Œ <code>rustdoc --test --test-args=--show-output</code> åœ¨æ–‡æ¡£æµ‹è¯•ä¸­æ˜¾ç¤ºè­¦å‘Šï¼ˆæˆ–è€…ï¼Œå¦‚æœä½ ä½¿ç”¨ cargoï¼Œ<code>cargo test --doc -- --show-output</code> ä¹Ÿå¯ä»¥ï¼‰ã€‚é»˜è®¤ä¼šéšè— <code>unused</code> è­¦å‘Šï¼Œå› ä¸ºå¾ˆå¤šä¾‹å­ä½¿ç”¨ç§æœ‰å‡½æ•°ï¼›ä½ å¯ä»¥é€šè¿‡åœ¨ä¾‹å­é¡¶éƒ¨åŠ å…¥<code>#![warn(unused)]</code>æ¥å¯¹æ²¡æœ‰ä½¿ç”¨çš„å˜é‡æˆ–è€…æ­»ä»£ç è¿›è¡Œè­¦å‘Šã€‚ä½ è¿˜å¯ä»¥åœ¨ crate æ ¹ä½¿ç”¨ <a href="./the-doc-attribute.html#testattr"><code>#![doc(test(attr(warn(unused))))]</code></a> å¼€å¯å…¨å±€è­¦å‘Šã€‚</p>
<h2><a class="header" href="#å®çš„æ–‡æ¡£" id="å®çš„æ–‡æ¡£">å®çš„æ–‡æ¡£</a></h2>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªå®çš„æ–‡æ¡£çš„ä¾‹å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust">/// Panic with a given message unless an expression evaluates to true.
///
/// # Examples
///
/// ```
/// # #[macro_use] extern crate foo;
/// # fn main() {
/// panic_unless!(1 + 1 == 2, â€œMath is broken.â€);
/// # }
/// ```
///
/// ```should_panic
/// # #[macro_use] extern crate foo;
/// # fn main() {
/// panic_unless!(true == false, â€œIâ€™m broken.â€);
/// # }
/// ```
#[macro_export]
macro_rules! panic_unless {
    ($condition:expr, $($rest:expr),+) =&gt; ({ if ! $condition { panic!($($rest),+); } });
}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p>ä½ æ³¨æ„åˆ°ä¸‰ä»¶äº‹ï¼šæˆ‘ä»¬éœ€è¦è‡ªå·±å¢åŠ  <code>extern crate</code> ä¸€è¡Œï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Š <code>#[macro_use]</code> å±æ€§ã€‚ç¬¬äºŒï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å¢åŠ  <code>main()</code>ï¼Œç†ç”±åŒä¸Šã€‚æœ€å <code>#</code> çš„ä½¿ç”¨ä½¿å¾—ä¸€äº›å†…å®¹ä¸ä¼šå‡ºç°åœ¨è¾“å‡ºä¸­ã€‚</p>
<h2><a class="header" href="#å±æ€§" id="å±æ€§">å±æ€§</a></h2>
<p>ä»£ç å—å¯ä»¥é€šè¿‡å±æ€§æ ‡æ³¨å¸®åŠ© <code>rustdoc</code> åœ¨æµ‹è¯•ä¾‹å­ä»£ç æ—¶å¤„ç†æ­£ç¡®ã€‚</p>
<p><code>ignore</code> å±æ€§å‘Šè¯‰ Rust å¿½ç•¥ä½ çš„ä»£ç ã€‚ è¿™ä¸ªå±æ€§å¾ˆé€šç”¨ï¼Œå¹¶ä¸”è€ƒè™‘æ ‡æ³¨ <code>æ–‡æœ¬</code>æˆ–è€…ä½¿ç”¨<code>#</code>éšè—ä¸æƒ³å±•ç¤ºçš„éƒ¨åˆ†ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```ignore
/// fn foo() {
/// ```
<span class="boring">fn foo() {}
</span><span class="boring">}
</span></code></pre></pre>
<p><code>should_panic</code> å‘Šè¯‰ <code>rustdoc</code> ä»£ç åº”è¯¥ç¼–è¯‘é€šè¿‡ä½†æ˜¯è¿è¡Œæ—¶ä¼š panicã€‚å¦‚æœä»£ç æ²¡æœ‰ panicï¼Œæµ‹è¯•å¤±è´¥ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```should_panic
/// assert!(false);
/// ```
<span class="boring">fn foo() {}
</span><span class="boring">}
</span></code></pre></pre>
<p><code>no_run</code> å±æ€§ä¼šç¼–è¯‘ä½ çš„ä»£ç ä½†æ˜¯ä¸è¿è¡Œå®ƒã€‚è¿™å¯¹äºç±»ä¼¼ &quot;å¦‚æœè·å–ç½‘é¡µ&quot; çš„ä¾‹å­å¾ˆé‡è¦ï¼Œä½ è¦ç¡®ä¿å®ƒèƒ½ç¼–è¯‘ä½†æ˜¯ä¸æƒ³åœ¨è¿è¡Œæµ‹è¯•ï¼Œå› ä¸ºæµ‹è¯•ç¯å¢ƒå¯èƒ½æ²¡æœ‰ç½‘ç»œã€‚è¿™ä¸ªå±æ€§ä¹Ÿå¯ä»¥è¢«ç”¨æ¥è¦æ±‚ä»£ç æ®µæœ‰æœªå®šä¹‰è¡Œä¸ºã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```no_run
/// loop {
///     println!(&quot;Hello, world&quot;);
/// }
/// ```
<span class="boring">fn foo() {}
</span><span class="boring">}
</span></code></pre></pre>
<p><code>compile_fail</code> å‘Šè¯‰ <code>rustdoc</code> åº”è¯¥ç¼–è¯‘å¤±è´¥ã€‚å¦‚æœä¾¿å·²é€šè¿‡ï¼Œæµ‹è¯•å¤±è´¥ã€‚
ä½†æ˜¯éœ€è¦æ³¨æ„ç°åœ¨ç‰ˆæœ¬ Rust ç¼–è¯‘å¤±è´¥å¯èƒ½åœ¨å°†æ¥ Rust ç‰ˆæœ¬ç¼–è¯‘æˆåŠŸã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// ```compile_fail
/// let x = 5;
/// x += 2; // shouldn't compile!
/// ```
<span class="boring">fn foo() {}
</span><span class="boring">}
</span></code></pre></pre>
<p><code>edition2015</code>, <code>edition2018</code> å’Œ <code>edition2021</code> å‘Šè¯‰ <code>rustdoc</code> ä»£ç åº”è¯¥ä½¿ç”¨å“ªä¸ª edition ç‰ˆæœ¬çš„ Rust æ¥ç¼–è¯‘ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Only runs on the 2018 edition.
///
/// ```edition2018
/// let result: Result&lt;i32, ParseIntError&gt; = try {
///     &quot;1&quot;.parse::&lt;i32&gt;()?
///         + &quot;2&quot;.parse::&lt;i32&gt;()?
///         + &quot;3&quot;.parse::&lt;i32&gt;()?
/// };
/// ```
<span class="boring">fn foo() {}
</span><span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#è¯­æ³•å‚è€ƒ" id="è¯­æ³•å‚è€ƒ">è¯­æ³•å‚è€ƒ</a></h2>
<p>ä»£ç å—çš„ <em>exact</em> è¯­æ³•ï¼ŒåŒ…æ‹¬è¾¹ç¼˜æƒ…å†µï¼Œå¯ä»¥åœ¨ CommonMark è¯´æ˜çš„ [Fenced Code Blocks] ä¸€èŠ‚æ‰¾åˆ°ã€‚</p>
<p>Rustdoc ä¹Ÿæ¥å— <em>indented</em> ä»£ç å—ä½œä¸º fenced ä»£ç å—çš„æ›¿ä»£ï¼šä¸ä½¿ç”¨ä¸‰ä¸ªåå¼•å·ï¼Œè€Œæ˜¯æ¯è¡Œä»¥å››ä¸ªæˆ–è€…ä»¥ä¸Šç©ºæ ¼å¼€å§‹ã€‚</p>
<pre><code class="language-markdown">    let foo = &quot;foo&quot;;
    assert_eq!(foo, &quot;foo&quot;);
</code></pre>
<p>è¿™ä¹Ÿåœ¨ CommonMark è¯´æ˜ä¸­çš„ <a href="https://spec.commonmark.org/0.29/#indented-code-blocks">Indented Code Blocks</a> å°èŠ‚ã€‚</p>
<p>ä½†æ˜¯é€šå¸¸æ›´å¸¸ç”¨çš„æ˜¯ fenced ä»£ç å—ã€‚ä¸ä»…æ˜¯ fenced ä»£ç å—æ›´ç¬¦åˆ Rust æƒ¯ç”¨æ³•ï¼Œè€Œä¸” indented ä»£ç å—æ— æ³•ä½¿ç”¨è¯¸å¦‚ <code>ignore</code> æˆ–è€… <code>should_panic</code> è¿™äº›å±æ€§ã€‚</p>
<h3><a class="header" href="#æ”¶é›†æ–‡æ¡£æµ‹è¯•æ—¶åŒ…å«-item" id="æ”¶é›†æ–‡æ¡£æµ‹è¯•æ—¶åŒ…å«-item">æ”¶é›†æ–‡æ¡£æµ‹è¯•æ—¶åŒ…å« item</a></h3>
<p>Rustdoc æ–‡æ¡£æµ‹è¯•å¯ä»¥åšåˆ°ä¸€äº›å•å…ƒæµ‹è¯•æ— æ³•åšåˆ°çš„äº‹ï¼Œå¯ä»¥æ‰©å±•ä½ çš„æ–‡æ¡£æµ‹è¯•ä½†æ˜¯ä¸å‡ºç°åœ¨æ–‡æ¡£ä¸­ã€‚æ„å‘³ç€ï¼Œrustdoc å…è®¸ä½ æœ‰ä¸å‡ºç°åœ¨
æ–‡æ¡£ä¸­ï¼Œä½†æ˜¯ä¼šè¿›è¡Œæ–‡æ¡£æµ‹è¯•çš„ itemï¼Œæ‰€ä»¥ä½ å¯ä»¥åˆ©ç”¨æ–‡æ¡£æµ‹è¯•è¿™ä¸ªåŠŸèƒ½ä½¿æµ‹è¯•ä¸å‡ºç°åœ¨æ–‡æ¡£ä¸­ï¼Œæˆ–è€…ä»»æ„æ‰¾ä¸€ä¸ªç§æœ‰ item åŒ…å«å®ƒã€‚</p>
<p>å½“ç¼–è¯‘ crate ç”¨æ¥æµ‹è¯•æ–‡æ¡£æ—¶ï¼ˆä½¿ç”¨<code>--test</code>)ï¼Œ<code>rustdoc</code>ä¼šè®¾ç½® <code>#[cfg(doctest)]</code>ã€‚æ³¨æ„è¿™åªä¼šåœ¨å…¬å…± item ä¸Šè®¾ç½®ï¼›å¦‚æœä½ éœ€è¦æµ‹è¯•ç§æœ‰ itemï¼Œä½ éœ€è¦å†™å•å…ƒæµ‹è¯•ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¢åŠ ä¸ä¼šç¼–è¯‘çš„æ–‡æ¡£æµ‹è¯•ï¼Œç¡®ä¿æˆ‘ä»¬çš„ç»“æ„ä½“åªä¼šè·å–æœ‰æ•ˆæ•°æ®ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// We have a struct here. Remember it doesn't accept negative numbers!
pub struct MyStruct(pub usize);

/// ```compile_fail
/// let x = my_crate::MyStruct(-5);
/// ```
#[cfg(doctest)]
pub struct MyStructOnlyTakesUsize;
<span class="boring">}
</span></code></pre></pre>
<p>æ³¨æ„ç»“æ„ <code>MyStructOnlyTakesUsize</code> ä¸æ˜¯ä½ çš„ crate å…¬å…± APIã€‚<code>#[cfg(doctest)]</code> çš„ä½¿ç”¨ä½¿å¾—è¿™ä¸ªç»“æ„ä½“åªä¼šåœ¨ <code>rustdoc</code> æ”¶é›†æ–‡æ¡£æµ‹è¯•æ—¶å­˜åœ¨ã€‚è¿™æ„å‘³ç€å½“ä¼ é€’ <code>--test</code> ç»™ rustdoc æ—¶æ‰å­˜åœ¨ï¼Œåœ¨å…¬å…±æ–‡æ¡£ä¸­æ˜¯éšè—çš„ã€‚</p>
<p>å¦ä¸€ä¸ªå¯èƒ½ç”¨åˆ° <code>#[cfg(doctest)]</code> çš„æ˜¯ä½ çš„ README æ–‡ä»¶ä¸­çš„æ–‡æ¡£æµ‹è¯•ã€‚
æ¯”å¦‚ä½ å¯ä»¥åœ¨ <code>lib.rs</code> å†™ä¸‹é¢çš„ä»£ç æ¥è¿è¡Œ README ä¸­çš„æ–‡æ¡£æµ‹è¯•ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc = include_str!(&quot;../README.md&quot;)]
#[cfg(doctest)]
pub struct ReadmeDoctests;
<span class="boring">}
</span></code></pre></pre>
<p>è¿™ä¼šåœ¨ä½ çš„éšè—ç»“æ„ä½“ <code>ReadmeDoctests</code> ä¸­åŒ…å«ä½ çš„ README ä½œä¸ºæ–‡æ¡£ï¼Œä¹Ÿä¼šä½œä¸ºæ–‡æ¡£æµ‹è¯•æ¥æ‰§è¡Œã€‚</p>
<h1><a class="header" href="#é€šè¿‡åç§°é“¾æ¥-item" id="é€šè¿‡åç§°é“¾æ¥-item">é€šè¿‡åç§°é“¾æ¥ item</a></h1>
<p>Rustdoc èƒ½å¤Ÿä½¿ç”¨ item çš„è·¯å¾„ç›´æ¥å†…éƒ¨é“¾æ¥ã€‚è¿™ç§°ä¸º 'intra-doc link'ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥é“¾æ¥ <code>Bar</code> çš„é¡µé¢ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// This struct is not [Bar]
pub struct Foo1;

/// This struct is also not [bar](Bar)
pub struct Foo2;

/// This struct is also not [bar][b]
///
/// [b]: Bar
pub struct Foo3;

/// This struct is also not [`Bar`]
pub struct Foo4;

/// This struct *is* [`Bar`]!
pub struct Bar;
<span class="boring">}
</span></code></pre></pre>
<p>ä¸åƒå¸¸è§„çš„ markdownï¼Œ<code>[bar][Bar]</code> è¯­æ³•ä¹Ÿè¢«æ”¯æŒï¼Œä¸éœ€è¦<code>[Bar]: ...</code> é“¾æ¥ã€‚</p>
<p>åå¼•å·ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ <code>[`Option`]</code> å¯ä»¥æ­£ç¡®åœ°é“¾æ¥åˆ°<code>Option</code>ã€‚</p>
<h2><a class="header" href="#æœ‰æ•ˆé“¾æ¥" id="æœ‰æ•ˆé“¾æ¥">æœ‰æ•ˆé“¾æ¥</a></h2>
<p>ä½ å¯ä»¥é“¾æ¥ä½œç”¨åŸŸçš„ä»»ä½•ä¸œè¥¿ï¼Œä½¿ç”¨è·¯å¾„ï¼ŒåŒ…æ‹¬ <code>Self</code>, <code>self</code>, <code>super</code>å’Œ <code>crate</code>ã€‚Associated items (functions, types, and constants) ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯ <a href="https://github.com/rust-lang/rust/pull/79682">ä¸èƒ½æ˜¯ç©ºçš„ trait å®ç°</a>ã€‚Rustdoc è¿˜æ”¯æŒ <a href="../std/index.html#primitives">the standard library documentation</a> åˆ—å‡ºçš„åŸå§‹ç±»å‹é“¾æ¥ã€‚</p>
<p>ä½ è¿˜å¯ä»¥é“¾æ¥èŒƒå‹å‚æ•°ï¼Œæ¯”å¦‚ <code>Vec&lt;T&gt;</code>ã€‚é“¾æ¥ä¼šå¦‚åŒä½ å†™äº† <code>[`Vec&lt;T&gt;`](Vec)</code>. ä½†æ˜¯ï¼ŒFully-qualified syntaxï¼ˆæ¯”å¦‚ï¼Œ<code>&lt;Vec as IntoIterator&gt;::into_iter()</code>ï¼‰ è¿˜ <a href="https://github.com/rust-lang/rust/issues/74563">æ²¡æœ‰è¢«æ”¯æŒ</a>ã€‚</p>
<pre><pre class="playground"><code class="language-rust edition2018">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::mpsc::Receiver;

/// This is a version of [`Receiver&lt;T&gt;`] with support for [`std::future`].
///
/// You can obtain a [`std::future::Future`] by calling [`Self::recv()`].
pub struct AsyncReceiver&lt;T&gt; {
    sender: Receiver&lt;T&gt;
}

impl&lt;T&gt; AsyncReceiver&lt;T&gt; {
    pub async fn recv() -&gt; T {
        unimplemented!()
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>Rustdoc å…è®¸ä½¿ç”¨ URL fragment specifiersï¼Œå°±å¦‚åŒæ™®é€šçš„é“¾æ¥ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// This is a special implementation of [positional parameters].
///
/// [positional parameters]: std::fmt#formatting-parameters
struct MySpecialFormatter;
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#namespaces-and-disambiguatorsæ¶ˆæ­§ä¹‰ç¬¦" id="namespaces-and-disambiguatorsæ¶ˆæ­§ä¹‰ç¬¦">Namespaces and Disambiguatorsï¼ˆæ¶ˆæ­§ä¹‰ç¬¦ï¼‰</a></h2>
<p>Rust ä¸­çš„è·¯å¾„æœ‰ä¸‰ç§å‘½åç©ºé—´ï¼štype, value å’Œ macroã€‚Item name åœ¨å‘½åç©ºé—´å†…å¿…é¡»å”¯ä¸€ï¼Œä½†æ˜¯å¯ä»¥ä¸å…¶ä»–å‘½åç©ºé—´çš„ item åŒåã€‚åœ¨æ­§ä¹‰çš„æƒ…å†µä¸‹ï¼Œrustdoc ä¼šè­¦å‘Šæ­§ä¹‰ï¼Œå¹¶ç»™å‡ºæ¶ˆé™¤æ­§ä¹‰çš„å»ºè®®ã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// See also: [`Foo`](struct@Foo)
struct Bar;

/// This is different from [`Foo`](fn@Foo)
struct Foo {}

fn Foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™äº›å‰ç¼€å±•ç¤ºåœ¨æ–‡æ¡£æ—¶ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ <code>[struct@Foo]</code> ä¼šè¢«æ¸²æŸ“æˆ <code>Foo</code>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨å‡½æ•°åååŠ ä¸Š <code>()</code> å’Œåœ¨å®ååé¢åŠ ä¸Š <code>!</code> æ¶ˆé™¤æ­§ä¹‰ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// This is different from [`foo!`]
fn foo() {}

/// This is different from [`foo()`]
macro_rules! foo {
  () =&gt; {}
}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#è­¦å‘Šre-exports-and-scoping" id="è­¦å‘Šre-exports-and-scoping">è­¦å‘Šï¼Œre-exports, and scoping</a></h2>
<p>å³ä½¿ item è¢« re-exportedï¼Œé“¾æ¥ä¹Ÿåœ¨ item å®šä¹‰çš„æ¨¡å—å†…è§£æã€‚å¦‚æœæ¥è‡ªå¦ä¸€ä¸ª crate çš„é“¾æ¥è§£æå¤±è´¥ï¼Œä¸ä¼šç»™å‡ºè­¦å‘Šã€‚</p>
<pre><pre class="playground"><code class="language-rust edition2018">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod inner {
    /// Link to [f()]
    pub struct S;
    pub fn f() {}
}
pub use inner::S; // the link to `f` will still resolve correctly
<span class="boring">}
</span></code></pre></pre>
<p>å½“ä¸€ä¸ª item è¢« re-exportï¼Œrustdoc å…è®¸åŠ å…¥é¢å¤–çš„æ–‡æ¡£ã€‚é¢å¤–çš„æ–‡æ¡£åœ¨ re-export çš„ä½œç”¨åŸŸä¸­è§£æï¼Œå…è®¸ä½ é“¾æ¥ re-export çš„ itemï¼Œå¹¶ä¸”å¦‚æœè§£æå¤±è´¥ä¼šç»™å‡ºè­¦å‘Šã€‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// See also [foo()]
pub use std::process::Command;

pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™å¯¹äºè¿‡ç¨‹å®éå¸¸æœ‰ç”¨ï¼Œè¿‡ç¨‹å®å¿…é¡»å®šä¹‰åœ¨è‡ªå·±çš„ crate ä¸­ã€‚</p>
<p>æ³¨æ„ï¼šå› ä¸º <code>macro_ruls!</code> å®çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ª Rustï¼Œ<code>macro_rules!</code> çš„ intra-doc é“¾æ¥åœ¨ <a href="https://github.com/rust-lang/rust/issues/72243">relative to the crate root</a> è§£æï¼Œè€Œä¸æ˜¯å®šä¹‰çš„æ¨¡å—å†…ã€‚</p>
<p>å¦‚æœé“¾æ¥çœ‹èµ·æ¥ä¸åƒæ˜¯ intra-doc é“¾æ¥ï¼Œå®ƒä»¬ä¼šè¢«å¿½ç•¥å¹¶ä¸”ä¸ä¼šç”Ÿæˆè­¦å‘Šï¼Œå³ä½¿é“¾æ¥è§£æå¤±è´¥ã€‚æ¯”å¦‚ï¼Œä»»ä½•åŒ…å«äº† <code>/</code> æˆ–è€… <code>[]</code> å­—ç¬¦çš„é“¾æ¥éƒ½è¢«å¿½ç•¥ã€‚</p>
<h1><a class="header" href="#lints" id="lints">Lints</a></h1>
<p><code>rustdoc</code> æä¾› lints æ¥å¸®åŠ©ä½ ç¼–å†™ä»¥åŠæµ‹è¯•æ–‡æ¡£ã€‚ä½ å¯ä»¥åƒä½¿ç”¨å…¶ä»– lints æ¥ä½¿ç”¨å®ƒä»¬ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![allow(rustdoc::broken_intra_doc_links)] // allows the lint, no diagnostics will be reported
#![warn(rustdoc::broken_intra_doc_links)] // warn if there are broken intra-doc links
#![deny(rustdoc::broken_intra_doc_links)] // error if there are broken intra-doc links
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>æ³¨æ„ï¼Œå‡ºäº† <code>missing_docs</code>ï¼Œè¿™äº› lints åªæœ‰å½“è¿è¡Œ <code>rustdoc</code> çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œ<code>rustc</code> ä¸ä¼šã€‚</p>
<p>è¿™æ˜¯<code>rustdoc</code> lints çš„åˆ—è¡¨ï¼š</p>
<h2><a class="header" href="#broken_intra_doc_links" id="broken_intra_doc_links">broken_intra_doc_links</a></h2>
<p>è¿™ä¸ª lint æ˜¯<strong>é»˜è®¤è­¦å‘Š</strong>ã€‚è¿™ä¸ª lint å½“ <a href="linking-to-items-by-name.html">intra-doc link</a> è§£æé”™è¯¯æ—¶ä¼šæç¤ºã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// I want to link to [`Nonexistent`] but it doesn't exist!
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>ä½ ä¼šå¾—åˆ°è­¦å‘Šï¼š</p>
<pre><code class="language-text">warning: unresolved link to `Nonexistent`
 --&gt; test.rs:1:24
  |
1 | /// I want to link to [`Nonexistent`] but it doesn't exist!
  |                        ^^^^^^^^^^^^^ no item named `Nonexistent` in `test`
</code></pre>
<p>å½“å­˜åœ¨æ­§ä¹‰æ—¶ä¹Ÿä¼šå¾—åˆ°è­¦å‘Šï¼Œä»¥åŠå¦‚ä½•æ¶ˆé™¤æ­§ä¹‰çš„å»ºè®®ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// [`Foo`]
pub fn function() {}

pub enum Foo {}

pub fn Foo(){}
<span class="boring">}
</span></code></pre></pre>
<pre><code class="language-text">warning: `Foo` is both an enum and a function
 --&gt; test.rs:1:6
  |
1 | /// [`Foo`]
  |      ^^^^^ ambiguous link
  |
  = note: `#[warn(rustdoc::broken_intra_doc_links)]` on by default
help: to link to the enum, prefix with the item type
  |
1 | /// [`enum@Foo`]
  |      ^^^^^^^^^^
help: to link to the function, add parentheses
  |
1 | /// [`Foo()`]
  |      ^^^^^^^

</code></pre>
<h2><a class="header" href="#private_intra_doc_links" id="private_intra_doc_links">private_intra_doc_links</a></h2>
<p>è¿™ä¸ª lint æ˜¯<strong>é»˜è®¤è­¦å‘Š</strong>. è¿™ä¸ª lint ä¼šåœ¨ <a href="linking-to-items-by-name.html">intra-doc links</a> ä»ä¸€ä¸ªå…¬å…± item è¿æ¥ä¸€ä¸ªç§æœ‰ item æ—¶æç¤ºã€‚
æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(rustdoc::private_intra_doc_links)] // note: unnecessary - warns by default.

<span class="boring">fn main() {
</span>/// [private]
pub fn public() {}
fn private() {}
<span class="boring">}
</span></code></pre></pre>
<p>ä¼šç»™å‡ºè¿™ä¸ªæ–‡æ¡£ä¸­é“¾æ¥æ—¶æŸåçš„ï¼š</p>
<pre><code class="language-text">warning: public documentation for `public` links to private item `private`
 --&gt; priv.rs:1:6
  |
1 | /// [private]
  |      ^^^^^^^ this item is private
  |
  = note: `#[warn(rustdoc::private_intra_doc_links)]` on by default
  = note: this link will resolve properly if you pass `--document-private-items`
</code></pre>
<p>æ³¨æ„åˆ°å–å†³äºä½ æ˜¯å¦ä¼ é€’ <code>--document-private-items</code> å‚æ•°ä¼šæœ‰ä¸åŒçš„è¡Œä¸ºï¼å¦‚æœä½ æœ‰ç§æœ‰ item çš„æ–‡æ¡£ï¼Œå°½ç®¡ä¼šæœ‰è­¦å‘Šï¼Œä»ç„¶ä¼šç”Ÿæˆè¿™ä¸ªé“¾æ¥ï¼š</p>
<pre><code class="language-text">warning: public documentation for `public` links to private item `private`
 --&gt; priv.rs:1:6
  |
1 | /// [private]
  |      ^^^^^^^ this item is private
  |
  = note: `#[warn(rustdoc::private_intra_doc_links)]` on by default
  = note: this link resolves only because you passed `--document-private-items`, but will break without
</code></pre>
<h2><a class="header" href="#missing_docs" id="missing_docs">missing_docs</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤å…è®¸</strong>ã€‚ç¼ºå°‘æ–‡æ¡£æ—¶æç¤ºã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">#![warn(missing_docs)]

pub fn undocumented() {}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p><code>undocumented</code> å‡½æ•°ä¼šæœ‰ä¸‹é¢çš„è­¦å‘Šï¼š</p>
<pre><code class="language-text">warning: missing documentation for a function
  --&gt; your-crate/lib.rs:3:1
   |
 3 | pub fn undocumented() {}
   | ^^^^^^^^^^^^^^^^^^^^^
</code></pre>
<p>æ³¨æ„ä¸åƒå…¶ä»– lintï¼Œè¿™ä¸ª lint ä¹Ÿå¯¹ <code>rustc</code> æœ‰æ•ˆã€‚</p>
<h2><a class="header" href="#missing_crate_level_docs" id="missing_crate_level_docs">missing_crate_level_docs</a></h2>
<p>è¿™ä¸ª lint æ˜¯<strong>é»˜è®¤å…è®¸</strong>ã€‚æç¤º crate æ ¹æ²¡æœ‰æ–‡æ¡£ã€‚
æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(rustdoc::missing_crate_level_docs)]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>ä¼šç”Ÿæˆä¸‹é¢çš„è­¦å‘Šï¼š</p>
<pre><code class="language-text">warning: no documentation found for this crate's top-level module
  |
  = help: The following guide may be of use:
          https://doc.rust-lang.org/nightly/rustdoc/how-to-write-documentation.html
</code></pre>
<p>å½“å‰é»˜è®¤æ˜¯å…è®¸çš„ï¼Œä½†æ˜¯è®¡åˆ’æœªæ¥é»˜è®¤è­¦å‘Šã€‚è¿™å¯ä»¥ä¸ä½¿ç”¨<code>missing_docs</code>è¿™ç§ä¸¥é‡çš„è­¦å‘Šï¼Œä»‹ç»ç»™æ–°ç”¨æˆ·å¦‚ä½•ç»™ä»–ä»¬çš„ crate å†™æ–‡æ¡£ã€‚</p>
<h2><a class="header" href="#missing_doc_code_examples" id="missing_doc_code_examples">missing_doc_code_examples</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤å…è®¸</strong> å¹¶ä¸” <strong>nightly-only</strong>ã€‚å½“æ–‡æ¡£ç¼ºå°‘ä»£ç ç¤ºä¾‹æ—¶æç¤ºã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">#![warn(rustdoc::missing_doc_code_examples)]

/// There is no code example!
pub fn no_code_example() {}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p><code>no_code_example</code> å‡½æ•°ä¼šæœ‰ä¸‹é¢çš„è­¦å‘Šï¼š</p>
<pre><code class="language-text">warning: Missing code example in this documentation
  --&gt; your-crate/lib.rs:3:1
   |
LL | /// There is no code example!
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre>
<p>ä¸ºäº†ä¿®å¤è¿™ä¸ª lintï¼Œä½ éœ€è¦åœ¨æ–‡æ¡£å—ä¸­åŠ å…¥ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// There is no code example!
///
/// ```
/// println!(&quot;calling no_code_example...&quot;);
/// no_code_example();
/// println!(&quot;we called no_code_example!&quot;);
/// ```
pub fn no_code_example() {}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#private_doc_tests" id="private_doc_tests">private_doc_tests</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤å…è®¸</strong>ã€‚ æç¤ºç§æœ‰ item æœ‰æ–‡æ¡£æµ‹è¯•ã€‚
æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">#![warn(rustdoc::private_doc_tests)]

mod foo {
    /// private doc test
    ///
    /// ```
    /// assert!(false);
    /// ```
    fn bar() {}
}
<span class="boring">fn main() {}
</span></code></pre></pre>
<p>æç¤ºï¼š</p>
<pre><code class="language-text">warning: Documentation test in private item
  --&gt; your-crate/lib.rs:4:1
   |
 4 | /     /// private doc test
 5 | |     ///
 6 | |     /// ```
 7 | |     /// assert!(false);
 8 | |     /// ```
   | |___________^
</code></pre>
<h2><a class="header" href="#invalid_codeblock_attributes" id="invalid_codeblock_attributes">invalid_codeblock_attributes</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤è­¦å‘Š</strong>ã€‚æç¤ºæ–‡æ¡£ä¾‹å­ä¸­çš„ä»£ç å—å±æ€§æœ‰æ½œåœ¨çš„é”™è¯¯ã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(rustdoc::invalid_codeblock_attributes)]  // note: unnecessary - warns by default.

<span class="boring">fn main() {
</span>/// Example.
///
/// ```should-panic
/// assert_eq!(1, 2);
/// ```
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>æç¤ºï¼š</p>
<pre><code class="language-text">warning: unknown attribute `should-panic`. Did you mean `should_panic`?
 --&gt; src/lib.rs:1:1
  |
1 | / /// Example.
2 | | ///
3 | | /// ```should-panic
4 | | /// assert_eq!(1, 2);
5 | | /// ```
  | |_______^
  |
  = note: `#[warn(rustdoc::invalid_codeblock_attributes)]` on by default
  = help: the code block will either not be tested if not marked as a rust one or won't fail if it doesn't panic when running
</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ­£ç¡®çš„æ‹¼å†™æ˜¯ <code>should_panic</code>ã€‚å¯ä»¥æç¤ºä¸€äº›å¸¸ç”¨çš„å±æ€§ typo é”™è¯¯ã€‚</p>
<h2><a class="header" href="#invalid_html_tags" id="invalid_html_tags">invalid_html_tags</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤å…è®¸</strong> å¹¶ä¸”æ˜¯ <strong>nightly-only</strong>ã€‚æç¤ºæ²¡æœ‰å…³é—­çš„æˆ–è€…æ— æ•ˆçš„ HTML tagã€‚
æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(rustdoc::invalid_html_tags)]

<span class="boring">fn main() {
</span>/// &lt;h1&gt;
/// &lt;/script&gt;
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>æç¤ºï¼š</p>
<pre><code class="language-text">warning: unopened HTML tag `script`
 --&gt; foo.rs:1:1
  |
1 | / /// &lt;h1&gt;
2 | | /// &lt;/script&gt;
  | |_____________^
  |
  note: the lint level is defined here
 --&gt; foo.rs:1:9
  |
1 | #![warn(rustdoc::invalid_html_tags)]
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unclosed HTML tag `h1`
 --&gt; foo.rs:1:1
  |
1 | / /// &lt;h1&gt;
2 | | /// &lt;/script&gt;
  | |_____________^

warning: 2 warnings emitted
</code></pre>
<h2><a class="header" href="#invalid_rust_codeblocks" id="invalid_rust_codeblocks">invalid_rust_codeblocks</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤è­¦å‘Š</strong>ã€‚æç¤ºæ–‡æ¡£ä¸­çš„ Rust ä»£ç å—æ— æ•ˆï¼ˆæ¯”å¦‚ï¼Œç©ºçš„ï¼Œæ— æ³•è¢«è§£æä¸º Rust ä»£ç ï¼‰ã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Empty code blocks (with and without the `rust` marker):
///
/// ```rust
/// ```
///
/// Invalid syntax in code blocks:
///
/// ```rust
/// '&lt;
/// ```
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>æç¤ºï¼š</p>
<pre><code class="language-text">warning: Rust code block is empty
 --&gt; lint.rs:3:5
  |
3 |   /// ```rust
  |  _____^
4 | | /// ```
  | |_______^
  |
  = note: `#[warn(rustdoc::invalid_rust_codeblocks)]` on by default

warning: could not parse code block as Rust code
  --&gt; lint.rs:8:5
   |
8  |   /// ```rust
   |  _____^
9  | | /// '&lt;
10 | | /// ```
   | |_______^
   |
   = note: error from rustc: unterminated character literal
</code></pre>
<h2><a class="header" href="#bare_urls" id="bare_urls">bare_urls</a></h2>
<p>è¿™ä¸ª lint <strong>é»˜è®¤è­¦å‘Š</strong>ã€‚æç¤º Url ä¸æ˜¯ä¸€ä¸ªé“¾æ¥ã€‚
æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![warn(rustdoc::bare_urls)] // note: unnecessary - warns by default.

<span class="boring">fn main() {
</span>/// http://example.org
/// [http://example.net]
pub fn foo() {}
<span class="boring">}
</span></code></pre></pre>
<p>ä¼šå‡ºç°ï¼š</p>
<pre><code class="language-text">warning: this URL is not a hyperlink
 --&gt; links.rs:1:5
  |
1 | /// http://example.org
  |     ^^^^^^^^^^^^^^^^^^ help: use an automatic link instead: `&lt;http://example.org&gt;`
  |
  = note: `#[warn(rustdoc::bare_urls)]` on by default

warning: this URL is not a hyperlink
 --&gt; links.rs:3:6
  |
3 | /// [http://example.net]
  |      ^^^^^^^^^^^^^^^^^^ help: use an automatic link instead: `&lt;http://example.net&gt;`

warning: 2 warnings emitted
</code></pre>
<h1><a class="header" href="#é«˜çº§ç‰¹æ€§" id="é«˜çº§ç‰¹æ€§">é«˜çº§ç‰¹æ€§</a></h1>
<p>æœ¬é¡µåˆ—å‡ºçš„ç‰¹æ€§ä¸å±äºå…¶ä»–çš„ä¸»è¦ç±»åˆ«</p>
<h2><a class="header" href="#cfgdoc-æ–‡æ¡£å¹³å°ç›¸å…³æˆ–è€…ç‰¹æ€§ç›¸å…³ä¿¡æ¯" id="cfgdoc-æ–‡æ¡£å¹³å°ç›¸å…³æˆ–è€…ç‰¹æ€§ç›¸å…³ä¿¡æ¯"><code>#[cfg(doc)]</code>: æ–‡æ¡£å¹³å°ç›¸å…³æˆ–è€…ç‰¹æ€§ç›¸å…³ä¿¡æ¯</a></h2>
<p>å¯¹äºæ¡ä»¶ç¼–è¯‘ï¼Œrustdoc ä¼šä¸ç¼–è¯‘å™¨ç›¸åŒçš„æ–¹å¼å¤„ç†ã€‚åªç”Ÿæˆç›®æ ‡ä¸»æœºå¯ç”¨çš„æ–‡æ¡£ï¼Œå…¶ä»–çš„è¢« â€œè¿‡æ»¤æ‰â€ã€‚å½“å¯¹äºä¸åŒç›®æ ‡æä¾›ä¸åŒçš„ä¸œè¥¿å¹¶ä¸”ä½ å¸Œæœ›æ–‡æ¡£åæ˜ ä½ æ‰€æœ‰çš„å¯ç”¨é¡¹ç›®ï¼Œè¿™å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ç¡®ä¿ rustdoc å¯ä»¥çœ‹åˆ°æŸä¸ª itemï¼Œè€Œå¿½ç•¥ç›®æ ‡çš„å¹³å°ç›¸å…³ä¿¡æ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>#[cfg(doc)]</code>ã€‚Rustdoc ä¼šåœ¨æ„å»ºæ–‡æ¡£æ—¶è®¾ç½®å®ƒï¼Œæ‰€ä»¥ä½¿ç”¨äº†è¿™ä¸ªçš„ item ä¼šç¡®ä¿ç”Ÿæˆåˆ°æ–‡æ¡£ä¸­ï¼Œæ¯”å¦‚ <code>#[cfg(any(windows, doc))]</code> ä¼šåœ¨ Windows ä¸Šæ„å»ºä»¥åŠç”Ÿæˆæ‰€æœ‰çš„æ–‡æ¡£ã€‚</p>
<p>è¯·æ³¨æ„ <code>cfg</code> ä¸ä¼šä¼ é€’åˆ°æ–‡æ¡£æµ‹è¯•ä¸­ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Token struct that can only be used on Windows.
#[cfg(any(windows, doc))]
pub struct WindowsToken;
/// Token struct that can only be used on Unix.
#[cfg(any(unix, doc))]
pub struct UnixToken;
<span class="boring">}
</span></code></pre></pre>
<p>è¿™é‡Œï¼Œå„è‡ªçš„ tokens åªèƒ½åœ¨å„è‡ªçš„å¹³å°ä¸Šä½¿ç”¨ï¼Œä½†æ˜¯ä¼šåŒæ—¶å‡ºç°åœ¨æ–‡æ¡£ä¸­ã€‚</p>
<h3><a class="header" href="#ç‰¹å®šå¹³å°æ–‡æ¡£ä¹‹é—´çš„äº¤äº’" id="ç‰¹å®šå¹³å°æ–‡æ¡£ä¹‹é—´çš„äº¤äº’">ç‰¹å®šå¹³å°æ–‡æ¡£ä¹‹é—´çš„äº¤äº’</a></h3>
<p>Rustdoc æ²¡æœ‰ä»€ä¹ˆå¦‚åŒä½ åœ¨æ¯ç§å¹³å°è¿è¡Œä¸€æ¬¡çš„é­”æ³•æ–¹æ³•æ¥ç¼–è¯‘æ–‡æ¡£ï¼ˆè¿™ç§é­”æ³•æ–¹å¼è¢«ç§°ä¸º <a href="https://github.com/rust-lang/rust/issues/1998">'holy grail of rustdoc'</a>ï¼‰ã€‚ä»£æ›¿çš„æ˜¯ï¼Œä¼šä¸€æ¬¡è¯»åˆ°ä½ <strong>æ‰€æœ‰çš„</strong>ä»£ç ï¼Œä¸ Rust ç¼–è¯‘å™¨é€šè¿‡å‚æ•° <code>--cfg doc</code> è¯»åˆ°çš„ä¸€æ ·ã€‚ä½†æ˜¯ï¼ŒRustdoc æœ‰ä¸€ä¸ªæŠ€å·§å¯ä»¥åœ¨æ¥æ”¶åˆ°ç‰¹å®šå¹³å°ä»£ç æ—¶å¤„ç†å®ƒã€‚</p>
<p>ä¸ºä½ çš„ crate ç”Ÿæˆæ–‡æ¡£ï¼ŒRustdoc åªéœ€è¦çŸ¥é“ä½ çš„å…¬å…±å‡½æ•°ç­¾åã€‚å°¤å…¶æ˜¯ï¼Œä¸éœ€è¦çŸ¥é“ä½ çš„å‡½æ•°å®ç°ï¼Œæ‰€ä»¥ä¼šå¿½ç•¥æ‰€æœ‰å‡½æ•°ä½“ç±»å‹é”™è¯¯å’Œåç§°è§£æé”™è¯¯ã€‚æ³¨æ„ï¼Œè¿™ä¸é€‚ç”¨å‡½æ•°ä½“ä¹‹å¤–çš„ä¸œè¥¿ï¼šå› ä¸º Rustdoc ä¼šè®°å½•ç±»å‹ï¼Œéœ€è¦çŸ¥é“ç±»å‹æ˜¯ä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œæ— è®ºå¹³å°å¦‚ä½•ï¼Œè¿™äº›ä»£ç å¯ä»¥å·¥ä½œï¼š</p>
<pre><code class="language-rust ignore(platform-specific rustdoc-specific-behavior)">pub fn f() {
    use std::os::windows::ffi::OsStrExt;
}
</code></pre>
<p>ä½†æ˜¯è¿™äº›ä¸è¡Œï¼Œå› ä¸ºå‡½æ•°ç­¾åä¸­å­˜åœ¨ä¸ºæ­¢ç±»å‹ï¼š</p>
<pre><code class="language-rust ignore(platform-specific rustdoc-specific-behavior)">pub fn f() -&gt; std::os::windows::ffi::EncodeWide&lt;'static&gt; {
    unimplemented!()
}
</code></pre>
<p>æ›´å¤šçš„ä»£ç ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ <a href="https://github.com/rust-lang/rust/blob/b146000e910ccd60bdcde89363cb6aa14ecc0d95/src/test/rustdoc-ui/error-in-impl-trait/realistic-async.rs">the rustdoc test suite</a>ã€‚</p>
<h2><a class="header" href="#å¢åŠ æ–‡æ¡£æœç´¢çš„-item-åˆ«å" id="å¢åŠ æ–‡æ¡£æœç´¢çš„-item-åˆ«å">å¢åŠ æ–‡æ¡£æœç´¢çš„ item åˆ«å</a></h2>
<p>è¿™ä¸ªç‰¹æ€§å¯ä»¥é€šè¿‡ <code>doc(alias)</code> å±æ€§å¢åŠ  <code>rustdoc</code> æœç´¢ item çš„åˆ«åã€‚æ¯”å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc(alias = &quot;x&quot;)]
#[doc(alias = &quot;big&quot;)]
pub struct BigX;
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶åï¼Œå½“æœç´¢æ—¶ï¼Œä½ å¯ä»¥è¾“å…¥ &quot;x&quot; æˆ–è€… &quot;big&quot;ï¼Œæœç´¢ç»“æœä¼˜å…ˆæ˜¾ç¤º <code>BigX</code> ç»“æ„ã€‚</p>
<p>æ–‡æ¡£åˆ«åä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼šä½ ä¸èƒ½ä½¿ç”¨ <code>&quot;</code> æˆ–è€…ç©ºæ ¼ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨åˆ—è¡¨ä¸€æ¬¡å¢åŠ å¤šä¸ªåˆ«åï¼š</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[doc(alias(&quot;x&quot;, &quot;big&quot;))]
pub struct BigX;
<span class="boring">}
</span></code></pre></pre>
<h1><a class="header" href="#ä¸ç¨³å®šç‰¹æ€§" id="ä¸ç¨³å®šç‰¹æ€§">ä¸ç¨³å®šç‰¹æ€§</a></h1>
<p>Rustdoc is under active development, and like the Rust compiler, some features are only available
on nightly releases. Some of these features are new and need some more testing before they're able to be
released to the world at large, and some of them are tied to features in the Rust compiler that are unstable. Several features here require a matching <code>#![feature(...)]</code> attribute to
enable, and thus are more fully documented in the <a href="../unstable-book/index.html">Unstable Book</a>. Those sections will link over
there as necessary.</p>
<h2><a class="header" href="#nightly-gated-functionality" id="nightly-gated-functionality">Nightly-gated functionality</a></h2>
<p>These features just require a nightly build to operate. Unlike the other features on this page,
these don't need to be &quot;turned on&quot; with a command-line flag or a <code>#![feature(...)]</code> attribute in
your crate. This can give them some subtle fallback modes when used on a stable release, so be
careful!</p>
<h3><a class="header" href="#error-numbers-for-compile-fail-doctests" id="error-numbers-for-compile-fail-doctests">Error numbers for <code>compile-fail</code> doctests</a></h3>
<p>As detailed in <a href="documentation-tests.html#attributes">the chapter on documentation tests</a>, you can add a
<code>compile_fail</code> attribute to a doctest to state that the test should fail to compile. However, on
nightly, you can optionally add an error number to state that a doctest should emit a specific error
number:</p>
<pre><code class="language-markdown">```compile_fail,E0044
extern { fn some_func&lt;T&gt;(x: T); }
```
</code></pre>
<p>This is used by the error index to ensure that the samples that correspond to a given error number
properly emit that error code. However, these error codes aren't guaranteed to be the only thing
that a piece of code emits from version to version, so this is unlikely to be stabilized in the
future.</p>
<p>Attempting to use these error numbers on stable will result in the code sample being interpreted as
plain text.</p>
<h2><a class="header" href="#extensions-to-the-doc-attribute" id="extensions-to-the-doc-attribute">Extensions to the <code>#[doc]</code> attribute</a></h2>
<p>These features operate by extending the <code>#[doc]</code> attribute, and thus can be caught by the compiler
and enabled with a <code>#![feature(...)]</code> attribute in your crate.</p>
<h3><a class="header" href="#doccfg-recording-what-platforms-or-features-are-required-for-code-to-be-present" id="doccfg-recording-what-platforms-or-features-are-required-for-code-to-be-present"><code>#[doc(cfg)]</code>: Recording what platforms or features are required for code to be present</a></h3>
<p>You can use <code>#[doc(cfg(...))]</code> to tell Rustdoc exactly which platform items appear on.
This has two effects:</p>
<ol>
<li>doctests will only run on the appropriate platforms, and</li>
<li>When Rustdoc renders documentation for that item, it will be accompanied by a banner explaining
that the item is only available on certain platforms.</li>
</ol>
<p><code>#[doc(cfg)]</code> is intended to be used alongside <a href="./advanced-features.html"><code>#[cfg(doc)]</code></a>.
For example, <code>#[cfg(any(windows, doc))]</code> will preserve the item either on Windows or during the
documentation process. Then, adding a new attribute <code>#[doc(cfg(windows))]</code> will tell Rustdoc that
the item is supposed to be used on Windows. For example:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![feature(doc_cfg)]

<span class="boring">fn main() {
</span>/// Token struct that can only be used on Windows.
#[cfg(any(windows, doc))]
#[doc(cfg(windows))]
pub struct WindowsToken;

/// Token struct that can only be used on Unix.
#[cfg(any(unix, doc))]
#[doc(cfg(unix))]
pub struct UnixToken;

/// Token struct that is only available with the `serde` feature
#[cfg(feature = &quot;serde&quot;)]
#[doc(cfg(feature = &quot;serde&quot;))]
#[derive(serde::Deserialize)]
pub struct SerdeToken;
<span class="boring">}
</span></code></pre></pre>
<p>In this sample, the tokens will only appear on their respective platforms, but they will both appear
in documentation.</p>
<p><code>#[doc(cfg(...))]</code> was introduced to be used by the standard library and currently requires the
<code>#![feature(doc_cfg)]</code> feature gate. For more information, see <a href="../unstable-book/language-features/doc-cfg.html">its chapter in the Unstable
Book</a> and <a href="https://github.com/rust-lang/rust/issues/43781">its tracking issue</a>.</p>
<h3><a class="header" href="#doc_auto_cfg-automatically-generate-doccfg" id="doc_auto_cfg-automatically-generate-doccfg"><code>doc_auto_cfg</code>: Automatically generate <code>#[doc(cfg)]</code></a></h3>
<p><code>doc_auto_cfg</code> is an extension to the <code>#[doc(cfg)]</code> feature. With it, you don't need to add
<code>#[doc(cfg(...)]</code> anymore unless you want to override the default behaviour. So if we take the
previous source code:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![feature(doc_auto_cfg)]

<span class="boring">fn main() {
</span>/// Token struct that can only be used on Windows.
#[cfg(any(windows, doc))]
pub struct WindowsToken;

/// Token struct that can only be used on Unix.
#[cfg(any(unix, doc))]
pub struct UnixToken;

/// Token struct that is only available with the `serde` feature
#[cfg(feature = &quot;serde&quot;)]
#[derive(serde::Deserialize)]
pub struct SerdeToken;
<span class="boring">}
</span></code></pre></pre>
<p>It'll render almost the same, the difference being that <code>doc</code> will also be displayed. To fix this,
you can use <code>doc_cfg_hide</code>:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![feature(doc_cfg_hide)]
#![doc(cfg_hide(doc))]
<span class="boring">fn main() {
</span><span class="boring">}
</span></code></pre></pre>
<p>And <code>doc</code> won't show up anymore!</p>
<h3><a class="header" href="#adding-your-trait-to-the-notable-traits-dialog" id="adding-your-trait-to-the-notable-traits-dialog">Adding your trait to the &quot;Notable traits&quot; dialog</a></h3>
<p>Rustdoc keeps a list of a few traits that are believed to be &quot;fundamental&quot; to
types that implement them. These traits are intended to be the primary interface
for their implementers, and are often most of the API available to be documented
on their types. For this reason, Rustdoc will track when a given type implements
one of these traits and call special attention to it when a function returns one
of these types. This is the &quot;Notable traits&quot; dialog, accessible as a circled <code>i</code>
button next to the function, which, when clicked, shows the dialog.</p>
<p>In the standard library, some of the traits that are part of this list are
<code>Iterator</code>, <code>Future</code>, <code>io::Read</code>, and <code>io::Write</code>. However, rather than being
implemented as a hard-coded list, these traits have a special marker attribute
on them: <code>#[doc(notable_trait)]</code>. This means that you can apply this attribute
to your own trait to include it in the &quot;Notable traits&quot; dialog in documentation.</p>
<p>The <code>#[doc(notable_trait)]</code> attribute currently requires the <code>#![feature(doc_notable_trait)]</code>
feature gate. For more information, see <a href="../unstable-book/language-features/doc-notable-trait.html">its chapter in the Unstable Book</a>
and <a href="https://github.com/rust-lang/rust/issues/45040">its tracking issue</a>.</p>
<h3><a class="header" href="#exclude-certain-dependencies-from-documentation" id="exclude-certain-dependencies-from-documentation">Exclude certain dependencies from documentation</a></h3>
<p>The standard library uses several dependencies which, in turn, use several types and traits from the
standard library. In addition, there are several compiler-internal crates that are not considered to
be part of the official standard library, and thus would be a distraction to include in
documentation. It's not enough to exclude their crate documentation, since information about trait
implementations appears on the pages for both the type and the trait, which can be in different
crates!</p>
<p>To prevent internal types from being included in documentation, the standard library adds an
attribute to their <code>extern crate</code> declarations: <code>#[doc(masked)]</code>. This causes Rustdoc to &quot;mask out&quot;
types from these crates when building lists of trait implementations.</p>
<p>The <code>#[doc(masked)]</code> attribute is intended to be used internally, and requires the
<code>#![feature(doc_masked)]</code> feature gate.  For more information, see <a href="../unstable-book/language-features/doc-masked.html">its chapter in the Unstable
Book</a> and <a href="https://github.com/rust-lang/rust/issues/44027">its tracking issue</a>.</p>
<h2><a class="header" href="#document-primitives" id="document-primitives">Document primitives</a></h2>
<p>This is for Rust compiler internal use only.</p>
<p>Since primitive types are defined in the compiler, there's no place to attach documentation
attributes. The <code>#[doc(primitive)]</code> attribute is used by the standard library to provide a way
to generate documentation for primitive types, and requires <code>#![feature(rustdoc_internals)]</code> to
enable.</p>
<h2><a class="header" href="#document-keywords" id="document-keywords">Document keywords</a></h2>
<p>This is for Rust compiler internal use only.</p>
<p>Rust keywords are documented in the standard library (look for <code>match</code> for example).</p>
<p>To do so, the <code>#[doc(keyword = &quot;...&quot;)]</code> attribute is used. Example:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span>#![feature(rustdoc_internals)]

<span class="boring">fn main() {
</span>/// Some documentation about the keyword.
#[doc(keyword = &quot;keyword&quot;)]
mod empty_mod {}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#unstable-command-line-arguments" id="unstable-command-line-arguments">Unstable command-line arguments</a></h2>
<p>These features are enabled by passing a command-line flag to Rustdoc, but the flags in question are
themselves marked as unstable. To use any of these options, pass <code>-Z unstable-options</code> as well as
the flag in question to Rustdoc on the command-line. To do this from Cargo, you can either use the
<code>RUSTDOCFLAGS</code> environment variable or the <code>cargo rustdoc</code> command.</p>
<h3><a class="header" href="#--markdown-before-content-include-rendered-markdown-before-the-content" id="--markdown-before-content-include-rendered-markdown-before-the-content"><code>--markdown-before-content</code>: include rendered Markdown before the content</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --markdown-before-content extra.md
$ rustdoc README.md -Z unstable-options --markdown-before-content extra.md
</code></pre>
<p>Just like <code>--html-before-content</code>, this allows you to insert extra content inside the <code>&lt;body&gt;</code> tag
but before the other content <code>rustdoc</code> would normally produce in the rendered documentation.
However, instead of directly inserting the file verbatim, <code>rustdoc</code> will pass the files through a
Markdown renderer before inserting the result into the file.</p>
<h3><a class="header" href="#--markdown-after-content-include-rendered-markdown-after-the-content" id="--markdown-after-content-include-rendered-markdown-after-the-content"><code>--markdown-after-content</code>: include rendered Markdown after the content</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --markdown-after-content extra.md
$ rustdoc README.md -Z unstable-options --markdown-after-content extra.md
</code></pre>
<p>Just like <code>--html-after-content</code>, this allows you to insert extra content before the <code>&lt;/body&gt;</code> tag
but after the other content <code>rustdoc</code> would normally produce in the rendered documentation.
However, instead of directly inserting the file verbatim, <code>rustdoc</code> will pass the files through a
Markdown renderer before inserting the result into the file.</p>
<h3><a class="header" href="#--playground-url-control-the-location-of-the-playground" id="--playground-url-control-the-location-of-the-playground"><code>--playground-url</code>: control the location of the playground</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --playground-url https://play.rust-lang.org/
</code></pre>
<p>When rendering a crate's docs, this flag gives the base URL of the Rust Playground, to use for
generating <code>Run</code> buttons. Unlike <code>--markdown-playground-url</code>, this argument works for standalone
Markdown files <em>and</em> Rust crates. This works the same way as adding <code>#![doc(html_playground_url = &quot;url&quot;)]</code> to your crate root, as mentioned in <a href="the-doc-attribute.html#html_playground_url">the chapter about the <code>#[doc]</code>
attribute</a>. Please be aware that the official Rust Playground at
https://play.rust-lang.org does not have every crate available, so if your examples require your
crate, make sure the playground you provide has your crate available.</p>
<p>If both <code>--playground-url</code> and <code>--markdown-playground-url</code> are present when rendering a standalone
Markdown file, the URL given to <code>--markdown-playground-url</code> will take precedence. If both
<code>--playground-url</code> and <code>#![doc(html_playground_url = &quot;url&quot;)]</code> are present when rendering crate docs,
the attribute will take precedence.</p>
<h3><a class="header" href="#--sort-modules-by-appearance-control-how-items-on-module-pages-are-sorted" id="--sort-modules-by-appearance-control-how-items-on-module-pages-are-sorted"><code>--sort-modules-by-appearance</code>: control how items on module pages are sorted</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --sort-modules-by-appearance
</code></pre>
<p>Ordinarily, when <code>rustdoc</code> prints items in module pages, it will sort them alphabetically (taking
some consideration for their stability, and names that end in a number). Giving this flag to
<code>rustdoc</code> will disable this sorting and instead make it print the items in the order they appear in
the source.</p>
<h3><a class="header" href="#--show-type-layout-add-a-section-to-each-types-docs-describing-its-memory-layout" id="--show-type-layout-add-a-section-to-each-types-docs-describing-its-memory-layout"><code>--show-type-layout</code>: add a section to each type's docs describing its memory layout</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --show-type-layout
</code></pre>
<p>When this flag is passed, rustdoc will add a &quot;Layout&quot; section at the bottom of
each type's docs page that includes a summary of the type's memory layout as
computed by rustc. For example, rustdoc will show the size in bytes that a value
of that type will take in memory.</p>
<p>Note that most layout information is <strong>completely unstable</strong> and may even differ
between compilations.</p>
<h3><a class="header" href="#--resource-suffix-modifying-the-name-of-cssjavascript-in-crate-docs" id="--resource-suffix-modifying-the-name-of-cssjavascript-in-crate-docs"><code>--resource-suffix</code>: modifying the name of CSS/JavaScript in crate docs</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --resource-suffix suf
</code></pre>
<p>When rendering docs, <code>rustdoc</code> creates several CSS and JavaScript files as part of the output. Since
all these files are linked from every page, changing where they are can be cumbersome if you need to
specially cache them. This flag will rename all these files in the output to include the suffix in
the filename. For example, <code>light.css</code> would become <code>light-suf.css</code> with the above command.</p>
<h3><a class="header" href="#--extern-html-root-url-control-how-rustdoc-links-to-non-local-crates" id="--extern-html-root-url-control-how-rustdoc-links-to-non-local-crates"><code>--extern-html-root-url</code>: control how rustdoc links to non-local crates</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --extern-html-root-url some-crate=https://example.com/some-crate/1.0.1
</code></pre>
<p>Ordinarily, when rustdoc wants to link to a type from a different crate, it looks in two places:
docs that already exist in the output directory, or the <code>#![doc(doc_html_root)]</code> set in the other
crate. However, if you want to link to docs that exist in neither of those places, you can use these
flags to control that behavior. When the <code>--extern-html-root-url</code> flag is given with a name matching
one of your dependencies, rustdoc use that URL for those docs. Keep in mind that if those docs exist
in the output directory, those local docs will still override this flag.</p>
<h3><a class="header" href="#-z-force-unstable-if-unmarked" id="-z-force-unstable-if-unmarked"><code>-Z force-unstable-if-unmarked</code></a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z force-unstable-if-unmarked
</code></pre>
<p>This is an internal flag intended for the standard library and compiler that applies an
<code>#[unstable]</code> attribute to any dependent crate that doesn't have another stability attribute. This
allows <code>rustdoc</code> to be able to generate documentation for the compiler crates and the standard
library, as an equivalent command-line argument is provided to <code>rustc</code> when building those crates.</p>
<h3><a class="header" href="#--index-page-provide-a-top-level-landing-page-for-docs" id="--index-page-provide-a-top-level-landing-page-for-docs"><code>--index-page</code>: provide a top-level landing page for docs</a></h3>
<p>This feature allows you to generate an index-page with a given markdown file. A good example of it
is the <a href="https://doc.rust-lang.org/nightly/index.html">rust documentation index</a>.</p>
<p>With this, you'll have a page which you can custom as much as you want at the top of your crates.</p>
<p>Using <code>index-page</code> option enables <code>enable-index-page</code> option as well.</p>
<h3><a class="header" href="#--enable-index-page-generate-a-default-index-page-for-docs" id="--enable-index-page-generate-a-default-index-page-for-docs"><code>--enable-index-page</code>: generate a default index page for docs</a></h3>
<p>This feature allows the generation of a default index-page which lists the generated crates.</p>
<h3><a class="header" href="#--static-root-path-control-how-static-files-are-loaded-in-html-output" id="--static-root-path-control-how-static-files-are-loaded-in-html-output"><code>--static-root-path</code>: control how static files are loaded in HTML output</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --static-root-path '/cache/'
</code></pre>
<p>This flag controls how rustdoc links to its static files on HTML pages. If you're hosting a lot of
crates' docs generated by the same version of rustdoc, you can use this flag to cache rustdoc's CSS,
JavaScript, and font files in a single location, rather than duplicating it once per &quot;doc root&quot;
(grouping of crate docs generated into the same output directory, like with <code>cargo doc</code>). Per-crate
files like the search index will still load from the documentation root, but anything that gets
renamed with <code>--resource-suffix</code> will load from the given path.</p>
<h3><a class="header" href="#--persist-doctests-persist-doctest-executables-after-running" id="--persist-doctests-persist-doctest-executables-after-running"><code>--persist-doctests</code>: persist doctest executables after running</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs --test -Z unstable-options --persist-doctests target/rustdoctest
</code></pre>
<p>This flag allows you to keep doctest executables around after they're compiled or run.
Usually, rustdoc will immediately discard a compiled doctest after it's been tested, but
with this option, you can keep those binaries around for farther testing.</p>
<h3><a class="header" href="#--show-coverage-calculate-the-percentage-of-items-with-documentation" id="--show-coverage-calculate-the-percentage-of-items-with-documentation"><code>--show-coverage</code>: calculate the percentage of items with documentation</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --show-coverage
</code></pre>
<p>It generates something like this:</p>
<pre><code class="language-bash">+-------------------------------------+------------+------------+------------+------------+
| File                                | Documented | Percentage |   Examples | Percentage |
+-------------------------------------+------------+------------+------------+------------+
| lib.rs                              |          4 |     100.0% |          1 |      25.0% |
+-------------------------------------+------------+------------+------------+------------+
| Total                               |          4 |     100.0% |          1 |      25.0% |
+-------------------------------------+------------+------------+------------+------------+
</code></pre>
<p>If you want to determine how many items in your crate are documented, pass this flag to rustdoc.
When it receives this flag, it will count the public items in your crate that have documentation,
and print out the counts and a percentage instead of generating docs.</p>
<p>Some methodology notes about what rustdoc counts in this metric:</p>
<ul>
<li>Rustdoc will only count items from your crate (i.e. items re-exported from other crates don't
count).</li>
<li>Docs written directly onto inherent impl blocks are not counted, even though their doc comments
are displayed, because the common pattern in Rust code is to write all inherent methods into the
same impl block.</li>
<li>Items in a trait implementation are not counted, as those impls will inherit any docs from the
trait itself.</li>
<li>By default, only public items are counted. To count private items as well, pass
<code>--document-private-items</code> at the same time.</li>
</ul>
<p>Public items that are not documented can be seen with the built-in <code>missing_docs</code> lint. Private
items that are not documented can be seen with Clippy's <code>missing_docs_in_private_items</code> lint.</p>
<p>Calculating code examples follows these rules:</p>
<ol>
<li>These items aren't accounted by default:</li>
</ol>
<ul>
<li>struct/union field</li>
<li>enum variant</li>
<li>constant</li>
<li>static</li>
<li>typedef</li>
</ul>
<ol start="2">
<li>If one of the previously listed items has a code example, then it'll be counted.</li>
</ol>
<h4><a class="header" href="#json-output" id="json-output">JSON output</a></h4>
<p>When using <code>--output-format json</code> with this option, it will display the coverage information in
JSON format. For example, here is the JSON for a file with one documented item and one
undocumented item:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// This item has documentation
pub fn foo() {}

pub fn no_documentation() {}
<span class="boring">}
</span></code></pre></pre>
<pre><code class="language-json">{&quot;no_std.rs&quot;:{&quot;total&quot;:3,&quot;with_docs&quot;:1,&quot;total_examples&quot;:3,&quot;with_examples&quot;:0}}
</code></pre>
<p>Note that the third item is the crate root, which in this case is undocumented.</p>
<h3><a class="header" href="#-w--output-format-output-format" id="-w--output-format-output-format"><code>-w</code>/<code>--output-format</code>: output format</a></h3>
<p><code>--output-format json</code> emits documentation in the experimental
<a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustdoc_json_types/">JSON format</a>. <code>--output-format html</code> has no effect,
and is also accepted on stable toolchains.</p>
<p>It can also be used with <code>--show-coverage</code>. Take a look at its
<a href="unstable-features.html#--show-coverage-get-statistics-about-code-documentation-coverage">documentation</a> for more
information.</p>
<h3><a class="header" href="#--enable-per-target-ignores-allow-ignore-foo-style-filters-for-doctests" id="--enable-per-target-ignores-allow-ignore-foo-style-filters-for-doctests"><code>--enable-per-target-ignores</code>: allow <code>ignore-foo</code> style filters for doctests</a></h3>
<p>Using this flag looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --enable-per-target-ignores
</code></pre>
<p>This flag allows you to tag doctests with compiletest style <code>ignore-foo</code> filters that prevent
rustdoc from running that test if the target triple string contains foo. For example:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>///```ignore-foo,ignore-bar
///assert!(2 == 2);
///```
struct Foo;
<span class="boring">}
</span></code></pre></pre>
<p>This will not be run when the build target is <code>super-awesome-foo</code> or <code>less-bar-awesome</code>.
If the flag is not enabled, then rustdoc will consume the filter, but do nothing with it, and
the above example will be run for all targets.
If you want to preserve backwards compatibility for older versions of rustdoc, you can use</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>///```ignore,ignore-foo
///assert!(2 == 2);
///```
struct Foo;
<span class="boring">}
</span></code></pre></pre>
<p>In older versions, this will be ignored on all targets, but on newer versions <code>ignore-gnu</code> will
override <code>ignore</code>.</p>
<h3><a class="header" href="#--runtool---runtool-arg-program-to-run-tests-with-args-to-pass-to-it" id="--runtool---runtool-arg-program-to-run-tests-with-args-to-pass-to-it"><code>--runtool</code>, <code>--runtool-arg</code>: program to run tests with; args to pass to it</a></h3>
<p>Using these options looks like this:</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --runtool runner --runtool-arg --do-thing --runtool-arg --do-other-thing
</code></pre>
<p>These options can be used to run the doctest under a program, and also pass arguments to
that program. For example, if you want to run your doctests under valgrind you might run</p>
<pre><code class="language-bash">$ rustdoc src/lib.rs -Z unstable-options --runtool valgrind
</code></pre>
<p>Another use case would be to run a test inside an emulator, or through a Virtual Machine.</p>
<h3><a class="header" href="#--with-examples-include-examples-of-uses-of-items-as-documentation" id="--with-examples-include-examples-of-uses-of-items-as-documentation"><code>--with-examples</code>: include examples of uses of items as documentation</a></h3>
<p>This option, combined with <code>--scrape-examples-target-crate</code> and
<code>--scrape-examples-output-path</code>, is used to implement the functionality in <a href="https://github.com/rust-lang/rfcs/pull/3123">RFC
#3123</a>. Uses of an item (currently
functions / call-sites) are found in a crate and its reverse-dependencies, and
then the uses are included as documentation for that item. This feature is
intended to be used via <code>cargo doc --scrape-examples</code>, but the rustdoc-only
workflow looks like:</p>
<pre><code class="language-bash">$ rustdoc examples/ex.rs -Z unstable-options \
    --extern foobar=target/deps/libfoobar.rmeta \
    --scrape-examples-target-crate foobar \
    --scrape-examples-output-path output.calls
$ rustdoc src/lib.rs -Z unstable-options --with-examples output.calls
</code></pre>
<p>First, the library must be checked to generate an <code>rmeta</code>. Then a
reverse-dependency like <code>examples/ex.rs</code> is given to rustdoc with the target
crate being documented (<code>foobar</code>) and a path to output the calls
(<code>output.calls</code>). Then, the generated calls file can be passed via
<code>--with-examples</code> to the subsequent documentation of <code>foobar</code>.</p>
<h1><a class="header" href="#website-ç‰¹æ€§" id="website-ç‰¹æ€§">Website ç‰¹æ€§</a></h1>
<p>è¿™äº›ç‰¹æ€§æ˜¯å…³äºä½¿ç”¨<code>rustdoc</code>ç”Ÿæˆçš„ç½‘ç«™ã€‚</p>
<h2><a class="header" href="#è‡ªå®šä¹‰æœç´¢å¼•æ“" id="è‡ªå®šä¹‰æœç´¢å¼•æ“">è‡ªå®šä¹‰æœç´¢å¼•æ“</a></h2>
<p>å¦‚æœä½ ç»å¸¸å‚è€ƒåœ¨çº¿ Rust æ–‡æ¡£ï¼Œä½ ä¼šå–œæ¬¢ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰æœç´¢å¼•æ“ã€‚è¿™èƒ½è®©ä½ ä½¿ç”¨å¯¼èˆªåœ°å€æ ç›´æ¥æœç´¢ <code>rustdoc</code> ç½‘ç«™ã€‚å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒè¿™ç§ç‰¹æ€§ï¼Œè®©ä½ æ¥å®šä¹‰ä¸€ä¸ªåŒ…å« <code>%S</code>ï¼ˆä½ æœç´¢çš„å†…å®¹ï¼‰çš„ URL æ¨¡ç‰ˆï¼Œæ¯”å¦‚å¯¹äºæ ‡å‡†åº“ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ï¼š</p>
<pre><code class="language-text">https://doc.rust-lang.org/stable/std/?search=%s
</code></pre>
<p>æ³¨æ„è¿™ä¼šåˆ—å‡ºä½ æœç´¢åˆ°çš„æ‰€æœ‰ç»“æœã€‚å¦‚æœä½ æƒ³è¦ç›´æ¥æ‰“å¼€æœç´¢åˆ°çš„ç¬¬ä¸€ä¸ªç»“æœå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ¨¡æ¿ï¼š</p>
<pre><code class="language-text">https://doc.rust-lang.org/stable/std/?search=%s&amp;go_to_first=true
</code></pre>
<p>è¿™ä¸ª URL åœ¨æœ«å°¾åŠ å…¥äº†<code>go_to_first=true</code>æœç´¢å‚æ•°ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚</p>
<h1><a class="header" href="#passes" id="passes">Passes</a></h1>
<p>Rustdoc æœ‰ä¸€ä¸ªæ¦‚å¿µå«åš &quot;passes&quot;ã€‚åœ¨ <code>rustdoc</code> å‘½ä»¤æœ€ç»ˆç”Ÿæˆæ–‡æ¡£ä¹‹å‰å­˜åœ¨ä¸€äº›è½¬æ¢ã€‚</p>
<p>è‡ªå®šä¹‰ passes è¢«<strong>åºŸå¼ƒ</strong>äº†ï¼Œå·²ç»å¯ç”¨çš„ passes ä¸ä¼šç¨³å®šå¯èƒ½éšæ—¶ä¼šåœ¨å‘å¸ƒä¸­æ›´æ”¹</p>
<p>è¿‡å»æœ€å¸¸ç”¨çš„è‡ªå®šä¹‰ passes æ˜¯ <code>strip-private</code> passã€‚ä½ ç°åœ¨å¯ä»¥æ›´å®¹æ˜“çš„åšåˆ°è¿™ä¸ªï¼Œé€šè¿‡ä¼ é€’å‚æ•° <a href="./unstable-features.html#--document-private-items"><code>--document-private-items</code></a>.</p>
<h1><a class="header" href="#references" id="references">References</a></h1>
<p>æœ‰å¾ˆå¤šè‰¯å¥½çš„ <code>rustdoc</code> å‚è€ƒï¼Œå¦‚æœä½ çŸ¥é“å…¶ä»–çš„å¥½èµ„æºï¼Œè¯·æäº¤ PRï¼</p>
<h2><a class="header" href="#å®˜æ–¹" id="å®˜æ–¹">å®˜æ–¹</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#making-useful-documentation-comments">Learn Rust</a></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example/meta/doc.html">Rust By Example</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/comments.html#doc-comments">Rust Reference</a></li>
<li><a href="https://rust-lang.github.io/rfcs/1574-more-api-documentation-conventions.html">RFC 1574: More API Documentation Conventions</a></li>
<li><a href="https://rust-lang.github.io/rfcs/1946-intra-rustdoc-links.html">RFC 1946: Intra Rustdoc Links</a></li>
</ul>
<h2><a class="header" href="#ç¤¾åŒº" id="ç¤¾åŒº">ç¤¾åŒº</a></h2>
<ul>
<li><a href="https://rust-lang.github.io/api-guidelines/documentation.html">API Guidelines</a></li>
<li><a href="https://github.com/rust-lang/rfcs/issues?q=label%3AT-rustdoc">Github tagged RFCs</a></li>
<li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aissue+is%3Aopen+label%3AT-rustdoc">Github tagged issues</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/1687">RFC (stalled) front page styleguide</a></li>
<li><a href="https://blog.guillaume-gomez.fr/articles/2020-03-12+Guide+on+how+to+write+documentation+for+a+Rust+crate">Guide on how to write documentation for a Rust crate</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="language.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>

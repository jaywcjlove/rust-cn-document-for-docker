<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>语句 - Rust 语言风格指南 中文版</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">简介</a></li><li class="chapter-item expanded "><a href="items.html"><strong aria-hidden="true">1.</strong> 程序项</a></li><li class="chapter-item expanded "><a href="statements.html" class="active"><strong aria-hidden="true">2.</strong> 语句</a></li><li class="chapter-item expanded "><a href="expressions.html"><strong aria-hidden="true">3.</strong> 表达式</a></li><li class="chapter-item expanded "><a href="types.html"><strong aria-hidden="true">4.</strong> 类型和约束</a></li><li class="chapter-item expanded "><a href="advice.html"><strong aria-hidden="true">5.</strong> 其他风格建议</a></li><li class="chapter-item expanded "><a href="cargo.html"><strong aria-hidden="true">6.</strong> Cargo.toml 的约定</a></li><li class="chapter-item expanded "><a href="principles.html"><strong aria-hidden="true">7.</strong> 指导原则和基本原理</a></li><li class="chapter-item expanded "><a href="nightly.html"><strong aria-hidden="true">8.</strong> 开发版特定语法</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Rust 语言风格指南 中文版</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/rust-lang-cn/style-guide-cn" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#语句" id="语句">语句</a></h1>
<h2><a class="header" href="#let-语句" id="let-语句"><code>let</code> 语句</a></h2>
<p>在 <code>:</code> 后面和 <code>=</code> 的两边（若它们存在的话）空一格。分号前不要空格。</p>
<pre><code class="language-rust ignore">// 一条注释。
let pattern: Type = expr;

let pattern;
let pattern: Type;
let pattern = expr;
</code></pre>
<p>如果可能，将声明格式化成一行。如果不可能，则在 <code>=</code> 之后尝试分割，如果声明适合在两行中进行。将表达式块缩进。</p>
<pre><code class="language-rust ignore">let pattern: Type =
    expr;
</code></pre>
<p>如果第一行仍不能排在一行上，则在 <code>:</code> 之后分行，并使用块缩进。即使在 <code>:</code> 后分行后类型还需要多行，也应将第一行放在与 <code>:</code> 相同的行上，并遵守<a href="expressions.html#combinable-expressions">合并规则</a>。</p>
<pre><code class="language-rust ignore">let pattern:
    Type =
    expr;
</code></pre>
<p>例如：</p>
<pre><code class="language-rust ignore">let Foo {
    f: abcd,
    g: qwer,
}: Foo&lt;Bar&gt; =
    Foo { f, g };

let (abcd,
    defg):
    Baz =
{ ... }
</code></pre>
<p>如果表达式包含多行，若表达式的第一行适合在余下空位上，则表达式与 <code>=</code> 保留在同一行，表达式的其余部分不再缩进。如果第一行不合适，则将表达式放在后面的行中，分块缩进。如果表达式是一个代码块，且类型或模式覆盖多行，则将开头括号放在新的一行，且不缩进（这样可以将代码块内部与类型分开）；否则，开头括号放在 <code>=</code> 之后。</p>
<p>示例：</p>
<pre><code class="language-rust ignore">let foo = Foo {
    f: abcd,
    g: qwer,
};

let foo =
    ALongName {
        f: abcd,
        g: qwer,
    };

let foo: Type = {
    an_expression();
    ...
};

let foo:
    ALongType =
{
    an_expression();
    ...
};

let Foo {
    f: abcd,
    g: qwer,
}: Foo&lt;Bar&gt; = Foo {
    f: blimblimblim,
    g: blamblamblam,
};

let Foo {
    f: abcd,
    g: qwer,
}: Foo&lt;Bar&gt; = foo(
    blimblimblim,
    blamblamblam,
);
</code></pre>
<h3><a class="header" href="#else-块let-else-语句" id="else-块let-else-语句">else 块（let-else 语句）</a></h3>
<p>一个 let 语句可以包含一个 <code>else</code> 组件，使其成为一个 let-else 语句。在这种情况下，应始终对 else 块前面的组件（即 <code>let pattern: Type = initializer_expr</code> 部分）采用与<a href="#let-%E8%AF%AD%E5%8F%A5">其他 let 语句</a>相同的格式化规则。</p>
<p>如果以下条件都符合，则将整个 let-else 语句格式化为一行：</p>
<ul>
<li>整个语句很<strong>短</strong></li>
<li><code>else</code> 块只包含一个单行表达式，不包含任何语句</li>
<li><code>else</code> 块不包含注释</li>
<li><code>else</code> 块前面的 let 语句组件可以格式化为单行</li>
</ul>
<pre><code class="language-rust ignore">let Some(1) = opt else { return };
</code></pre>
<p>否则，let-else 语句需要换行。</p>
<p>如果将 let-else 语句换成多行，切勿在<code>else</code> 和 <code>{</code> 之间换行，一定要在 <code>}</code> 之前换行。</p>
<p>如果 <code>else</code> 前面的 let 语句组件可以格式化为一行，但 let-else 不符合完全放在一行的条件，则应将 <code>else {</code> 放在初始化表达式的同一行，并在两者之间留一个空格，然后在 <code>{</code> 之后换行。缩进结尾的 <code>}</code> 以匹配 <code>let</code>，并将包含的代码块再缩进一步。</p>
<pre><code class="language-rust ignore">let Some(1) = opt else {
    return;
};

let Some(1) = opt else {
    // nope
    return
};
</code></pre>
<p>如果 <code>else</code> 前面的 let 语句组件可以在一行中格式化，但 <code>else {</code> 不能在同一行中格式化时，则在 <code>else</code> 之前换行。</p>
<pre><code class="language-rust ignore">    let Some(x) = some_really_really_really_really_really_really_really_really_really_long_name
    else {
        return;
    };
</code></pre>
<p>如果初始化表达式为多行，则在且仅在以下所有条件都符合的情况下，将 <code>else</code> 关键字和代码块的开头括号（即 <code>else {</code>）放在与初始化表达式结尾相同的行上，并在它们之间留一个空格：</p>
<ul>
<li>初始化表达式以一个或多个结束括号、方括号和/或大括号结束</li>
<li>该行没有其他内容</li>
<li>该行的缩进级别与初始 <code>let</code> 关键字的缩进级别相同</li>
</ul>
<p>例如：</p>
<pre><code class="language-rust ignore">let Some(x) = y.foo(
    &quot;abc&quot;,
    fairly_long_identifier,
    &quot;def&quot;,
    &quot;123456&quot;,
    &quot;string&quot;,
    &quot;cheese&quot;,
) else {
    bar()
}
</code></pre>
<p>否则，将 <code>else</code> 关键字和开头括号放在初始化表达式结束后的下一行，<code>else</code> 关键字的缩进级别与 <code>let</code> 关键字的缩进级别相同。</p>
<p>例如：</p>
<pre><code class="language-rust ignore">fn main() {
    let Some(x) = abcdef()
        .foo(
            &quot;abc&quot;,
            some_really_really_really_long_ident,
            &quot;ident&quot;,
            &quot;123456&quot;,
        )
        .bar()
        .baz()
        .qux(&quot;fffffffffffffffff&quot;)
    else {
        return
    };

    let Some(aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa) =
        bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    else {
        return;
    };

    let LongStructName(AnotherStruct {
        multi,
        line,
        pattern,
    }) = slice.as_ref()
    else {
        return;
    };

    let LongStructName(AnotherStruct {
        multi,
        line,
        pattern,
    }) = multi_line_function_call(
        arg1,
        arg2,
        arg3,
        arg4,
    ) else {
        return;
    };
}
</code></pre>
<h2><a class="header" href="#在语句位置使用宏" id="在语句位置使用宏">在语句位置使用宏</a></h2>
<p>在语句位置使用宏时，使用圆括号或方括号作为分隔符，并以分号结束。请勿在名称、<code>!</code>、分隔符或 <code>;</code> 前后使用空格。</p>
<pre><code class="language-rust ignore">// 注释
a_macro!(...);
</code></pre>
<h2><a class="header" href="#语句位置中的表达式" id="语句位置中的表达式">语句位置中的表达式</a></h2>
<p>表达式和分号之间不要加空格。</p>
<pre><code class="language-rust ignore">&lt;expr&gt;;
</code></pre>
<p>用分号结束语句位置上的所有表达式，除非这些表达式以块结束或用作块的值。</p>
<p>例如：</p>
<pre><code class="language-rust ignore">{
    an_expression();
    expr_as_value()
}

return foo();

loop {
    break;
}
</code></pre>
<p>表达式为空类型时，即使可以传递，也要使用分号。例如：</p>
<pre><code class="language-rust ignore">fn foo() { ... }

fn bar() {
    foo();
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="items.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="expressions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="items.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="expressions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="language.js"></script>
        

        

    </body>
</html>
